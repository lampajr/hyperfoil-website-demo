<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://lampajr.github.io/hyperfoil-website-demo/docs/getting-started/><link rel=alternate type=application/rss+xml href=https://lampajr.github.io/hyperfoil-website-demo/docs/getting-started/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/hyperfoil-website-demo/favicons/favicon.ico><link rel=apple-touch-icon href=/hyperfoil-website-demo/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-192x192.png sizes=192x192><title>Getting Started | Hyperfoil</title><meta name=description content="Collection of quickstarts aiming to make the Hyperfoil adoption a lot easier.
"><meta property="og:title" content="Getting Started"><meta property="og:description" content="Collection of quickstarts aiming to make the Hyperfoil adoption a lot easier.
"><meta property="og:type" content="website"><meta property="og:url" content="https://lampajr.github.io/hyperfoil-website-demo/docs/getting-started/"><meta itemprop=name content="Getting Started"><meta itemprop=description content="Collection of quickstarts aiming to make the Hyperfoil adoption a lot easier.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting Started"><meta name=twitter:description content="Collection of quickstarts aiming to make the Hyperfoil adoption a lot easier.
"><link rel=preload href=/hyperfoil-website-demo/scss/main.min.c4a9e1fde5dcceec6bbb57977a65d8acb2f196f8a06900b4aab3ef4cbe000bc5.css as=style><link href=/hyperfoil-website-demo/scss/main.min.c4a9e1fde5dcceec6bbb57977a65d8acb2f196f8a06900b4aab3ef4cbe000bc5.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/hyperfoil-website-demo/><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300" height="65" viewBox="0 0 301 65"><g id="surface1"><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M52.84375 13.402344c3.972656.0 7.945312.0 12.039062.0C64.675781 14.992188 64.46875 16.582031 64.253906 18.21875 64.191406 18.710938 64.128906 19.207031 64.0625 19.714844 63.746094 22.109375 63.347656 24.433594 62.875 26.804688c2.429688.0 4.855469.0 7.359375.0C70.320312 26.117188 70.410156 25.429688 70.503906 24.722656 70.621094 23.8125 70.742188 22.898438 70.859375 21.988281 70.917969 21.535156 70.976562 21.085938 71.035156 20.621094 71.355469 18.191406 71.746094 15.800781 72.238281 13.402344 75.65625 13.386719 79.074219 13.375 82.492188 13.367188 83.65625 13.363281 84.816406 13.355469 85.980469 13.351562 87.648438 13.34375 89.320312 13.339844 90.988281 13.335938 91.511719 13.332031 92.035156 13.328125 92.574219 13.324219c1.246093.0 2.496093.0351560000000006 3.746093.078125C97.6875 14.769531 97.265625 17.582031 97.363281 19.476562 97.511719 22.109375 97.511719 22.109375 97.65625 24.792969c1.546875-3.757813 3.089844-7.519531 4.683594-11.390625C106.910156 13.351562 111.480469 13.316406 116.050781 13.292969 117.601562 13.28125 119.15625 13.269531 120.707031 13.25 122.945312 13.226562 125.183594 13.214844 127.421875 13.207031 128.113281 13.195312 128.800781 13.183594 129.511719 13.175781 133.644531 13.171875 136.710938 13.640625 140.464844 15.414062c2.371094 2.371094 2.628906 4.730469 2.886718 7.996094C143.265625 29.070312 141.609375 35.269531 137.523438 39.335938c-4.679688 3.808593-10.078126 3.078124-15.785157 2.878906C121.296875 45.089844 120.855469 47.964844 120.398438 50.929688c-3.972657.0-7.945313.0-12.039063.0C108.847656 44.71875 109.964844 38.660156 111.078125 32.542969c.28125-1.558594.5625-3.121094.84375-4.679688C112.097656 26.898438 112.269531 25.9375 112.449219 24.972656c.335937000000001-1.878906.59375-3.625.59375-5.539062-1.5 2.71875-3 5.4375-4.5 8.15625-.507812999999999.921875-1.019531 1.847656-1.53125 2.769531-.734375 1.332031-1.464844 2.664063-2.199219 3.992187C104.585938 34.765625 104.355469 35.175781 104.125 35.597656c-1.910156 3.46875-3.257812 6.117188-3.832031 10.054688-.5625 3.804687-.5625 3.804687-1.296875 5.277344-3.972656.0-7.945313.0-12.039063.0C87.257812 49.460938 87.5625 47.996094 87.875 46.488281c1.414062-8.957031-1.5625-18.375-3.59375-27.054687-1.113281 3.640625-1.855469 7.261718-2.492188 11.011718C81.632812 31.328125 81.632812 31.328125 81.476562 32.226562 81.15625 34.089844 80.835938 35.953125 80.515625 37.820312c-.21875 1.269532-.4375 2.539063-.65625 3.808594C79.324219 44.726562 78.792969 47.828125 78.261719 50.929688c-3.976563.0-7.949219.0-12.042969.0C66.550781 46.511719 67.023438 42.453125 68.226562 38.195312c-2.648437.0-5.296874.0-8.027343.0C60.117188 39.425781 60.035156 40.65625 59.949219 41.921875 59.726562 45.238281 59.136719 47.617188 58.191406 50.929688c-3.75.0-7.503906.0-11.371094.0C47.246094 43.042969 48.761719 35.390625 50.207031 27.640625 50.464844 26.257812 50.71875 24.875 50.972656 23.492188 51.59375 20.125 52.214844 16.765625 52.84375 13.402344zm72.238281 10.050781C124.214844 26.355469 123.515625 29.160156 123.074219 32.164062c3.074219.25 3.074219.25 5.9375-.667968000000002 1.203125-2.140625 1.222656-4.265625 1.421875-6.703125-2.160156-1.441407-2.867188-1.472657-5.351563-1.339844zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#fafcfd;fill-opacity:1" d="M12.792969-.0429688C13.648438-.0351562 14.507812-.03125 15.390625-.0234375 16.050781-.015625 16.710938-.0078125 17.390625.0 33.847656 36.132812 33.847656 36.132812 35.449219 44.898438 28.246094 48.9375 21.757812 50.421875 13.546875 50.46875 12.953125 50.472656 12.359375 50.472656 11.746094 50.476562 8.066406 50.4375 4.871094 49.949219 1.335938 48.917969-2.148438 33.503906-1.167969 14.703125 6.6875.671875 8.699219-.335938 10.5625-.0625 12.792969-.0429688zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M174.578125 13.402344C177.433594 13.351562 180.289062 13.316406 183.144531 13.292969 184.113281 13.28125 185.082031 13.269531 186.050781 13.25 196.136719 13.074219 196.136719 13.074219 200.667969 15.414062c2.375 2.378907 2.617187 4.515626 2.839843 7.789063C203.433594 28.203125 201.835938 33 198.660156 36.855469 197.234375 37.628906 197.234375 37.628906 195.984375 38.195312 196.347656 39.320312 196.347656 39.320312 196.714844 40.46875 197.03125 41.457031 197.34375 42.445312 197.65625 43.429688 197.816406 43.925781 197.976562 44.421875 198.140625 44.929688c.652343999999999 2.066406 1.1875 3.816406 1.1875 6-4.191406.0-8.386719.0-12.707031.0-2.257813-6.785157-2.257813-6.785157-2.675782-10.722657-.664062000000001.0-1.324218.0-2.007812.0C181.90625 40.644531 181.871094 41.082031 181.839844 41.53125 181.789062 42.117188 181.738281 42.703125 181.6875 43.304688c-.046875.574218000000002-.09375 1.152343-.140625 1.742187C181.269531 46.90625 181.269531 46.90625 179.929688 50.929688c-3.75.0-7.503907.0-11.371094.0.398437000000001-4.964844 1.011718-9.796876 1.90625-14.6875C170.582031 35.582031 170.699219 34.921875 170.820312 34.242188c.375-2.074219.75-4.148438 1.125-6.222657C172.203125 26.597656 172.457031 25.179688 172.710938 23.761719c.621093000000002-3.453125 1.242187-6.90625 1.867187-10.359375zm10.035156 10.050781C184.394531 25.664062 184.171875 27.875 183.945312 30.15625c2.285157.109375 2.285157.109375 4.679688.0 1.71875-1.722656 1.699219-3 2.007812-5.363281-2.296874-1.535157-3.335937-1.457031-6.019531-1.339844zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M248.15625 12.523438C248.609375 12.511719 249.058594 12.5 249.523438 12.488281 253.546875 12.484375 256.59375 13.445312 259.738281 16 263.234375 20.410156 262.6875 26.160156 262.203125 31.496094c-1.023437 6.945312-3.320313 12.792968-8.359375 17.714844-3.992188 2.5-7.804688 2.613281-12.375 2.597656C240.882812 51.816406 240.296875 51.828125 239.691406 51.839844 236.210938 51.84375 233.773438 51.542969 230.765625 49.585938c-3.589844-3.886719-3.625-7.460938-3.53125-12.554688.320312999999999-7 2.136719-15.65625 7.296875-20.667969 4.054688-3.160156 8.570312-3.863281 13.625-3.839843zm-5.832031 11.925781c-1.207031 2.375-1.574219 4.722656-1.984375 7.339843C240.210938 32.542969 240.210938 32.542969 240.078125 33.3125 239.644531 35.921875 239.460938 38.195312 239.460938 40.875c2.429687.0 4.855468.0 7.359374.0 2.023438-5.625 3.671876-11.382812 3.34375-17.421875C249.09375 23.382812 248.019531 23.328125 246.945312 23.285156 246.050781 23.238281 246.050781 23.238281 245.132812 23.191406 243.4375 23.308594 243.4375 23.308594 242.324219 24.449219zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M145.816406 13.402344c8.390625.0 16.777344.0 25.417969.0-1.335937 6.03125-1.335937 6.03125-2.675781 10.050781-4.191406.0-8.386719.0-12.707032.0.0 1.328125.0 2.652344.0 4.019531C159.382812 27.695312 162.914062 27.917969 166.554688 28.144531 166.113281 31.019531 165.671875 33.894531 165.214844 36.855469c-3.75.0-7.503906.0-11.371094.0C153.625 38.183594 153.402344 39.507812 153.175781 40.875c4.414063.0 8.828125.0 13.378907.0C165.96875 47.914062 165.96875 47.914062 165.214844 50.929688c-8.386719.0-16.773438.0-25.417969.0.453125-4.992188 1.007813-9.78125 1.90625-14.6875C141.820312 35.582031 141.9375 34.921875 142.058594 34.242188c.371093999999999-2.074219.75-4.148438 1.125-6.222657C143.4375 26.597656 143.695312 25.179688 143.949219 23.761719c.617187000000001-3.453125 1.242187-6.90625 1.867187-10.359375zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M207.355469 13.402344c7.945312.0 15.894531.0 24.082031.0-2.007812 7.371094-2.007812 7.371094-3.347656 10.050781C226.308594 23.765625 224.78125 23.917969 222.992188 23.957031 222.519531 23.976562 222.046875 23.996094 221.558594 24.015625c-1.167969.046875-2.332032.078125-3.5.109375C217.835938 25.449219 217.617188 26.777344 217.390625 28.144531c3.089844.0 6.179687.0 9.363281.0-1.253906 7.875-1.253906 7.875-2.007812 9.382813-3.089844.0-6.179688.0-9.363282.0C215.175781 38.992188 214.96875 40.457031 214.753906 41.964844 214.332031 44.960938 213.871094 47.941406 213.375 50.929688c-3.972656.0-7.945312.0-12.039062.0.394531000000001-4.964844 1.011718-9.796876 1.90625-14.6875C203.359375 35.582031 203.476562 34.921875 203.597656 34.242188 203.96875 32.167969 204.34375 30.09375 204.722656 28.019531 204.976562 26.597656 205.230469 25.179688 205.484375 23.761719c.621093999999999-3.453125 1.246094-6.90625 1.871094-10.359375zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M282.941406 13.402344c3.97265600000003.0 7.94531300000006.0 12.0390630000001.0C294.421875 16.777344 293.863281 20.152344 293.300781 23.523438 293.113281 24.671875 292.921875 25.820312 292.730469 26.964844 292.457031 28.617188 292.183594 30.269531 291.910156 31.921875 291.824219 32.433594 291.742188 32.941406 291.65625 33.46875 291.242188 35.949219 290.789062 38.410156 290.296875 40.875c3.53125.0 7.0625.0 10.703125.0C300.679688 44.300781 300.335938 47.550781 299.664062 50.929688c-7.726562.0-15.453124.0-23.414062.0C276.785156 47.605469 277.320312 44.28125 277.855469 40.960938 278.035156 39.835938 278.21875 38.710938 278.398438 37.585938 279.355469 31.621094 280.328125 25.65625 281.359375 19.703125 281.480469 18.980469 281.480469 18.980469 281.605469 18.242188 282.191406 14.898438 282.191406 14.898438 282.941406 13.402344zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M266.886719 13.402344c3.97265599999997.0 7.94531199999994.0 12.0390619999999.0C278.046875 21.011719 276.890625 28.523438 275.523438 36.0625 275.199219 37.851562 274.882812 39.640625 274.566406 41.433594 274.359375 42.574219 274.15625 43.710938 273.949219 44.851562 273.808594 45.652344 273.808594 45.652344 273.660156 46.472656 272.984375 50.179688 272.984375 50.179688 272.238281 50.929688 270.324219 50.976562 268.425781 50.988281 266.511719 50.96875 265.972656 50.964844 265.433594 50.964844 264.875 50.960938 263.539062 50.953125 262.203125 50.941406 260.867188 50.929688 261.242188 45.972656 261.878906 41.128906 262.769531 36.242188 262.890625 35.582031 263.007812 34.921875 263.128906 34.242188 263.5 32.167969 263.875 30.09375 264.253906 28.019531 264.507812 26.597656 264.761719 25.179688 265.015625 23.761719 265.636719 20.308594 266.261719 16.855469 266.886719 13.402344zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#387ab4;fill-opacity:1" d="M12.792969-.0429688C13.648438-.0351562 14.507812-.03125 15.390625-.0234375 16.050781-.015625 16.710938-.0078125 17.390625.0 33.847656 36.132812 33.847656 36.132812 35.449219 44.898438 28.246094 48.9375 21.757812 50.421875 13.546875 50.46875 12.953125 50.472656 12.359375 50.472656 11.746094 50.476562 8.066406 50.4375 4.871094 49.949219 1.335938 48.917969-2.148438 33.503906-1.167969 14.703125 6.6875.671875 8.699219-.335938 10.5625-.0625 12.792969-.0429688zM9.363281 2.011719c-2.316406 4.3125-3.996093 8.695312-5.351562 13.402343C3.890625 15.828125 3.769531 16.242188 3.640625 16.667969c-1.25 4.785156-1.136719 9.535156-1.089844 14.449219.0.84375.0 1.6875.0 2.558593-.578125 7.691407-.578125 7.691407 1.460938 14.570313C8.652344 49.21875 13.339844 48.960938 18.058594 48.917969c0-3.316407.0-6.632813.0-10.050781.882812000000001.0 1.765625.0 2.675781.0C20.726562 39.320312 20.71875 39.769531 20.710938 40.238281 20.707031 40.835938 20.699219 41.433594 20.695312 42.050781 20.6875 42.640625 20.679688 43.230469 20.671875 43.839844 20.730469 45.421875 20.957031 46.738281 21.40625 48.246094 26.105469 47.945312 29.824219 46.828125 34.113281 44.898438 33.179688 39.777344 31.417969 35.292969 29.347656 30.53125 29.023438 29.773438 28.695312 29.011719 28.359375 28.226562c-2.710937-6.304687-5.476563-12.585937-8.292969-18.84375-.21875.0-.441406000000001.0-.667968000000002.0C19.300781 19.117188 19.300781 19.117188 20.066406 28.8125c-.882812000000001.0-1.765625.0-2.675781.0C17.375 28.214844 17.359375 27.617188 17.339844 27.003906 17.277344 24.757812 17.210938 22.515625 17.140625 20.269531 17.113281 19.304688 17.085938 18.335938 17.058594 17.371094 16.914062 12.222656 16.730469 7.121094 16.054688 2.011719c-2.207032.0-4.417969.0-6.691407.0zm0 0"/><path style="stroke:none;fill-rule:nonzero;fill:#3075b1;fill-opacity:1" d="M38.125 46.238281C37.492188 49.210938 36.457031 51.597656 34.113281 53.609375 31.898438 54.179688 29.820312 54.054688 27.550781 53.902344 26.957031 53.878906 26.367188 53.859375 25.757812 53.835938 24.304688 53.78125 22.855469 53.699219 21.40625 53.609375 21.625 54.492188 21.847656 55.378906 22.074219 56.289062 22.515625 56.066406 22.957031 55.847656 23.410156 55.617188c2.007813-.125 2.007813-.125 4.015625.0C27.867188 56.0625 28.308594 56.503906 28.761719 56.957031c-2.121094 1.265625-4.257813 2.5-6.394531 3.730469C21.765625 61.042969 21.167969 61.402344 20.550781 61.769531c-5.046875 2.871094-5.046875 2.871094-7.902343 2.535157C11.683594 63.984375 11.683594 63.984375 10.703125 63.660156 10.480469 63.21875 10.261719 62.773438 10.035156 62.320312c2.648438-1.328124 5.296875-2.65625 8.023438-4.019531.0-1.550781.0-3.097656.0-4.691406C17.140625 53.570312 17.140625 53.570312 16.199219 53.53125 11.511719 53.28125 7.621094 52.898438 3.34375 50.929688 5.925781 50.023438 8.222656 50.40625 10.910156 50.675781 18.121094 51.265625 24.734375 49.78125 31.527344 47.328125 33.683594 46.601562 35.855469 46.238281 38.125 46.238281zm0 0"/></g></svg></span><span class=navbar-brand__name>Hyperfoil</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/hyperfoil-website-demo/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/hyperfoil-website-demo/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/hyperfoil-website-demo/download/><span>Download</span></a></li><li class=nav-item><a class=nav-link href=/hyperfoil-website-demo/community/><span>Community</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/hyperfoil-website-demo/offline-search-index.0e38b7480d78b6a828ea18716ca2fc5f.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/hyperfoil-website-demo/docs/getting-started/>Return to the regular view of this page</a>.</p></div><h1 class=title>Getting Started</h1><div class=lead>Collection of quickstarts aiming to make the Hyperfoil adoption a lot easier.</div><ul><li>1: <a href=#pg-e57001aa0aa090aa0a2953bad119d8fe>First benchmark</a></li><li>2: <a href=#pg-0e79996c908953912aca18973baf2b9a>Steps and statistics</a></li><li>3: <a href=#pg-2e63ba5f86108de3864126ec7bd66ad1>Complex workflow</a></li><li>4: <a href=#pg-d3f9faf527c78ebba67129eb638ec9cc>Phases - basics</a></li><li>5: <a href=#pg-452f5d903d7a60e877cf1604c07f7ef7>Phases - advanced</a></li><li>6: <a href=#pg-4d6c46612ea0f72719fcf8220b1f157c>Running the server</a></li><li>7: <a href=#pg-c81b8e39dec1574d4befeef36e537978>Clustered mode</a></li><li>8: <a href=#pg-7f802fa2fbaab44a7b5ca822ef30567b>Custom components</a></li></ul><div class=content><p>Embark on this journey with our collection of 8 quickstarts, guiding you through a wide range of potential use cases that you might encounter in daily operations.</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>Info</h4>Do not hesitate to suggest additional use cases that you believe would be valuable for this section.</div></div></div><div class=td-content><h1 id=pg-e57001aa0aa090aa0a2953bad119d8fe>1 - First benchmark</h1><div class=lead>Download, set up, and run your first Hyperfoil benchmark</div><h4 id=1-download-latest-releasehttpsgithubcomhyperfoilhyperfoilreleaseslatest-and-unpack-it>1. Download <a href=https://github.com/Hyperfoil/Hyperfoil/releases/latest>latest release</a> and unpack it<a class=td-heading-self-link href=#1-download-latest-releasehttpsgithubcomhyperfoilhyperfoilreleaseslatest-and-unpack-it aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wget <span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.url <span style=color:#ce5c00;font-weight:700>}}</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> unzip <span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.zip <span style=color:#ce5c00;font-weight:700>}}</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> <span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.dir <span style=color:#ce5c00;font-weight:700>}}</span>
</span></span></code></pre></div><h4 id=2-start-hyperfoil-in-interactive-mode-cli>2. Start Hyperfoil in interactive mode (CLI)<a class=td-heading-self-link href=#2-start-hyperfoil-in-interactive-mode-cli aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><p>For our first benchmark we&rsquo;ll start an embedded server (controller) within the CLI:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>Starting controller in default directory <span style=color:#ce5c00;font-weight:700>(</span>/tmp/hyperfoil<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>Controller started, listening on 127.0.0.1:41621
</span></span><span style=display:flex><span>Connecting to the controller...
</span></span><span style=display:flex><span>Connected!
</span></span></code></pre></div><h4 id=3-upload-the-minimalistic-benchmark-and-run-it>3. Upload the minimalistic benchmark and run it<a class=td-heading-self-link href=#3-upload-the-minimalistic-benchmark-and-run-it aria-label="Heading self-link"></a></h4><p>As you can see below, the benchmark is really minimalistic as it is doing only single request to <code>http://hyperfoil.io</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This is the name of the benchmark. It&#39;s recommended to keep this in sync with</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># name of this file, adding extension `.hf.yaml`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>single-request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We must define at least one HTTP target, in this case it becomes a default</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># for all HTTP requests.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Simulation consists of phases - potentially independent workloads.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We&#39;ll discuss phases more in detail in next quickstarts.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># `example` is the name of the single phase in this benchmark.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>example</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># `atOnce` with `users: 1` results in running the scenario below just once</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The only sequence in this scenario is called `test`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># In the only step in this sequence we&#39;ll do a HTTP GET request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># to `http://hyperfoil.io/`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># Inject helpers to make this request synchronous, i.e. keep</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># the sequence blocked until Hyperfoil processes the response.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Create the same benchmark in your local environment or <a href=/benchmarks/single-request.hf.yaml>download it</a>.
After that, upload it using the <code>upload</code> command as follow:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../single-request.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark single-request, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run single-request
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0001</span>
</span></span><span style=display:flex><span>Run 0001, benchmark single-request
</span></span><span style=display:flex><span>Agents: in-vm<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/11/15 16:11:43.725    Terminated: 2019/11/15 16:11:43.899
</span></span><span style=display:flex><span>&lt;span <span style=color:#000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;hfcaption&#34;</span>&gt;NAME     STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION               DESCRIPTION
</span></span><span style=display:flex><span>example  TERMINATED  16:11:43.725             16:11:43.899  <span style=color:#0000cf;font-weight:700>174</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>174</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  <span style=color:#0000cf;font-weight:700>1</span> users at once
</span></span></code></pre></div><h4 id=4-check-out-performance-results>4. Check out performance results:<a class=td-heading-self-link href=#4-check-out-performance-results aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run 000A
</span></span><span style=display:flex><span>&lt;span <span style=color:#000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;hfcaption&#34;</span>&gt;PHASE    METRIC  REQUESTS  MEAN       p50        p90        p99        p99.9      p99.99     2xx  3xx  4xx  5xx  CACHE  TIMEOUTS  ERRORS  BLOCKED
</span></span><span style=display:flex><span>example  <span style=color:#204a87>test</span>           <span style=color:#0000cf;font-weight:700>1</span>  172.49 ms  173.02 ms  173.02 ms  173.02 ms  173.02 ms  173.02 ms    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span> ns
</span></span></code></pre></div><p>Doing one request is not much of a benchmark and the statistics above are moot, but hey, this is a quickstart.</p><p>In the future you might find <a href=/docs/editor>editing with schema</a> useful but at this point any editor with YAML syntax highlighting will do the job.</p><p>Ready? Let&rsquo;s continue with <a href=/docs/getting-started/quickstart2>something a bit more realistic&mldr;</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-0e79996c908953912aca18973baf2b9a>2 - Steps and statistics</h1><div class=lead>Learn how to create more steps and how to gather run statistics</div><p>In <a href=/docs/getting-started/quickstart2>previous quickstart</a> you created a benchmark
that fires only one HTTP request. Our next example is going to hit random URLs at this server with 10 requests per second. We&rsquo;ll see how to generate random data and collect statistics for different URLs.</p><p>Let&rsquo;s start a container that will serve the requests:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>If you prefer running this in Docker just replace <code>podman</code> with <code>docker</code>. You can explore the handling of requests from this example on <a href=https://github.com/Hyperfoil/hyperfoil-examples/tree/main/quickstarts/random-urls>GitHub</a>.</p><p>Here is the benchmark we&rsquo;re going to run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>random-urls</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># 10 users will be starting the scenario every second</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Step `randomItem` randomly picks one item from the list below...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>index.html</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>foo.png</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>bar.png</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>this-returns-404.png</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># ... and stores it in users&#39;s session under key `my-random-path`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>my-random-path</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># HTTP request will read the variable from the session and format</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># the path for the GET request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/random-urls/${my-random-path}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># We&#39;ll use different statistics metric for webpages and images</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>.*\.html -&gt; pages</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>.*\.png -&gt; images</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- -<span style=color:#000>&gt; other</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Handler processes the response</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># We&#39;ll check that the response was successful (status 200-299)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>status</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>range</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2xx</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># When the response is fully processed we&#39;ll set variable `completed`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># in the session.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>onCompletion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>completed &lt;- yes</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># For demonstration purposes we will set `sync: false`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Next step is executed immediately after we fire the request, not</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># waiting for the response.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># We&#39;ll wait for the `completed` var to be set in this step, though.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>awaitVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>completed</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>So let&rsquo;s run this through CLI:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../random-urls.hf.yaml
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>Run 0002, benchmark random-urls
</span></span><span style=display:flex><span>Agents: in-vm<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/11/15 17:49:45.859    Terminated: 2019/11/15 17:49:50.904
</span></span><span style=display:flex><span>NAME  STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION               DESCRIPTION
</span></span><span style=display:flex><span>main  TERMINATED  17:49:45.859             17:49:50.903  <span style=color:#0000cf;font-weight:700>5044</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>44</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  10.00 users per second
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>PHASE  METRIC  REQUESTS  MEAN       p50        p90        p99        p99.9      p99.99     2xx  3xx  4xx  5xx  CACHE  TIMEOUTS  ERRORS  BLOCKED
</span></span><span style=display:flex><span>main   images        <span style=color:#0000cf;font-weight:700>34</span>    3.25 ms    3.39 ms    4.39 ms   12.58 ms   12.58 ms   12.58 ms   <span style=color:#0000cf;font-weight:700>12</span>   <span style=color:#0000cf;font-weight:700>13</span>   <span style=color:#0000cf;font-weight:700>12</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>    1.11 ms
</span></span><span style=display:flex><span>main   pages         <span style=color:#0000cf;font-weight:700>13</span>    2.89 ms    3.19 ms    4.15 ms    4.33 ms    4.33 ms    4.33 ms   <span style=color:#0000cf;font-weight:700>13</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span> ns
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main/images: Progress was blocked waiting <span style=color:#204a87;font-weight:700>for</span> a free connection. Hint: increase http.sharedConnections.
</span></span></code></pre></div><p>There are several things worth mentioning in this example:</p><ul><li><p>The command <code>run</code> does not have any argument. In this case, the benchmark name <code>random-urls</code> is optional as you&rsquo;ve just uploaded it and CLI knows that you are going to work with it. The same holds for <code>stats</code> - you don&rsquo;t have to write down run ID <code>0002</code> when displaying statistics as the implicit run ID is set automatically in the <code>run</code>/<code>status</code> command.</p></li><li><p>The test did only 47 requests in 5 seconds, instead of 50. It does not execute one request every 100 ms sharp, it randomizes the times of requests as well; this simulates the <a href=https://en.wikipedia.org/wiki/Poisson_point_process>Poisson point process</a>. Longer runs would have lower variance in the total numbers.</p></li><li><p>In metric <code>images</code> the test reports 1.11 ms being blocked and there&rsquo;s SLA failure below the stats. This is happening because in the default configuration Hyperfoil opens only one connection to the target server. All (possibly concurrent) requests have to share the common pool of 1 connection and if some request cannot be executed immediatelly we report this as blocked time. All practical benchmarks should increase the pool size to a value that reflects simulated load and prevent this situation.</p></li><li><p>The test took 44 ms longer than the configured 5 seconds. We terminate the test only after all responses for sent requests arrive (or time out).</p></li></ul><p>In the next quickstart you&rsquo;ll see a <a href=/docs/getting-started/quickstart3>more complex scenario</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2e63ba5f86108de3864126ec7bd66ad1>3 - Complex workflow</h1><div class=lead>Start creating a more complex workflow</div><p>The <a href=/docs/getting-started/quickstart>previous example</a> was the first &lsquo;real&rsquo; benchmark, but it didn&rsquo;t do anything different from what you could run through <code>wrk</code>, <code>ab</code>, <code>siege</code> or similar tools.</p><p>Of course, the results were not suffering from the <em>coordinated omission problem</em>, but Hyperfoil can do more. Let&rsquo;s try a more complex scenario:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>choose-movie</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Use 80 concurrent HTTP connections to the server. Default is 1,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># therefore we couldn&#39;t issue two concurrent requests (as HTTP pipelining</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># is disabled by default and we use HTTP 1.1 connections).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Each session will take at least 3 seconds (see the sleep time below),</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># and we&#39;ll be running ~10 per second. That makes 30, let&#39;s give it</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># some margin and set this to 40.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>maxSessions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>40</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># In previous scenarios we have used only single sequence and we could</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># define the list of sequences right away. In this scenario, we&#39;re going</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># to be using 3 different sequences.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Initial sequences are scheduled at session start and are not linked</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># to the other sessions.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>initialSequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>home</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Pick a random username from a file</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usernames.txt</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># The page would load a profile, e.g. to display full name.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/profile?user=${username}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>profile</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Fetch movies user could watch</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># Parse the returned JSON that is an array and for each</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># element fire the processor.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>processor</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#8f5902;font-style:italic># Store each element in a collection `movies`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>array</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># Store as byte[] to avoid encoding UTF-8 into String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>format</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BYTES</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># Every data structure in session has maximum size.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># This space is pre-allocated.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>maxSize</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This step waits until responses for all sent requests are received and processed.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#000>awaitAllResponses</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Wait 3 seconds to simulate user-interaction</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>3s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Set variable `quality` and `movieNames` to an uninitialized array</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># of 10 elements. We will use them later on.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>var</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>quality</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>objectArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>var</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movieNames</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>objectArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># For each element in variable `movies` schedule one (new) instance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># of sequence `movies`, defined below. These instances differ in</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># one intrinsic &#34;variable&#34; - their index.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>foreach</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sequence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>addComment</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Schedule one more sequence</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>newSequence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>watchMovie</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># These sequences are defined but don&#39;t get scheduled at session start. We activate</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># them explicitly (and multiple times in parallel) in foreach step above.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Sequences that can run multiple instances concurrently must declare the maximum</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># concurrency level explicitly using the brackets.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>addComment[10]</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Variables `movies` hosts an array, and in the foreach step</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># we&#39;ve created one sequence for each element. We&#39;ll access</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the element through the &#39;[.]&#39; notation below.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.quality</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># We&#39;ll extract quality to another collection under</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># this sequence&#39;s index. We shouldn&#39;t use global variable</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># as the execution of sequences may interleave.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>quality[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># For high-quality movies we won&#39;t post insults (we haven&#39;t seen</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the movie yet anyway). Therefore, we&#39;ll stop executing</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the sequence prematurely.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>breakSequence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>intCondition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>quality[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># Note: ideally we could filter the JSON directly using query</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic>#     .[] | select(.quality &gt;= 80)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># but this feature is not implemented yet.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>greaterOrEqualTo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.name</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movieNames[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># URLs with spaces and other characters don&#39;t work well;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># let&#39;s encode it (e.g. space -&gt; %20)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/movie/${urlencode:movieNames[.]}/comments</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>text</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>This movie sucks.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># The sync shortcut actually sets up a bit in the session state</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># cleared before the request and set when the request is complete,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># automatically waiting it after this step.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># You can write your own handlers (using sequence-scoped vars)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># to change this behaviour.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Set value to variable `commented`. The actual value does not matter.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>commented &lt;- true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>watchMovie</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This sequence is blocked in its first step until the variable gets</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># set. Therefore we could define it in `initialSequences` and omit</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the `newSequence` step at the end of `home` sequence.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>awaitVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>commented</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Choose one of the movies (including the bad ones, for simplicity)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>selectedMovie &lt;- movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>selectedMovie</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.name</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># This sequence is executed only once so we can use global var.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movieName</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Finally, go watch the movie!</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/movie/${urlencode:movieName}/watch</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Start the server and fire the scenario the usual way:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># start the server to interact with</span>
</span></span><span style=display:flex><span>podman run --rm -d -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># start Hyperfoil CLI</span>
</span></span><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../choose-movie.hf.yaml
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Is this scenario too simplistic? Let&rsquo;s <a href=/docs/getting-started/quickstart4>define phases</a>&mldr;</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d3f9faf527c78ebba67129eb638ec9cc>4 - Phases - basics</h1><div class=lead>Deep dive into the basics of phases</div><p><a href=/docs/getting-started/quickstart3>So far</a> the benchmark contained only one type of load; certain number of users hitting the system, doing always the same (though data could be randomized). In practice you might want to simulate several types of workloads at once: in an eshop users would come browsing or buying products, and operators would restock the virtual warehouse.</p><p>Also, driving constant load may not be the best way to run the benchmark: often you want to slowly ramp the load up to let the system adjust (scale up, perform JIT, fill pools) and push the full load only after that. When trying to find system limits, you do the same repetitevely - ramp up the load, measure latencies and if the system meets SLAs (latencies below limits) continue ramping up the load until it breaks.</p><p>In Hyperfoil, this all is expressed through <em>phases</em>. We&rsquo;ve already seen phases in the <a href=/docs/getting-started/quickstart1>first quickstart</a> as we wanted to execute a non-default type of load - running the workload only once. Let&rsquo;s take a look on the &ldquo;eshop&rdquo; case first:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This benchmark simulates operations in an eshop, with browsing/shopping users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># and operators restocking the warehouse.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>eshop</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># This defines a workload where users just look through the pages.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>browsingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This is the default type of workload, starting constant number of users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># each second. Note that we don&#39;t speak about &#39;requests per second&#39; as</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the scenario may issue any number of requests.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Browse is the name of our only sequence. We will avoid steps generating</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># random data for browsing for the sake of brevity.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Workload simulating users that are going to buy something</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>buyingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The length of this phase is not synchronized with other phases.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># You might think that this is too flexible at first.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[].id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># This is a shortcut to store in array-typed variable</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># `itemIds` holding at most 10 elements.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>toArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemIds[10]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Pick id for a random item</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- itemIds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This is a different type of phase, running fixed number of users.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># It is what most benchmarks do when you set number of threads; here we use</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># that as we know that we have fixed number of employees (operators) who</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># are restocking the warehouse.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>always</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>restock</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Select an id for random item to restock</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Variables in different scenarios are completely unrelated.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomInt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- 1 .. 999</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomInt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>units &lt;- 1 .. 10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/restock</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#8f5902;font-style:italic># We are using url-encoded form data</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>addUnits</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>units</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Operators need some pauses - otherwise we would start another</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># scenario execution (and fire another request) right away.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Start the same server as you did in the previous quickstarts:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>In <a href=/docs/getting-started/quickstart5>next quickstart</a> you&rsquo;ll learn how to repeat and link the phases.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-452f5d903d7a60e877cf1604c07f7ef7>5 - Phases - advanced</h1><div class=lead>Delve into more advanced phase configuration</div><p><a href=/docs/getting-started/quickstart4>Previous quickstart</a> presented a benchmark with three phases that all started at the same moment (when the benchmark was started) and had the same duration - different phases represented different workflows (types of user). In this example we will adjust the benchmark to scale the load gradually up.</p><p>At this point it would be useful to mention the lifecycle of phases; phase is in one of these states:</p><ul><li><strong>not started</strong>: As the name clearly says, the phase is not yet started.</li><li><strong>running</strong>: The agent started running the phase, i.e., performing the configured load.</li><li><strong>finished</strong>: When the <code>duration</code> elapses, no more new users are started. However, some might be still executing their scenarios.</li><li><strong>terminated</strong>: When all users complete their scenarios the phase becomes <em>terminated</em>. Users may be forcibly interrupted by setting <code>maxDuration</code> on the phase.</li><li><strong>cancelled</strong> If the benchmark cannot continue further, all remaining stages are cancelled.</li></ul><p>Let&rsquo;s take a look into the example, where we&rsquo;ll slowly (over 5 seconds) increase load to 10+5 users/sec, run with this load for 10 seconds, again increase it by another 10+5 users/sec and so forth until we reach 100+50 users per second. As we define <code>maxIterations</code> for these phases the benchmark will actually contain phases <code>browsingUserRampUp/0</code>, <code>browsingUserRampUp/1</code>, <code>browsingUserRampUp/2</code> and so forth.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>eshop-scale</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>browsingUserRampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This type of phase is similar to constantRate in the way how new users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># are started but gradually increases the rate from `initialUsersPerSec`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># to `targetUsersPerSec`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># In Hyperfoil, everything is pre-allocated = limited in size. Here we&#39;ll</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># set that we won&#39;t run more than 10 iterations of this phase.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Number of started users per sec increases with the iteration; in first</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># iteration we&#39;ll go from 0 to 10 users/second, in second from 10 to 20</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># and in last (10th) we&#39;ll reach 100 users/second.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Nth iteration of this phase will start when (N-1)th iteration of other</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># steady-state phases are finished. First iteration can start</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># immediatelly, of course.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The &amp;browsingUser syntax below creates YAML alias: we can later</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># reference this scenario and it will be used verbatim in another phase.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># It is possible to use aliases for both scenarios and sequences.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># We&#39;ll use the same scenario as in eshop.hf.yaml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>browsingUserSteady</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Nth iteration of this phase will start when Nth iteration of ramp-up</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># phases is finished.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Note that there&#39;s implicit rule that Nth iteration of given phase will</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># start only after (N-1)th iteration terminates.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># This refers to the alias created above; in steady state we&#39;ll use the</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># same scenario.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># These two phases will be very similar to browsingUserSteady and RampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>buyingUserRampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Again we&#39;ll use the same scenario as in eshop.hf.yaml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[].id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>toArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemIds[10]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- itemIds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>buyingUserSteady</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Operator phase is omitted for brevity as we wouldn&#39;t scale that up</span></span></span></code></pre></div><p>Don&rsquo;t forget to start the mock server as we&rsquo;ve used in the previous quickstart.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>Synchronizing multiple workloads across iteration can become a bit cumbersome. That&rsquo;s why we can keep similar types of workflow together, and split the phase into <em>forks</em>. In fact forks will become different phases, but these will be linked together so that you can refer to all of them as to a single phase. Take a look at the benchmark rewritten to use forks:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>eshop-forks</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>rampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Note that we have increased both the base and increment from 10 and 5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># to 15. This value is split between the forks based on their weight.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>steadyState</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>forks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>browsingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>buyingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                      </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[].id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                      </span><span style=color:#204a87;font-weight:700>toArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemIds[10]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- itemIds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>steadyState</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>forks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>browsingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>buyingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Operator phase is omitted for brevity as we wouldn&#39;t scale that up</span></span></span></code></pre></div><p>This definition will create phases <code>rampUp/0/browsingUser</code>, <code>rampUp/0/buyingUser</code>, <code>rampUp/1/browsingUser</code> etc. - you&rsquo;ll see them in statistics.</p><p>You could orchestrate the phases as it suits you, using <code>startAfter</code>, <code>startAfterStrict</code> (this requires the referenced phase to me <em>terminated</em> instead of <em>finished</em> as with <code>startAfter</code>) or <code>startTime</code> with relative time since benchmark start.</p><p>This sums up basic principles, in <a href=/docs/getting-started/quickstart6>next quickstart</a> you&rsquo;ll see how to start and use Hyperfoil in distributed mode.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4d6c46612ea0f72719fcf8220b1f157c>6 - Running the server</h1><div class=lead>Learn how to start the Hyperfoil server in standalone mode</div><p>Until now we have always started our benchmarks using an embedded <em>controller</em> in the CLI, using the <code>start-local</code> command. This spawns a server in the CLI JVM. CLI communicates with it using standard REST API, though the server port is randomized and listens on localhost only. All the benchmarks and run results are also stored in <code>/tmp/hyperfoil/</code> - you can change the directory as an argument to the <code>start-local</code> command.
While the embedded controller might be convenient for a quick test or when developing the scenario it&rsquo;s not something that you&rsquo;d use for a full-fledged benchmark.</p><p>When testing a reasonably performing system you need multiple nodes driving the load - we call them <em>agents</em>. These agents sync up, receive commands and report statistics to a master node, the <em>controller</em>. This node exposes a RESTful API to upload & start the benchmark, watch its progress and download results.</p><p>There are two other scripts in the <code>bin/</code> directory:</p><ul><li><code>standalone.sh</code> starts both the controller and (one) agent in a single JVM. This is not too different from the controller embedded in CLI.</li><li><code>controller.sh</code> starts clustered <a href=https://vertx.io/>Vert.x</a> and deploys the controller. Agents are started as needed in different nodes. You&rsquo;ll see this in the <a href=/docs/getting-started/quickstart7>next quickstart</a>.</li></ul><p>Also note that it is possible to <a href=/docs/user-guide/installation/k8s/>run Hyperfoil in Openshift</a>.</p><p>Open two terminals; in one terminal start the standalone server and in second terminal start the CLI.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/standalone.sh
</span></span></code></pre></div><p>and</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><p>Then, let&rsquo;s try to connect to the server (by default running on <code>http://localhost:8090</code>) and upload the <code>single-request</code> benchmark:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This is the name of the benchmark. It&#39;s recommended to keep this in sync with</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># name of this file, adding extension `.hf.yaml`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>single-request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We must define at least one HTTP target, in this case it becomes a default</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># for all HTTP requests.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Simulation consists of phases - potentially independent workloads.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We&#39;ll discuss phases more in detail in next quickstarts.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># `example` is the name of the single phase in this benchmark.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>example</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># `atOnce` with `users: 1` results in running the scenario below just once</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The only sequence in this scenario is called `test`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># In the only step in this sequence we&#39;ll do a HTTP GET request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># to `http://hyperfoil.io/`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># Inject helpers to make this request synchronous, i.e. keep</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># the sequence blocked until Hyperfoil processes the response.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>From the second terminal, the one running the Hyperfoil CLI, issue the following commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ connect
</span></span><span style=display:flex><span>Connected! Server has these agents connected:
</span></span><span style=display:flex><span>* localhost<span style=color:#ce5c00;font-weight:700>[</span>REGISTERED<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../single-request.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark single-request, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ run single-request
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0001</span>
</span></span></code></pre></div><p>When you switch to the first terminal (the one running the controller), you can see in the logs that the benchmark definition was stored on the server, the benchmark has been executed and its results have been stored to disk. Hyperfoil by default stores benchmarks in directory <code>/tmp/hyperfoil/benchmark</code> and data about runs in <code>/tmp/hyperfoil/run</code>; check it out:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>column -t -s , /tmp/hyperfoil/run/0001/stats/total.csv
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>Phase    Name  Requests  Responses  Mean       Min        p50.0      p90.0      p99.0      p99.9      p99.99     Max        MeanSendTime  ConnFailure  Reset  Timeouts  2xx  3xx  4xx  5xx  Other  Invalid  BlockedCount  BlockedTime  MinSessions  MaxSessions
</span></span><span style=display:flex><span>example  <span style=color:#204a87>test</span>  <span style=color:#0000cf;font-weight:700>1</span>         <span style=color:#0000cf;font-weight:700>1</span>          <span style=color:#0000cf;font-weight:700>267911168</span>  <span style=color:#0000cf;font-weight:700>267386880</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>2655879</span>       <span style=color:#0000cf;font-weight:700>0</span>            <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>             <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>Reading CSV/JSON files directly is not too comfortable; you can check the details through CLI as well:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run 002D
</span></span><span style=display:flex><span>Phase   Sequence  Requests      Mean       p50       p90       p99     p99.9    p99.99    2xx    3xx    4xx    5xx Timeouts Errors
</span></span><span style=display:flex><span>example:
</span></span><span style=display:flex><span>	test:            <span style=color:#0000cf;font-weight:700>1</span> 267.91 ms 268.44 ms 268.44 ms 268.44 ms 268.44 ms 268.44 ms      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>1</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>By the time you type the <code>stats</code> command into CLI the benchmark is already completed and the CLI shows stats for the whole run. Let&rsquo;s try running the {% include example_link.md src=&lsquo;eshop-scale.hf.yaml&rsquo; %} we&rsquo;ve seen in previous quickstart; this will give us some time to observe on-line statistics as the benchmark is progressing:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../eshop-scale.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark eshop-scale, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ run eshop-scale
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>Run 0002, benchmark eshop-scale
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Here the console would automatically jump into the <code>status</code> command, displaying the progress of the benchmark online. Press Ctrl+C to cancel that (it won&rsquo;t stop the benchmark run) and run the <code>stats</code> command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Recent stats from run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>Phase   Sequence  Requests      Mean       p50       p90       p99     p99.9    p99.99    2xx    3xx    4xx    5xx Timeouts Errors
</span></span><span style=display:flex><span>buyingUserSteady/000:
</span></span><span style=display:flex><span>        buy:             <span style=color:#0000cf;font-weight:700>8</span>   1.64 ms   1.91 ms   3.05 ms   3.05 ms   3.05 ms   3.05 ms      <span style=color:#0000cf;font-weight:700>8</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>        browse:          <span style=color:#0000cf;font-weight:700>8</span>   2.13 ms   2.65 ms   3.00 ms   3.00 ms   3.00 ms   3.00 ms      <span style=color:#0000cf;font-weight:700>8</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>browsingUserSteady/000:
</span></span><span style=display:flex><span>        browse:          <span style=color:#0000cf;font-weight:700>8</span>   2.74 ms   2.69 ms   2.97 ms   2.97 ms   2.97 ms   2.97 ms      <span style=color:#0000cf;font-weight:700>8</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>Press Ctr+C to stop watching...
</span></span></code></pre></div><p>You can go back to the run progress using the <code>status</code> command (hint: use <code>status --all</code> to display all phases, including those not started or already terminated):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ status
</span></span><span style=display:flex><span>Run 0002, benchmark eshop-scale
</span></span><span style=display:flex><span>Agents: localhost<span style=color:#ce5c00;font-weight:700>[</span>INITIALIZED<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/04/15 16:27:24.526
</span></span><span style=display:flex><span>NAME                    STATUS   STARTED       REMAINING  FINISHED  TOTAL DURATION
</span></span><span style=display:flex><span>browsingUserRampUp/006  RUNNING  16:28:54.565  <span style=color:#0000cf;font-weight:700>2477</span> ms
</span></span><span style=display:flex><span>buyingUserRampUp/006    RUNNING  16:28:54.565  <span style=color:#0000cf;font-weight:700>2477</span> ms
</span></span><span style=display:flex><span>Press Ctrl+C to stop watching...
</span></span></code></pre></div><p>Since we are showing this quickstart running the controller and CLI on the same machine it&rsquo;s easy to fetch results locally from <code>/tmp/hyperfoil/run/XXXX/...</code>. To save you SSHing into the controller host and finding the directories in a &rsquo;true remote&rsquo; case there&rsquo;s the <code>export</code> command; This fetches statistics to your computer where you&rsquo;re running CLI. You can chose between default JSON format (e.g. <code>export 0002 -f json -d /path/to/dir</code>) and CSV format (<code>export 0002 -f csv -d /path/to/dir</code>) - the latter packs all CSV files into single ZIP file for your convenience.</p><p>When you find out that the benchmark is not going well, you can terminate it prematurely:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ <span style=color:#204a87>kill</span>
</span></span><span style=display:flex><span>Kill run 0002, benchmark eshop-scale<span style=color:#ce5c00;font-weight:700>(</span>phases: <span style=color:#0000cf;font-weight:700>2</span> running, <span style=color:#0000cf;font-weight:700>0</span> finished, <span style=color:#0000cf;font-weight:700>40</span> terminated<span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>[</span>y/N<span style=color:#ce5c00;font-weight:700>]</span>: y
</span></span><span style=display:flex><span>Killed.
</span></span></code></pre></div><p>In the <a href=/docs/getting-started/quickstart7>next quickstart</a> we will deal with starting clustered Hyperfoil.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c81b8e39dec1574d4befeef36e537978>7 - Clustered mode</h1><div class=lead>Learn how to start the Hyperfoil server in clustered mode</div><p><a href=/docs/getting-started/quickstart6>Previously</a> we&rsquo;ve learned to start Hyperfoil in standalone server mode, and to do some runs through CLI. In this quickstart we&rsquo;ll see how to run your benchmark distributed to several agent nodes.</p><p>Hyperfoil operates as a cluster of <a href=https://vertx.io/>Vert.x</a>. When the benchmark is started, it deploys agents on other nodes according to the benchmark configuration - these are Vert.x nodes, too. Together controller and agents form a cluster and communicate over the event bus.</p><p>In this quickstart we&rsquo;ll use the SSH deployer; make sure your machine has SSH server running on port 22 and you can login using your pubkey <code>~/.ssh/id_rsa</code>. The SSH deployer copies the necessary JARs to <code>/tmp/hyperfoil/agentlib/</code> and starts the agent there. For instructions to run Hyperfoil in Kubernetes or Openshift please consult the <a href=/docs/user-guide/installation/k8s/>Installation docs</a>.</p><p>When we were running in the standalone or local mode we did not have to set any agents in the benchmark definition. That changes now as we need to inform the controller where the agents should be deployed. Let&rsquo;s see a benchmark - <code>two-agents.hf.yaml</code> that has those agents defined.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>two-agents</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># List of agents the Controller should deploy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>agents</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># This defines the agent using SSH connection to localhost, port 22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent-one</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>localhost:22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Another agent on localhost, this time defined using properties</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent-two</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>localhost</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span></span></span></code></pre></div><p>The load the benchmark generates is evenly split among the agents, so if you want to use another agent, you don&rsquo;t need to do any calculations - just add the agent and you&rsquo;re good to go.</p><p>Open three terminals; in the first start the controller using <code>bin/controller.sh</code>, in second one open the CLI with <code>bin/cli.sh</code> and in the third one start the example workload server:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>Connect, upload, start and check out the benchmark using CLI exactly the same way as we did in the previous quickstart:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ connect
</span></span><span style=display:flex><span>Connected!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../two-agents.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark two-agents, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ run two-agents
</span></span><span style=display:flex><span>Started run 004A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ status
</span></span><span style=display:flex><span>Run 004A, benchmark two-agents
</span></span><span style=display:flex><span>Agents: agent-one<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>, agent-two<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/04/17 17:08:19.703    Terminated: 2019/04/17 17:08:29.729
</span></span><span style=display:flex><span>NAME  STATUS      STARTED       REMAINING  FINISHED      TOTAL DURATION
</span></span><span style=display:flex><span>main  TERMINATED  17:08:19.708             17:08:29.729  <span style=color:#0000cf;font-weight:700>10021</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>21</span> ms<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run 004A
</span></span><span style=display:flex><span>Phase   Sequence  Requests      Mean       p50       p90       p99     p99.9    p99.99    2xx    3xx    4xx    5xx Timeouts Errors
</span></span><span style=display:flex><span>main:
</span></span><span style=display:flex><span>	test:          <span style=color:#0000cf;font-weight:700>106</span>   3.12 ms   2.83 ms   3.23 ms  19.53 ms  25.30 ms  25.30 ms    <span style=color:#0000cf;font-weight:700>106</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>You see that we did 106 requests which fits the assumption about running 10 user sessions per second over 10 seconds, while we have used 2 agents.</p><p>Vert.x clustering is using <a href=http://infinispan.org/>Infinispan</a> and <a href=http://www.jgroups.org/>JGroups</a>; depending on your networking setup it might not work out-of-the-box. If you experience any trouble, check out the <a href=/docs/faq>FAQ</a>.</p><p><a href=/docs/getting-started/quickstart8>Next quickstart</a> will get back to the scenario definition; we&rsquo;ll show you how to extend Hyperfoil with custom steps and handlers.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-7f802fa2fbaab44a7b5ca822ef30567b>8 - Custom components</h1><p>Hyperfoil offers some basic steps to do HTTP requests, generate data, alter control flow in the scenario etc., but your needs may surpass the features implemented so far. Also, it might be just easier to express your logic in Java code than combining steps in the YAML. The downside is reduced ability to reuse and more tight dependency on Hyperfoil APIs.</p><p>This quickstart will show you how to extend Hyperfoil with custom steps and handlers. As we use the standard Java <code>ServiceLoader</code> approach, after you build the module you should drop it into <code>extensions</code> directory. (Note: if you upload the benchmarks through CLI you need to put it to both the machine where you run the CLI and to the controller.)</p><p>Each extension will consist of two classes:</p><ul><li><code>Builder</code>, is loaded as service and creates the immutable extension instance</li><li>extension (<code>Step</code>, <code>Action</code> or handler)</li></ul><p>Let&rsquo;s start with a <code>io.hyperfoil.api.config.Step</code> implementation. The interface has single method <code>invoke(Session)</code> that should return <code>true</code> if the step was executed and <code>false</code> if its execution has been blocked and should be retried later. In case that the execution is blocked the invocation must not have any side effects - e.g. if the step is fetching objects from some pools and one of the pools is depleted, it should release the already acquired objects back to the pool.</p><p>We&rsquo;ll create a step that will divide variable from a session by a (configurable) constant and store the result in another variable.</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>DivideStep</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Step</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// All fields in a step are immutable, any state must be stored in the Session
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>ReadAccess</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>IntAccess</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>DivideStep</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ReadAccess</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>IntAccess</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Variables in session are not accessed directly using map lookup but
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// through the Access objects. This is necessary as the scenario can use
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// some simple expressions that are parsed when the scenario is built
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// (in this constructor), not at runtime.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fromVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>toVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>divisor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>boolean</span> <span style=color:#000>invoke</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Session</span> <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// This step will block until the variable is set, rather than
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// throwing an error or defaulting the value.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(!</span><span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isSet</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>))</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Session can store either objects or integers. Using int variables is
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// more efficient as it prevents repeated boxing and unboxing.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>/</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span></code></pre></div></div></div><p>Then we need a builder class that will allow us to configure the step. To keep related classes together we will define it as inner static class:</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>DivideStep</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Step</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#8f5902;font-style:italic>// Make this builder loadable as service
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#5c35cc;font-weight:700>@MetaInfServices</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>StepBuilder</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// This is the step name that will be used in the YAML
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#5c35cc;font-weight:700>@Name</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;divide&#34;</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Builder</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>BaseStepBuilder</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Builder</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>InitFromParam</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Builder</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Contrary to the step fields in builder are mutable
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>String</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>String</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Let&#39;s permit a short-form definition that will store the result
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// in the same variable. Note that the javadoc @param is used to generate external documentation.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>       * @param param Use myVar /= constant
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>       */</span>
</span></span><span style=display:flex><span>      <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>init</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divIndex</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>indexOf</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;/=&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>divIndex</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>BenchmarkDefinitionException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Invalid inline definition: &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>try</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Integer</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>parseInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>substring</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>divIndex</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>trim</span><span style=color:#ce5c00;font-weight:700>()));</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>NumberFormatException</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>BenchmarkDefinitionException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Invalid inline definition: &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>         <span style=color:#000>String</span> <span style=color:#000>var</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>substring</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>divIndex</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>trim</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>var</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>toVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>var</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// All fields are set in fluent setters - this helps when the scenario
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// is defined through programmatic configuration.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// When parsing YAML the methods are invoked through reflection;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// the attribute name is used for the method lookup.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fromVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>toVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// The parser can automatically convert primitive types and enums.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>divisor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>List</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Step</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>build</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#8f5902;font-style:italic>// You can ignore the sequence parameter; this is used only in steps
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#8f5902;font-style:italic>// that require access to the parent sequence at runtime.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>fromVar</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>null</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>toVar</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>null</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>divisor</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Here is a good place to check that the attributes are sane.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>            <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>BenchmarkDefinitionException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Missing one of the required attributes!&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>         <span style=color:#8f5902;font-style:italic>// The builder has a bit more flexibility and it can create more than
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#8f5902;font-style:italic>// one step at once.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Collections</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>singletonList</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DivideStep</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>               <span style=color:#000>SessionFactory</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>readAccess</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>),</span> <span style=color:#000>SessionFactory</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>intAccess</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>),</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span></code></pre></div></div></div><p>As the comments say, the builder is using fluent setter syntax to set the attributes. When you want to nest attributes under another builder, you can just add parameter-less method <code>FooBuilder foo()</code> the returns an instance of <code>FooBuilder</code>; the parser will fill this instance as well. There are some interfaces your builder can implement to accept lists or different structures, but the description is out of scope of this quickstart.</p><p>The builder class has two annotations: <code>@Name</code> which specifies the name we&rsquo;ll use in YAML as step name, and <code>@MetaInfServices</code> with <code>StepBuilder.class</code> as the parameter. If you were to implement other type of extension, this would be <code>Action.Builder.class</code>, <code>Request.ProcessorBuilder.class</code> etc. In order to record the service in META-INF directory in the jar you must also add this dependency to your module:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;groupId&gt;</span>org.kohsuke.metainf-services<span style=color:#204a87;font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;artifactId&gt;</span>metainf-services<span style=color:#204a87;font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;optional&gt;</span>true<span style=color:#204a87;font-weight:700>&lt;/optional&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>The whole class <a href=https://github.com/Hyperfoil/Hyperfoil/blob/master/distribution/src/main/java/io/hyperfoil/example/DivideStep.java>can be inspected here</a> and it is already included in the <code>extensions</code> directory. You can try running <code>bin/standalone.sh</code>, upload and run <code>divide.hf.yaml</code>. You should see about 5 log messages in the server log.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This benchmark demonstrates custom steps</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>divide</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>setInt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>foo &lt;- 33</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>divide</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>foo /= 3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>log</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>message</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Foo is {}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>foo</span></span></span></code></pre></div><p>There are several other integration points but <code>Step</code>:</p><ul><li><p><code>io.hyperfoil.api.session.Action</code> is very similar to step, but it does not allow blocking. Implement <code>Action.BuilderFactory</code> to define new actions.</p></li><li><p><code>StatusHandler</code>, <code>HeaderHandler</code> and <code>BodyHandler</code> in <code>io.hyperfoil.api.http</code> package process different stages of HTTP response parsing. All these have <code>BuilderFactory</code> inner interface for you to implement.</p></li><li><p><code>io.hyperfoil.api.connection.Processor</code> performs later generic stages of response processing. As this interface is generic, there are two factories that you could use: <code>i.h.a.c.Request.ProcessorBuilderFactory</code> and <code>i.h.a.c.HttpRequest.ProcessorBuilderFactory</code>.</p></li></ul><p>There is quite some boilerplate code in the process of creating a new component; that&rsquo;s why you can use Hyperfoil Codegen Maven plugin to scaffold the basic outline for you. Go to the module where you want the component generated and run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn io.hyperfoil:hyperfoil-codegen-maven-plugin:skeleton
</span></span></code></pre></div><p>The plugin will ask you for the package name, component name and type and write down the source code skeleton. You can provide the parameters right on commandline like</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn io.hyperfoil:hyperfoil-codegen-maven-plugin:skeleton <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    -Dskeleton.package<span style=color:#ce5c00;font-weight:700>=</span>foo.bar -Dskeleton.name<span style=color:#ce5c00;font-weight:700>=</span>myComponent -Dskeleton.type<span style=color:#ce5c00;font-weight:700>=</span>step
</span></span></code></pre></div><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4>The generator does not add the dependency to <code>org.kohsuke.metainf-services:metainf-services</code> to this module&rsquo;s <code>pom.xml</code>, you need to do that manually.</div><p>If you add <code>io.hyperfoil</code> as a plugin group to your <code>$HOME/.m2/settings.xml</code> like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;settings&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;pluginGroups&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;pluginGroup&gt;</span>io.hyperfoil<span style=color:#204a87;font-weight:700>&lt;/pluginGroup&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/pluginGroups&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/settings&gt;</span>
</span></span></code></pre></div><p>you can use the short syntax for the generator:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn hyperfoil-codegen:skeleton -Dskeleton.name<span style=color:#ce5c00;font-weight:700>=</span>....
</span></span></code></pre></div><p>See also further information about <a href=/docs/extensions/>custom extensions development</a>.</p><hr><p>This is the last quickstart in this series; if you seek more info check out the <a href=/docs/>documentation</a> or talk to us on <a href=https://github.com/Hyperfoil/Hyperfoil/discussions>GitHub Discussions</a>.</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub Discussions" aria-label="GitHub Discussions"><a target=_blank rel=noopener href=https://github.com/Hyperfoil/Hyperofil/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://x.com/Hyperfoil aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/Hyperfoil/Hyperofil aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Zulip aria-label=Zulip><a target=_blank rel=noopener href=https://hyperfoil.zulipchat.com/ aria-label=Zulip><i class="fab fa-z"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub Issues" aria-label="GitHub Issues"><a target=_blank rel=noopener href=https://github.com/Hyperfoil/Hyperofil/issues aria-label="GitHub Issues"><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2017&ndash;2024
<span class=td-footer__authors>Hyperfoil | <a href=https://www.apache.org/licenses/LICENSE-2.0>Apache License 2.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/hyperfoil-website-demo/js/main.min.53f3e04e8d693751b0d08317a1dfec9508d2a99f2a3d232d929e075cd6f20865.js integrity="sha256-U/PgTo1pN1Gw0IMXod/slQjSqZ8qPSMtkp4HXNbyCGU=" crossorigin=anonymous></script>
<script defer src=/hyperfoil-website-demo/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script>
<script src=/hyperfoil-website-demo/js/tabpane-persist.js></script></body></html>