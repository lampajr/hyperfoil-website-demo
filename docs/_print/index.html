<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://lampajr.github.io/hyperfoil-website-demo/docs/><link rel=alternate type=application/rss+xml href=https://lampajr.github.io/hyperfoil-website-demo/docs/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/hyperfoil-website-demo/favicons/favicon.ico><link rel=apple-touch-icon href=/hyperfoil-website-demo/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/hyperfoil-website-demo/favicons/android-192x192.png sizes=192x192><title>Documentation | Hyperfoil</title><meta name=description content="Microservice-oriented distributed benchmark framework."><meta property="og:title" content="Documentation"><meta property="og:description" content="Microservice-oriented distributed benchmark framework."><meta property="og:type" content="website"><meta property="og:url" content="https://lampajr.github.io/hyperfoil-website-demo/docs/"><meta itemprop=name content="Documentation"><meta itemprop=description content="Microservice-oriented distributed benchmark framework."><meta name=twitter:card content="summary"><meta name=twitter:title content="Documentation"><meta name=twitter:description content="Microservice-oriented distributed benchmark framework."><link rel=preload href=/hyperfoil-website-demo/scss/main.min.d0336840d8c0ef45658fa040135fe63f4426d79b707feb7cf795756dd7001fc7.css as=style><link href=/hyperfoil-website-demo/scss/main.min.d0336840d8c0ef45658fa040135fe63f4426d79b707feb7cf795756dd7001fc7.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/hyperfoil-website-demo/><span class="navbar-brand__logo navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="200pt" height="200pt" viewBox="0 0 200 200"><g transform="translate(0.000000,200.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M692 1873c-28-5-45-42-109-231-82-246-95-317-1e2-572-4-171-1-254 11-345 25-186 20-177 107-198 103-26 359-28 480-4 167 33 349 105 349 138 0 63-115 359-332 854-80 182-148 338-151 348-6 15-20 17-119 16-62-1-123-4-136-6zm228-1e2c0-106 20-593 26-640 5-43 6-43 46-43h40l-6 48c-8 69-29 512-24 517 4 4 289-634 338-760 33-83 80-222 80-235 0-19-298-120-354-120-13 0-16 13-16 68 0 37-3 97-7 135l-6 67h-38c-26 0-37-4-34-12 2-7 6-70 10-140l6-127-47-7c-49-7-250 10-320 27l-41 11-12 68c-38 230-38 515-1 705 21 107 97 352 138 447 23 52 27 53 155 56l67 2v-67z"/><path d="M1460 580c-31-4-103-24-160-44-219-78-416-102-609-72-57 9-106 14-108 13-10-11 294-67 363-67 31 0 32-1 38-57 4-32 10-66 12-76 5-14-17-28-113-74l-118-57 48-15 49-15 196 99c169 84 193 99 172 106-40 12-79 10-108-5-15-7-37-17-50-21-22-6-23-5-20 52l3 58 120 2c66 2 147 5 181 8l61 6 52 81c28 44 51 81 49 82s-28-1-58-4z"/></g></svg></span><span class=navbar-brand__name>Hyperfoil</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/hyperfoil-website-demo/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/hyperfoil-website-demo/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/hyperfoil-website-demo/download/><span>Download</span></a></li><li class=nav-item><a class=nav-link href=/hyperfoil-website-demo/community/><span>Community</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/hyperfoil-website-demo/offline-search-index.8bea877ebc731dffe78a21df6adb8a15.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/hyperfoil-website-demo/docs/>Return to the regular view of this page</a>.</p></div><h1 class=title>Documentation</h1><ul><li>1: <a href=#pg-6557438925ac398717df86f494c6abb8>Overview</a></li><ul><li>1.1: <a href=#pg-8eeb8711c9212b6d71c2599b66bb4de8>Concepts</a></li><li>1.2: <a href=#pg-b0f8e4ee3509d229b406a0b0bb933ca4>FAQ</a></li></ul><li>2: <a href=#pg-17b09a9dc5200475d8a306f18e63a0f9>Getting Started</a></li><ul><li>2.1: <a href=#pg-e57001aa0aa090aa0a2953bad119d8fe>First benchmark</a></li><li>2.2: <a href=#pg-0e79996c908953912aca18973baf2b9a>Steps and statistics</a></li><li>2.3: <a href=#pg-2e63ba5f86108de3864126ec7bd66ad1>Complex workflow</a></li><li>2.4: <a href=#pg-d3f9faf527c78ebba67129eb638ec9cc>Phases - basics</a></li><li>2.5: <a href=#pg-452f5d903d7a60e877cf1604c07f7ef7>Phases - advanced</a></li><li>2.6: <a href=#pg-4d6c46612ea0f72719fcf8220b1f157c>Running the server</a></li><li>2.7: <a href=#pg-c81b8e39dec1574d4befeef36e537978>Clustered mode</a></li><li>2.8: <a href=#pg-7f802fa2fbaab44a7b5ca822ef30567b>Custom components</a></li></ul><li>3: <a href=#pg-ecf7e357d2a131135219db95eddda49c>User Guide</a></li><ul><li>3.1: <a href=#pg-3d4feb145da9af18dcaedf5b8372894a>Installation</a></li><ul><li>3.1.1: <a href=#pg-ff809110397f9741adad09d719b356f2>Manual startup</a></li><li>3.1.2: <a href=#pg-f9f986e3fb547c118cd69904afdfdd3f>K8s/Openshift deployment</a></li><li>3.1.3: <a href=#pg-bf4589d8e0fac53dabd39bc5f2e0a20e>Manual k8s/Openshift deployment</a></li><li>3.1.4: <a href=#pg-a732327a38e5b0b5deb4162f4a7f7229>Ansible startup</a></li></ul><li>3.2: <a href=#pg-1aa0b1f37dce687249000b3550a88754>Benchmark</a></li><ul><li>3.2.1: <a href=#pg-58d6d997673b74a5517024f9baf5d16e>Agents</a></li><li>3.2.2: <a href=#pg-b1acdfa3d39eb15b26e75568d16f4ab3>HTTP</a></li><li>3.2.3: <a href=#pg-64114ea0efc225d733997a7c881c7cfd>Phases</a></li><li>3.2.4: <a href=#pg-02d9ad0faa5977a6fc32c799a9f1fe2b>Scenario</a></li><li>3.2.5: <a href=#pg-4857c7f234ff4c339e1e27e0d7c72157>Variables</a></li><li>3.2.6: <a href=#pg-ed2898c43a28d1cdf654b47cf571de58>Templates</a></li><li>3.2.7: <a href=#pg-eac813dee30aae69c7dc037191fce294>Hooks</a></li><li>3.2.8: <a href=#pg-9324f9d2479e31fa80f07d85df3cc6df>Ergonomics</a></li></ul><li>3.3: <a href=#pg-7db80c30652628d25611531a8cdce078>Examples</a></li><li>3.4: <a href=#pg-b2c7826362a5f4e84154bb1e2badfada>Troubleshooting</a></li></ul><li>4: <a href=#pg-17b81e141eb8ac7e0af38775813b1152>How To</a></li><ul><li>4.1: <a href=#pg-8ef01f0a946d4d4dd93646230da342ee>Benchmark schema support</a></li><li>4.2: <a href=#pg-56f7093d58f5923964e6c64ce9339c99>Using credentials</a></li></ul><li>5: <a href=#pg-3f77c8d8a47e2db5d7bd64ecc8baa77a>Migration</a></li><ul><li>5.1: <a href=#pg-43723ed78ffd3b1e71ee41626a792212>Migrating from wrk/wrk2</a></li></ul><li>6: <a href=#pg-b00a88a07ceb21b1a83e5822e0c86c1d>Reference</a></li><ul><li>6.1: <a href=#pg-e8ca74a8865e8d0c1ff4a37fd5118753>Steps</a></li><ul><li>6.1.1: <a href=#pg-c77477011b0f09119502d86926c52b00>addItem</a></li><li>6.1.2: <a href=#pg-9faf2a18cd5e5b79d4dc9b7b924e9f11>addToInt</a></li><li>6.1.3: <a href=#pg-ca186cdb91708d06b2d185d84109091d>addToSharedCounter</a></li><li>6.1.4: <a href=#pg-b709ee24ce9213297c37fd215ea00382>awaitAllResponses</a></li><li>6.1.5: <a href=#pg-ed9a9588c069d1deaca663aa73639f75>awaitDelay</a></li><li>6.1.6: <a href=#pg-ed27fc9d175b94f5105a69fedb784faf>awaitInt</a></li><li>6.1.7: <a href=#pg-4d64d4bce9b7808b64e6ca3d158df866>awaitVar</a></li><li>6.1.8: <a href=#pg-99f9ba03056c3024a64b7f2a71862b31>breakIfFinished</a></li><li>6.1.9: <a href=#pg-c06872cbd5141975ca8bb8b9e6bc0d37>breakSequence</a></li><li>6.1.10: <a href=#pg-a62d2db7476df146ca0c30891184227d>clearHttpCache</a></li><li>6.1.11: <a href=#pg-3b2ea0992f00f322a138998e84c55e55>conditional</a></li><li>6.1.12: <a href=#pg-3c48d8013f6f6e3fbaf33720471cc7c3>fail</a></li><li>6.1.13: <a href=#pg-89f58d3bd3ae93c30ade6433b674e41b>foreach</a></li><li>6.1.14: <a href=#pg-7c02e49382eb4ac7f2bb45cd32926905>getIndex</a></li><li>6.1.15: <a href=#pg-87d33e313edf95acd8f0280c6785c344>getItem</a></li><li>6.1.16: <a href=#pg-d3078210c272b46bdc8299c48dad00e5>getSharedCounter</a></li><li>6.1.17: <a href=#pg-5a2ac716a510195d9b4c9759dd1afeec>getSize</a></li><li>6.1.18: <a href=#pg-d1880b69aa8843cb08af441e74f5dd21>hotrodRequest</a></li><li>6.1.19: <a href=#pg-d13529b8904670ebf8b5c26ba219fe34>httpRequest</a></li><li>6.1.20: <a href=#pg-c2a70244aa280107f1e9f05298ee8a0d>json</a></li><li>6.1.21: <a href=#pg-1e722145d76483d895263b381dc1f215>log</a></li><li>6.1.22: <a href=#pg-e7fd55cac424a7314850c5eac812511e>loop</a></li><li>6.1.23: <a href=#pg-d21335c3143aafe147f6ad31324243ab>markRequestInvalid</a></li><li>6.1.24: <a href=#pg-651a29dfe6511bb16e4545442abe5414>newSequence</a></li><li>6.1.25: <a href=#pg-41ab2e4b54557e1eba6991a11073f79f>noop</a></li><li>6.1.26: <a href=#pg-7c53f3ce0f3044359481b8fac53fd61e>publishAgentData</a></li><li>6.1.27: <a href=#pg-63ab6333c32ca6b7fb29cb10b2a1e386>publishGlobalCounters</a></li><li>6.1.28: <a href=#pg-3e1067fddba3c87de6ab7dfa080011e4>pullSharedMap</a></li><li>6.1.29: <a href=#pg-df84f7168806cddb8fc62db91c90a271>pushSharedMap</a></li><li>6.1.30: <a href=#pg-f7ebf153ba4032d5cf968ddb84db0176>randomCsvRow</a></li><li>6.1.31: <a href=#pg-f293af3ce52975d08993b9a7b7f25f4a>randomFile</a></li><li>6.1.32: <a href=#pg-b8714a420ede088560655f9b38be326f>randomInt</a></li><li>6.1.33: <a href=#pg-9005015d578fa2eb2f299c1142c6d052>randomItem</a></li><li>6.1.34: <a href=#pg-195c10345e2ffbdf365398684061f37a>randomUUID</a></li><li>6.1.35: <a href=#pg-a84fab46af5f441b83ae2c8de59f3e79>readAgentData</a></li><li>6.1.36: <a href=#pg-6d56a2d3d096a82f4b2fc7e0a770aaea>removeItem</a></li><li>6.1.37: <a href=#pg-d7680957ae407423805ac8e4262f277d>restartSequence</a></li><li>6.1.38: <a href=#pg-befeecc6a64be2902f8125c311e070f5>scheduleDelay</a></li><li>6.1.39: <a href=#pg-379fbfec10bbd6aead0bb67ec96aa2d1>set</a></li><li>6.1.40: <a href=#pg-5dd94c75d9bae462384429f2ed42f0a9>setInt</a></li><li>6.1.41: <a href=#pg-fd958bcacb2dee247ab59e3444b295f1>setItem</a></li><li>6.1.42: <a href=#pg-61cf6f6b50f73cfa552d6ec97990df5b>setSharedCounter</a></li><li>6.1.43: <a href=#pg-05faae193490781ae8a674b593bf2058>stop</a></li><li>6.1.44: <a href=#pg-d7c1fb7c7206f12a934394c449169a10>stopwatch</a></li><li>6.1.45: <a href=#pg-3696f2baf330845b249f692a89b45a18>stringToInt</a></li><li>6.1.46: <a href=#pg-cce6d8c4296b10392693306026ace140>template</a></li><li>6.1.47: <a href=#pg-cb5766b35df10870bce74cf34202dac6>thinkTime</a></li><li>6.1.48: <a href=#pg-8b96576cdcd0dce8739e65796cb1f6df>timestamp</a></li><li>6.1.49: <a href=#pg-700c22b63653627f8fea4a95484918eb>unset</a></li></ul><li>6.2: <a href=#pg-d58d66ab51d43ebf96c38f988e82983c>Processors</a></li><ul><li>6.2.1: <a href=#pg-c6a98da7fa8ca189a23e844e4012b80b>addItem</a></li><li>6.2.2: <a href=#pg-0db88721d1dd7d38e258355625bb2026>addToInt</a></li><li>6.2.3: <a href=#pg-7a9ba4a71001710d8deef4648f986302>addToSharedCounter</a></li><li>6.2.4: <a href=#pg-941841d688495dfd99c4085af4e8aad2>array</a></li><li>6.2.5: <a href=#pg-a70e0c9a6125ee94974f0e0b16ce4b8a>clearHttpCache</a></li><li>6.2.6: <a href=#pg-ee8b3f87b22543f56dcf82ecfef3cf93>closeConnection</a></li><li>6.2.7: <a href=#pg-6e7da6f674ed0624b90ff2ad87b5202f>collection</a></li><li>6.2.8: <a href=#pg-6ddd6321f6617b8c6d7bbc0061ffadb5>conditional</a></li><li>6.2.9: <a href=#pg-29cabec0d112cde0b69476dc488cfe05>count</a></li><li>6.2.10: <a href=#pg-9c3039901b6281342a745968d6d2da69>fail</a></li><li>6.2.11: <a href=#pg-65df783747a37cff26abe53a78629094>getIndex</a></li><li>6.2.12: <a href=#pg-d5b280c77ae265626200cac6c8cdc623>getItem</a></li><li>6.2.13: <a href=#pg-301e6531d29e4dc0cea9e96dd57b5297>getSharedCounter</a></li><li>6.2.14: <a href=#pg-95d9df7d4ff152c9d51edbe049b23bcf>getSize</a></li><li>6.2.15: <a href=#pg-d50dd140e1d76d6c01ada1c5d4b8fda7>gzipInflator</a></li><li>6.2.16: <a href=#pg-2d21f54bb6cd91e17cc346c7e41c540a>json</a></li><li>6.2.17: <a href=#pg-260b076bd79058665f49e01d52706c32>log</a></li><li>6.2.18: <a href=#pg-ac4007d930dd714bc06a7a55f02aac95>logInvalid</a></li><li>6.2.19: <a href=#pg-b35bd7bfd80e7b5e803b17a9da2828f0>markRequestInvalid</a></li><li>6.2.20: <a href=#pg-d25ee192e40b2fd40e5f984976b60c1c>newSequence</a></li><li>6.2.21: <a href=#pg-ad0a401854c7ced964e8416a651a1341>parseHtml</a></li><li>6.2.22: <a href=#pg-457b70bdb85c3e5f12afdca1ca35e73f>publishAgentData</a></li><li>6.2.23: <a href=#pg-b837ec7195bc4d5f13fb7b683cec1bea>publishGlobalCounters</a></li><li>6.2.24: <a href=#pg-11724288b9a33a3829264bc59f241ae0>queue</a></li><li>6.2.25: <a href=#pg-16e230848c596645efa69837609278d3>readAgentData</a></li><li>6.2.26: <a href=#pg-2257a9b3db64c84638585c5051c78af5>removeItem</a></li><li>6.2.27: <a href=#pg-c68e8e3c3b8d06a74245e633b22113a5>restartSequence</a></li><li>6.2.28: <a href=#pg-267e18c4a8af2f705ba7cad32e5708a9>set</a></li><li>6.2.29: <a href=#pg-970e4f2f6bd04e795dbd209d9f06e708>setInt</a></li><li>6.2.30: <a href=#pg-5407eb11385ddbfef4cb5b8546ef075a>setItem</a></li><li>6.2.31: <a href=#pg-d020fdb98405f6dca8bb94c51f6d102d>setSharedCounter</a></li><li>6.2.32: <a href=#pg-7d7cd197e0840b4b25b0a02ab4c472e4>store</a></li><li>6.2.33: <a href=#pg-662d636570fc2c2d7f0c597afd51129d>storeInt</a></li><li>6.2.34: <a href=#pg-2d85a60551e09cadf9b49cf16f948cb4>stringToInt</a></li><li>6.2.35: <a href=#pg-dc4fa9227de31ad76ba6e1c1a473d933>unset</a></li></ul><li>6.3: <a href=#pg-74d7fed089124b33bcdb2c3efbb5649b>Actions</a></li><ul><li>6.3.1: <a href=#pg-b62021bf8767fe329413e3899c00ebbb>addItem</a></li><li>6.3.2: <a href=#pg-9da2846d51e05ffc0b7922b6c3baa697>addToInt</a></li><li>6.3.3: <a href=#pg-2f7912fe74b800e17fae0f314db37626>addToSharedCounter</a></li><li>6.3.4: <a href=#pg-246385c09927d0f4591927cf9e268b1c>clearHttpCache</a></li><li>6.3.5: <a href=#pg-d955a012ec099127d0b6c38ddbd62fb1>conditional</a></li><li>6.3.6: <a href=#pg-2fa8979b1dea4fc8a6f2d1a86b18f755>fail</a></li><li>6.3.7: <a href=#pg-d93bc9b636a58fac68f968b3be2f039b>getIndex</a></li><li>6.3.8: <a href=#pg-dee98ce631adfb4aa2af130b79db583b>getItem</a></li><li>6.3.9: <a href=#pg-b26c7b4835115c9139856307b38c2944>getSharedCounter</a></li><li>6.3.10: <a href=#pg-3e06ffb5a33af65633b353eb4b62ce0a>getSize</a></li><li>6.3.11: <a href=#pg-d9449f224c6e246e88400e4e7a08d8e9>log</a></li><li>6.3.12: <a href=#pg-5153fe174fcce597181a2f3004ef8bc0>markRequestInvalid</a></li><li>6.3.13: <a href=#pg-fa80e554549d2fa20f35c366eacdb27d>newSequence</a></li><li>6.3.14: <a href=#pg-4bba38f9f42ceaeb756243178f080e31>publishAgentData</a></li><li>6.3.15: <a href=#pg-590f6b5f042d7f1885e536d772e34c57>publishGlobalCounters</a></li><li>6.3.16: <a href=#pg-5d63fa47ba28317dfe36c8eafc9c5db0>readAgentData</a></li><li>6.3.17: <a href=#pg-0dacfdb49e9275c001a76822ff4cf326>removeItem</a></li><li>6.3.18: <a href=#pg-667cfcde3f17de06ea0619158cac8dd8>restartSequence</a></li><li>6.3.19: <a href=#pg-9e9ca1e14e699cccdab44e3b0c924c57>set</a></li><li>6.3.20: <a href=#pg-c67f263df2f9d86e80ef9e60b6334a7f>setInt</a></li><li>6.3.21: <a href=#pg-e01a28fff1f433fd583f7c59618429b4>setItem</a></li><li>6.3.22: <a href=#pg-b6d683c2e9f3f4cf02ed9b943d1ca9da>setSharedCounter</a></li><li>6.3.23: <a href=#pg-098f01a4c905aac3a8459883f76ace8c>stringToInt</a></li><li>6.3.24: <a href=#pg-ecb62f2ab4c49c19c53f5a8657f599ce>unset</a></li></ul></ul><li>7: <a href=#pg-4d7cdf0fc878af052e8b73d41dd8c7dd>Extensions</a></li><li>8: <a href=#pg-20dabbfe348078f71286a134b47230cf>Controller API</a></li><ul><li>8.1: <a href=#pg-7453ce567cf7617cc9fadff12e3c4baf>Swagger UI</a></li></ul><li>9: <a href=#pg-934e0568852666ce9d12820b78b67fe9>Architecture</a></li></ul><div class=content><p>Here you can find an exhaustive documentation for the Hyperfoil tool, let&rsquo;s start!</p></div></div><div class=td-content><h1 id=pg-6557438925ac398717df86f494c6abb8>1 - Overview</h1><div class=lead>Generic overview on the Hyperfoil tool</div><p>There’s plenty of web benchmark tools around and it might be hard to pick one, and investing time into not-established tools is risky. Hyperfoil was not created for the pure joy of coding but as a solution to set of problems which could not be solved all by single other existing tool.</p><h2 id=free-software>Free software<a class=td-heading-self-link href=#free-software aria-label="Heading self-link"></a></h2><p>Free software allows you to take your benchmark and publish it for everyone to verify. With proprietary licenses that wouldn&rsquo;t be so easy.</p><p>Hyperfoil is licensed under <a href=http://www.apache.org/licenses/LICENSE-2.0>Apache License 2.0</a>.</p><h2 id=distribution>Distribution<a class=td-heading-self-link href=#distribution aria-label="Heading self-link"></a></h2><p>Generating load with single node stops scaling at certain point and you need to orchestrate the benchmark across a cluster of nodes. Simple command-line tools usually ignore this completely (you&rsquo;re supposed to start them, gather and merge the data in a bash scripts). Other tools use open-core model with the clustering part being a paid/proprietary option. There are frameworks that have clustering built in as well.</p><p>Hyperfoil uses leader-follower model with Vert.x Event bus as the clustering middleware. While running from single VM is possible (and <a href=/docs/getting-started/quickstart1/>quite easy</a>) as well, the design is distributed by default.</p><h2 id=accuracy>Accuracy<a class=td-heading-self-link href=#accuracy aria-label="Heading self-link"></a></h2><p>The point of web benchmark is usually finding out what happens when your system is accessed by thousands of concurrent users - each doing a page load every few seconds. However many traditional load drivers simplify the scenario to few dozen of virtual users (VUs) that execute one request after another or with very short delays in between - this is referred to as the Closed System Model (as the set of VUs is finite). This discrepancy leads to problem known as <a href=https://www.azul.com/files/HowNotToMeasureLatency_LLSummit_NYC_12Nov2013.pdf>coordinated omission</a> and results in significantly skewed latency results and pathological conditions (queues overflow&mldr;) not being triggered.</p><p>Hyperfoil embraces Open System Model by default - virtual users are completely independent until it runs out of resources, recording that situation in consequence. Hyperfoil runs a state-machine for each VU and all requests are executed asynchronously.</p><h2 id=versatility>Versatility<a class=td-heading-self-link href=#versatility aria-label="Heading self-link"></a></h2><p>While you can design your benchmark to just hit single endpoint (URL) with desired rate this is likely not what the users would be doing. Randomizing some parts of the query or looping through a list of endpoint might be better but the resulting scenario might be still too simplified.</p><p>Hyperfoil introduces a DSL expressed in YAML with which you can sketch the scenario in a fine detail, including timing, concurrent requests, processing responses and so forth. We&rsquo;re not trying to invent a new programming language, though, so if the DSL gets too complex you can <a href=/docs/getting-started/quickstart8>write the logic</a> in Java or any other JVM language.</p><hr><p>If you&rsquo;re eager to try out Hyperfoil go to the <a href=/docs/getting-started/quickstart1>first quickstart</a>. Otherwise let&rsquo;s have a deeper look into the <a href=/docs/overview/concepts>terms and concepts</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-8eeb8711c9212b6d71c2599b66bb4de8>1.1 - Concepts</h1><div class=lead>Hyperfoil key terms and concepts</div><p>This document explains some core terms used throughout the documentation.</p><h2 id=controller-and-agents>Controller and agents<a class=td-heading-self-link href=#controller-and-agents aria-label="Heading self-link"></a></h2><p>While it is possible to run benchmarks directly from CLI, in its nature Hyperfoil is a distributed tool with leader-follower architecture. <strong>Controller</strong> has the leader role; this is a <a href=https://vertx.io>Vert.x</a>-based server with REST API. When a benchmark is started controller deploys agents (according to the benchmark definition), pushes the benchmark definition to these agents and orchestrates benchmark phases. <strong>Agents</strong> execute the benchmark, periodically sending statistics to the controller. This way the controller can combine and evaluate statistics from all agents on the fly. When the benchmark is completed all agents terminate.</p><p>All communication between the controller and agents happens over Vert.x eventbus - therefore it is independent on the deployment type.</p><h2 id=phases>Phases<a class=td-heading-self-link href=#phases aria-label="Heading self-link"></a></h2><p>Conceptually the benchmark consists of several phases. Phases can run independently of each other;
these simulate certain load executed by a group of users (e.g. visitors vs. admins). Within one phase all users execute the same scenario (e.g. logging into the system, selling all their stock and then logging off).</p><p>Phases are also using for scaling the load during the benchmark; when looking for maximum throughput you schedule several iterations of given phase, gradually increasing the number of users that run the scenario.</p><p>A phase can be in one of these states:</p><ul><li>not running (scheduled)</li><li>running</li><li>finished: users won&rsquo;t start new scenarios but we&rsquo;ll let already-started users complete the scenario</li><li>terminated: all users are done, all stats are collected and no further requests will be made</li></ul><p>The state of phase on every agent is managed by Controller; this is also the finest grained unit of work it understands (controller has no information about state of each user).</p><h2 id=sessions>Sessions<a class=td-heading-self-link href=#sessions aria-label="Heading self-link"></a></h2><p>The state of each user&rsquo;s scenario is saved in the session; sometimes we speak about (re)starting sessions instead of starting new users. Hyperfoil tries to keep allocations during benchmark as low as possible and therefore it pre-allocates all memory for the scenario execution ahead. This is why all resources the benchmark uses are capped - it needs to know the sizes of pools.</p><p>It is also necessary to know how many sessions we should preallocate - maximum concurrency of the system. If this threshold is exceeded Hyperfoil allocates further session as needed, but this is not the optimal mode of operation. It means that either you&rsquo;ve underestimated the resources need or you&rsquo;ve put a load on the system that it can&rsquo;t handle anymore, requests are not being completed and scenarios are not finished - which means that session objects cannot be recycled for reuse by next user.</p><h2 id=scenario>Scenario<a class=td-heading-self-link href=#scenario aria-label="Heading self-link"></a></h2><p>Scenario consists of one or more <strong>sequences</strong> that are composed of <strong>steps</strong>. Steps are similar to statements in programming language and sequences are an equivalent of blocks of code.</p><p>While most of the time the scenario will consist of sequential operations as the user is not multi-tasking, the browser (or other system you&rsquo;re simulating) actually executes some operations in parallel - e.g. during page load it loads images concurrently. Therefore at any time the session contains one or more active <strong>sequence instances</strong>; when all sequence instances are done, the session has finished and can be recycled for a new user. Most of the time the scenario will start with only one active instance and as it progresses, it might create instances of other sequences (e.g after evaluating a condition it creates a sequence instance according to the branching logic).</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b0f8e4ee3509d229b406a0b0bb933ca4>1.2 - FAQ</h1><div class=lead>Frequently Asked Questions</div><h2 id=why-is-hyperfoil-written-in-java>Why is Hyperfoil written in Java?<a class=td-heading-self-link href=#why-is-hyperfoil-written-in-java aria-label="Heading self-link"></a></h2><p>People are often concerned about JVM performance or predictability. While nowadays JVM is very good in the sense of throughput, dealing with jitter can be challenging. We are Java engineers, though, and we believe that these issues can be mitigated with a right design. That&rsquo;s why we try to be very careful on the execution hot-path.</p><p>We could achieve even better properties with C/C++, but the development effectivity would suffer. We could be succesful in Go, but we&rsquo;re not as intimate with its internals. Other languages and frameworks would pose its own challenges. So far, the choice of Java was not found to be a limiting factor.</p><h2 id=why-are-you-inventing-your-own-yaml-based-dsl-instead-of-using-javasciptlua>Why are you inventing your own YAML-based DSL instead of using Javascipt/Lua/&mldr;?<a class=td-heading-self-link href=#why-are-you-inventing-your-own-yaml-based-dsl-instead-of-using-javasciptlua aria-label="Heading self-link"></a></h2><p>While some people might be more comfortable with describing their complex scenarios in a familiar language, running a script execution engine would have impact on performance and could put us out of control. We are not trying to invent a new language, written in YAML structure. Instead we propose a set of components common to many scenarios that could be recombined as it suits you. If you ever feel that the YAML is becoming cumbersome, try to move your complex benchmark logic to Java code and use it that way, instead.</p><h2 id=i-just-want-to-know-what-is-the-maximum-throughput>I just want to know what is the maximum throughput!<a class=td-heading-self-link href=#i-just-want-to-know-what-is-the-maximum-throughput aria-label="Heading self-link"></a></h2><p>Maximum throughput is a single number which makes comparison very easy. Was my code change for better or worse? However finding the sweet spot is not as simple as throwing in few hundred concurrent threads running one request after another and taking the readings. With too high concurrency you can get worse results due to contention and longer queues, so you need to try different concurrency levels anyway.</p><p>There&rsquo;s nothing wrong with this type of test as long as you know what you&rsquo;re doing, and that the <a href=https://www.slideshare.net/slideshow/how-not-to-measure-latency-60111840/60111840>response latencies might be far off reality</a>. It&rsquo;s actually very good test when you look only for regressions - and Hyperfoil supports that, too.</p><h2 id=hyperfoil-is-so-hard-to-set-up-ill-just-use->Hyperfoil is so hard to set up, I&rsquo;ll just use &mldr;<a class=td-heading-self-link href=#hyperfoil-is-so-hard-to-set-up-ill-just-use- aria-label="Heading self-link"></a></h2><p>Some tools can be run from the shell, with everything set just through options and arguments. That is quite handy for a quick test - and if the tool is sufficient for the job, use it. Or you can try runnning the same through Hyperfoil - e.g. for <code>wrk</code>/<code>wrk2</code> we offer a facade (CLI command <code>wrk</code> or <code>bin/wrk.sh</code>) that creates a benchmark with the same behaviour but you also get all the detailed results as from any other run - see <a href=/docs/migration/wrk/>the migration guide</a>. Once that your requirements outgrow what&rsquo;s possible in these simple tools, you can embrace the full power of benchmark composition.</p><h2 id=what-does-that-exceeded-session-limit-error-mean>What does that &lsquo;Exceeded session limit&rsquo; error mean?<a class=td-heading-self-link href=#what-does-that-exceeded-session-limit-error-mean aria-label="Heading self-link"></a></h2><p>With <a href=/docs/user-guide/benchmark/phase/>open-model phase types</a> (constantRate, increasingRate, decreasingRate) the concurrency should not be limited. However as Hyperfoil tries not to allocate any memory during the benchmark we need to reserve space ahead for all sessions that could run concurrently - we call this the session limit. By default this limit is equal to number of users per second (assuming that the scenario won&rsquo;t take more than 1 second).</p><p>When you get the &lsquo;Exceeded session limit&rsquo; error this means that some of the requests took a long time (or you have delays as part of the scenario) and Hyperfoil ran out of session pool. In that case you can change the limit using <code>maxSessions</code> property on the phase to the expected maximum concurrency. E.g. if you expect that the scenario will take 3 seconds and you&rsquo;re running at <code>usersPerSec: 100</code> you should set <code>maxSessions: 300</code> (or rather more to give it a buffer for unexpected jitter).</p><p>If increasing the limit doesn&rsquo;t help it usually means that the load at the tested system is too high and the responses are not arriving as fast as you fire the requests. In that case you should lower the load.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-17b09a9dc5200475d8a306f18e63a0f9>2 - Getting Started</h1><div class=lead>Collection of quickstarts aiming to make the Hyperfoil adoption a lot easier.</div><p>Embark on this journey with our collection of 8 quickstarts, guiding you through a wide range of potential use cases that you might encounter in daily operations.</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>Info</h4>Do not hesitate to suggest additional use cases that you believe would be valuable for this section.</div></div><div class=td-content><h1 id=pg-e57001aa0aa090aa0a2953bad119d8fe>2.1 - First benchmark</h1><div class=lead>Download, set up, and run your first Hyperfoil benchmark</div><h4 id=1-download-latest-releasehttpsgithubcomhyperfoilhyperfoilreleaseslatest-and-unpack-it>1. Download <a href=https://github.com/Hyperfoil/Hyperfoil/releases/latest>latest release</a> and unpack it<a class=td-heading-self-link href=#1-download-latest-releasehttpsgithubcomhyperfoilhyperfoilreleaseslatest-and-unpack-it aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wget <span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.url <span style=color:#ce5c00;font-weight:700>}}</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> unzip <span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.zip <span style=color:#ce5c00;font-weight:700>}}</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> <span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.dir <span style=color:#ce5c00;font-weight:700>}}</span>
</span></span></code></pre></div><h4 id=2-start-hyperfoil-in-interactive-mode-cli>2. Start Hyperfoil in interactive mode (CLI)<a class=td-heading-self-link href=#2-start-hyperfoil-in-interactive-mode-cli aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><p>For our first benchmark we&rsquo;ll start an embedded server (controller) within the CLI:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>Starting controller in default directory <span style=color:#ce5c00;font-weight:700>(</span>/tmp/hyperfoil<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>Controller started, listening on 127.0.0.1:41621
</span></span><span style=display:flex><span>Connecting to the controller...
</span></span><span style=display:flex><span>Connected!
</span></span></code></pre></div><h4 id=3-upload-the-minimalistic-benchmark-and-run-it>3. Upload the minimalistic benchmark and run it<a class=td-heading-self-link href=#3-upload-the-minimalistic-benchmark-and-run-it aria-label="Heading self-link"></a></h4><p>As you can see below, the benchmark is really minimalistic as it is doing only single request to <code>http://hyperfoil.io</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This is the name of the benchmark. It&#39;s recommended to keep this in sync with</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># name of this file, adding extension `.hf.yaml`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>single-request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We must define at least one HTTP target, in this case it becomes a default</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># for all HTTP requests.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Simulation consists of phases - potentially independent workloads.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We&#39;ll discuss phases more in detail in next quickstarts.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># `example` is the name of the single phase in this benchmark.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>example</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># `atOnce` with `users: 1` results in running the scenario below just once</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The only sequence in this scenario is called `test`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># In the only step in this sequence we&#39;ll do a HTTP GET request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># to `http://hyperfoil.io/`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># Inject helpers to make this request synchronous, i.e. keep</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># the sequence blocked until Hyperfoil processes the response.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Create the same benchmark in your local environment or <a href=/benchmarks/single-request.hf.yaml>download it</a>.
After that, upload it using the <code>upload</code> command as follow:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../single-request.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark single-request, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run single-request
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0001</span>
</span></span><span style=display:flex><span>Run 0001, benchmark single-request
</span></span><span style=display:flex><span>Agents: in-vm<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/11/15 16:11:43.725    Terminated: 2019/11/15 16:11:43.899
</span></span><span style=display:flex><span>&lt;span <span style=color:#000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;hfcaption&#34;</span>&gt;NAME     STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION               DESCRIPTION
</span></span><span style=display:flex><span>example  TERMINATED  16:11:43.725             16:11:43.899  <span style=color:#0000cf;font-weight:700>174</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>174</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  <span style=color:#0000cf;font-weight:700>1</span> users at once
</span></span></code></pre></div><h4 id=4-check-out-performance-results>4. Check out performance results:<a class=td-heading-self-link href=#4-check-out-performance-results aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run 000A
</span></span><span style=display:flex><span>&lt;span <span style=color:#000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;hfcaption&#34;</span>&gt;PHASE    METRIC  REQUESTS  MEAN       p50        p90        p99        p99.9      p99.99     2xx  3xx  4xx  5xx  CACHE  TIMEOUTS  ERRORS  BLOCKED
</span></span><span style=display:flex><span>example  <span style=color:#204a87>test</span>           <span style=color:#0000cf;font-weight:700>1</span>  172.49 ms  173.02 ms  173.02 ms  173.02 ms  173.02 ms  173.02 ms    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span> ns
</span></span></code></pre></div><p>Doing one request is not much of a benchmark and the statistics above are moot, but hey, this is a quickstart.</p><p>In the future you might find <a href=/docs/editor>editing with schema</a> useful but at this point any editor with YAML syntax highlighting will do the job.</p><p>Ready? Let&rsquo;s continue with <a href=/docs/getting-started/quickstart2>something a bit more realistic&mldr;</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-0e79996c908953912aca18973baf2b9a>2.2 - Steps and statistics</h1><div class=lead>Learn how to create more steps and how to gather run statistics</div><p>In <a href=/docs/getting-started/quickstart2>previous quickstart</a> you created a benchmark
that fires only one HTTP request. Our next example is going to hit random URLs at this server with 10 requests per second. We&rsquo;ll see how to generate random data and collect statistics for different URLs.</p><p>Let&rsquo;s start a container that will serve the requests:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>If you prefer running this in Docker just replace <code>podman</code> with <code>docker</code>. You can explore the handling of requests from this example on <a href=https://github.com/Hyperfoil/hyperfoil-examples/tree/main/quickstarts/random-urls>GitHub</a>.</p><p>Here is the benchmark we&rsquo;re going to run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>random-urls</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># 10 users will be starting the scenario every second</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Step `randomItem` randomly picks one item from the list below...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>index.html</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>foo.png</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>bar.png</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>this-returns-404.png</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># ... and stores it in users&#39;s session under key `my-random-path`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>my-random-path</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># HTTP request will read the variable from the session and format</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># the path for the GET request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/random-urls/${my-random-path}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># We&#39;ll use different statistics metric for webpages and images</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>.*\.html -&gt; pages</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>.*\.png -&gt; images</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- -<span style=color:#000>&gt; other</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Handler processes the response</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># We&#39;ll check that the response was successful (status 200-299)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>status</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>range</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2xx</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># When the response is fully processed we&#39;ll set variable `completed`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># in the session.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>onCompletion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>completed &lt;- yes</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># For demonstration purposes we will set `sync: false`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Next step is executed immediately after we fire the request, not</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># waiting for the response.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># We&#39;ll wait for the `completed` var to be set in this step, though.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>awaitVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>completed</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>So let&rsquo;s run this through CLI:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../random-urls.hf.yaml
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>Run 0002, benchmark random-urls
</span></span><span style=display:flex><span>Agents: in-vm<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/11/15 17:49:45.859    Terminated: 2019/11/15 17:49:50.904
</span></span><span style=display:flex><span>NAME  STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION               DESCRIPTION
</span></span><span style=display:flex><span>main  TERMINATED  17:49:45.859             17:49:50.903  <span style=color:#0000cf;font-weight:700>5044</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>44</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  10.00 users per second
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>PHASE  METRIC  REQUESTS  MEAN       p50        p90        p99        p99.9      p99.99     2xx  3xx  4xx  5xx  CACHE  TIMEOUTS  ERRORS  BLOCKED
</span></span><span style=display:flex><span>main   images        <span style=color:#0000cf;font-weight:700>34</span>    3.25 ms    3.39 ms    4.39 ms   12.58 ms   12.58 ms   12.58 ms   <span style=color:#0000cf;font-weight:700>12</span>   <span style=color:#0000cf;font-weight:700>13</span>   <span style=color:#0000cf;font-weight:700>12</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>    1.11 ms
</span></span><span style=display:flex><span>main   pages         <span style=color:#0000cf;font-weight:700>13</span>    2.89 ms    3.19 ms    4.15 ms    4.33 ms    4.33 ms    4.33 ms   <span style=color:#0000cf;font-weight:700>13</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span> ns
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main/images: Progress was blocked waiting <span style=color:#204a87;font-weight:700>for</span> a free connection. Hint: increase http.sharedConnections.
</span></span></code></pre></div><p>There are several things worth mentioning in this example:</p><ul><li><p>The command <code>run</code> does not have any argument. In this case, the benchmark name <code>random-urls</code> is optional as you&rsquo;ve just uploaded it and CLI knows that you are going to work with it. The same holds for <code>stats</code> - you don&rsquo;t have to write down run ID <code>0002</code> when displaying statistics as the implicit run ID is set automatically in the <code>run</code>/<code>status</code> command.</p></li><li><p>The test did only 47 requests in 5 seconds, instead of 50. It does not execute one request every 100 ms sharp, it randomizes the times of requests as well; this simulates the <a href=https://en.wikipedia.org/wiki/Poisson_point_process>Poisson point process</a>. Longer runs would have lower variance in the total numbers.</p></li><li><p>In metric <code>images</code> the test reports 1.11 ms being blocked and there&rsquo;s SLA failure below the stats. This is happening because in the default configuration Hyperfoil opens only one connection to the target server. All (possibly concurrent) requests have to share the common pool of 1 connection and if some request cannot be executed immediatelly we report this as blocked time. All practical benchmarks should increase the pool size to a value that reflects simulated load and prevent this situation.</p></li><li><p>The test took 44 ms longer than the configured 5 seconds. We terminate the test only after all responses for sent requests arrive (or time out).</p></li></ul><p>In the next quickstart you&rsquo;ll see a <a href=/docs/getting-started/quickstart3>more complex scenario</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2e63ba5f86108de3864126ec7bd66ad1>2.3 - Complex workflow</h1><div class=lead>Start creating a more complex workflow</div><p>The <a href=/docs/getting-started/quickstart>previous example</a> was the first &lsquo;real&rsquo; benchmark, but it didn&rsquo;t do anything different from what you could run through <code>wrk</code>, <code>ab</code>, <code>siege</code> or similar tools.</p><p>Of course, the results were not suffering from the <em>coordinated omission problem</em>, but Hyperfoil can do more. Let&rsquo;s try a more complex scenario:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>choose-movie</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Use 80 concurrent HTTP connections to the server. Default is 1,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># therefore we couldn&#39;t issue two concurrent requests (as HTTP pipelining</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># is disabled by default and we use HTTP 1.1 connections).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Each session will take at least 3 seconds (see the sleep time below),</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># and we&#39;ll be running ~10 per second. That makes 30, let&#39;s give it</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># some margin and set this to 40.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>maxSessions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>40</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># In previous scenarios we have used only single sequence and we could</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># define the list of sequences right away. In this scenario, we&#39;re going</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># to be using 3 different sequences.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Initial sequences are scheduled at session start and are not linked</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># to the other sessions.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>initialSequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>home</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Pick a random username from a file</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usernames.txt</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># The page would load a profile, e.g. to display full name.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/profile?user=${username}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>profile</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Fetch movies user could watch</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># Parse the returned JSON that is an array and for each</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># element fire the processor.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>processor</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#8f5902;font-style:italic># Store each element in a collection `movies`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>array</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># Store as byte[] to avoid encoding UTF-8 into String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>format</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BYTES</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># Every data structure in session has maximum size.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># This space is pre-allocated.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>maxSize</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This step waits until responses for all sent requests are received and processed.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#000>awaitAllResponses</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Wait 3 seconds to simulate user-interaction</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>3s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Set variable `quality` and `movieNames` to an uninitialized array</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># of 10 elements. We will use them later on.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>var</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>quality</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>objectArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>var</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movieNames</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>objectArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># For each element in variable `movies` schedule one (new) instance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># of sequence `movies`, defined below. These instances differ in</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># one intrinsic &#34;variable&#34; - their index.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>foreach</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sequence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>addComment</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Schedule one more sequence</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>newSequence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>watchMovie</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># These sequences are defined but don&#39;t get scheduled at session start. We activate</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># them explicitly (and multiple times in parallel) in foreach step above.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Sequences that can run multiple instances concurrently must declare the maximum</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># concurrency level explicitly using the brackets.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>addComment[10]</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Variables `movies` hosts an array, and in the foreach step</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># we&#39;ve created one sequence for each element. We&#39;ll access</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the element through the &#39;[.]&#39; notation below.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.quality</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># We&#39;ll extract quality to another collection under</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># this sequence&#39;s index. We shouldn&#39;t use global variable</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># as the execution of sequences may interleave.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>quality[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># For high-quality movies we won&#39;t post insults (we haven&#39;t seen</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the movie yet anyway). Therefore, we&#39;ll stop executing</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the sequence prematurely.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>breakSequence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>intCondition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>quality[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># Note: ideally we could filter the JSON directly using query</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic>#     .[] | select(.quality &gt;= 80)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># but this feature is not implemented yet.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>greaterOrEqualTo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movies[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.name</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movieNames[.]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># URLs with spaces and other characters don&#39;t work well;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># let&#39;s encode it (e.g. space -&gt; %20)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/movie/${urlencode:movieNames[.]}/comments</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>text</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>This movie sucks.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># The sync shortcut actually sets up a bit in the session state</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># cleared before the request and set when the request is complete,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># automatically waiting it after this step.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># You can write your own handlers (using sequence-scoped vars)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># to change this behaviour.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Set value to variable `commented`. The actual value does not matter.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>commented &lt;- true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>watchMovie</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This sequence is blocked in its first step until the variable gets</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># set. Therefore we could define it in `initialSequences` and omit</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the `newSequence` step at the end of `home` sequence.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>awaitVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>commented</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Choose one of the movies (including the bad ones, for simplicity)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>selectedMovie &lt;- movies</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>selectedMovie</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.name</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># This sequence is executed only once so we can use global var.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>movieName</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Finally, go watch the movie!</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/choose-movie/movie/${urlencode:movieName}/watch</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Start the server and fire the scenario the usual way:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># start the server to interact with</span>
</span></span><span style=display:flex><span>podman run --rm -d -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># start Hyperfoil CLI</span>
</span></span><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../choose-movie.hf.yaml
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Is this scenario too simplistic? Let&rsquo;s <a href=/docs/getting-started/quickstart4>define phases</a>&mldr;</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d3f9faf527c78ebba67129eb638ec9cc>2.4 - Phases - basics</h1><div class=lead>Deep dive into the basics of phases</div><p><a href=/docs/getting-started/quickstart3>So far</a> the benchmark contained only one type of load; certain number of users hitting the system, doing always the same (though data could be randomized). In practice you might want to simulate several types of workloads at once: in an eshop users would come browsing or buying products, and operators would restock the virtual warehouse.</p><p>Also, driving constant load may not be the best way to run the benchmark: often you want to slowly ramp the load up to let the system adjust (scale up, perform JIT, fill pools) and push the full load only after that. When trying to find system limits, you do the same repetitevely - ramp up the load, measure latencies and if the system meets SLAs (latencies below limits) continue ramping up the load until it breaks.</p><p>In Hyperfoil, this all is expressed through <em>phases</em>. We&rsquo;ve already seen phases in the <a href=/docs/getting-started/quickstart1>first quickstart</a> as we wanted to execute a non-default type of load - running the workload only once. Let&rsquo;s take a look on the &ldquo;eshop&rdquo; case first:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This benchmark simulates operations in an eshop, with browsing/shopping users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># and operators restocking the warehouse.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>eshop</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># This defines a workload where users just look through the pages.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>browsingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This is the default type of workload, starting constant number of users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># each second. Note that we don&#39;t speak about &#39;requests per second&#39; as</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># the scenario may issue any number of requests.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Browse is the name of our only sequence. We will avoid steps generating</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># random data for browsing for the sake of brevity.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Workload simulating users that are going to buy something</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>buyingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The length of this phase is not synchronized with other phases.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># You might think that this is too flexible at first.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[].id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># This is a shortcut to store in array-typed variable</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#8f5902;font-style:italic># `itemIds` holding at most 10 elements.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>toArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemIds[10]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Pick id for a random item</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- itemIds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This is a different type of phase, running fixed number of users.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># It is what most benchmarks do when you set number of threads; here we use</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># that as we know that we have fixed number of employees (operators) who</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># are restocking the warehouse.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>always</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>restock</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Select an id for random item to restock</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Variables in different scenarios are completely unrelated.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomInt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- 1 .. 999</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomInt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>units &lt;- 1 .. 10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/restock</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#8f5902;font-style:italic># We are using url-encoded form data</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>addUnits</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>units</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Operators need some pauses - otherwise we would start another</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># scenario execution (and fire another request) right away.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Start the same server as you did in the previous quickstarts:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>In <a href=/docs/getting-started/quickstart5>next quickstart</a> you&rsquo;ll learn how to repeat and link the phases.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-452f5d903d7a60e877cf1604c07f7ef7>2.5 - Phases - advanced</h1><div class=lead>Delve into more advanced phase configuration</div><p><a href=/docs/getting-started/quickstart4>Previous quickstart</a> presented a benchmark with three phases that all started at the same moment (when the benchmark was started) and had the same duration - different phases represented different workflows (types of user). In this example we will adjust the benchmark to scale the load gradually up.</p><p>At this point it would be useful to mention the lifecycle of phases; phase is in one of these states:</p><ul><li><strong>not started</strong>: As the name clearly says, the phase is not yet started.</li><li><strong>running</strong>: The agent started running the phase, i.e., performing the configured load.</li><li><strong>finished</strong>: When the <code>duration</code> elapses, no more new users are started. However, some might be still executing their scenarios.</li><li><strong>terminated</strong>: When all users complete their scenarios the phase becomes <em>terminated</em>. Users may be forcibly interrupted by setting <code>maxDuration</code> on the phase.</li><li><strong>cancelled</strong> If the benchmark cannot continue further, all remaining stages are cancelled.</li></ul><p>Let&rsquo;s take a look into the example, where we&rsquo;ll slowly (over 5 seconds) increase load to 10+5 users/sec, run with this load for 10 seconds, again increase it by another 10+5 users/sec and so forth until we reach 100+50 users per second. As we define <code>maxIterations</code> for these phases the benchmark will actually contain phases <code>browsingUserRampUp/0</code>, <code>browsingUserRampUp/1</code>, <code>browsingUserRampUp/2</code> and so forth.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>eshop-scale</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>browsingUserRampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># This type of phase is similar to constantRate in the way how new users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># are started but gradually increases the rate from `initialUsersPerSec`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># to `targetUsersPerSec`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># In Hyperfoil, everything is pre-allocated = limited in size. Here we&#39;ll</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># set that we won&#39;t run more than 10 iterations of this phase.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Number of started users per sec increases with the iteration; in first</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># iteration we&#39;ll go from 0 to 10 users/second, in second from 10 to 20</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># and in last (10th) we&#39;ll reach 100 users/second.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Nth iteration of this phase will start when (N-1)th iteration of other</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># steady-state phases are finished. First iteration can start</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># immediatelly, of course.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The &amp;browsingUser syntax below creates YAML alias: we can later</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># reference this scenario and it will be used verbatim in another phase.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># It is possible to use aliases for both scenarios and sequences.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># We&#39;ll use the same scenario as in eshop.hf.yaml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>browsingUserSteady</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Nth iteration of this phase will start when Nth iteration of ramp-up</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># phases is finished.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Note that there&#39;s implicit rule that Nth iteration of given phase will</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># start only after (N-1)th iteration terminates.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># This refers to the alias created above; in steady state we&#39;ll use the</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># same scenario.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># These two phases will be very similar to browsingUserSteady and RampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>buyingUserRampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserSteady</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Again we&#39;ll use the same scenario as in eshop.hf.yaml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[].id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>toArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemIds[10]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- itemIds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>buyingUserSteady</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>browsingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buyingUserRampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Operator phase is omitted for brevity as we wouldn&#39;t scale that up</span></span></span></code></pre></div><p>Don&rsquo;t forget to start the mock server as we&rsquo;ve used in the previous quickstart.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>Synchronizing multiple workloads across iteration can become a bit cumbersome. That&rsquo;s why we can keep similar types of workflow together, and split the phase into <em>forks</em>. In fact forks will become different phases, but these will be linked together so that you can refer to all of them as to a single phase. Take a look at the benchmark rewritten to use forks:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>eshop-forks</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>rampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Note that we have increased both the base and increment from 10 and 5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># to 15. This value is split between the forks based on their weight.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>steadyState</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>forks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>browsingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>buyingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>browse</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                      </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>.[].id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                      </span><span style=color:#204a87;font-weight:700>toArray</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemIds[10]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>itemId &lt;- itemIds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/quickstarts/eshop/items/${itemId}/buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>steadyState</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>forks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>browsingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*browsingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>buyingUser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*buyingUser</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Operator phase is omitted for brevity as we wouldn&#39;t scale that up</span></span></span></code></pre></div><p>This definition will create phases <code>rampUp/0/browsingUser</code>, <code>rampUp/0/buyingUser</code>, <code>rampUp/1/browsingUser</code> etc. - you&rsquo;ll see them in statistics.</p><p>You could orchestrate the phases as it suits you, using <code>startAfter</code>, <code>startAfterStrict</code> (this requires the referenced phase to me <em>terminated</em> instead of <em>finished</em> as with <code>startAfter</code>) or <code>startTime</code> with relative time since benchmark start.</p><p>This sums up basic principles, in <a href=/docs/getting-started/quickstart6>next quickstart</a> you&rsquo;ll see how to start and use Hyperfoil in distributed mode.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4d6c46612ea0f72719fcf8220b1f157c>2.6 - Running the server</h1><div class=lead>Learn how to start the Hyperfoil server in standalone mode</div><p>Until now we have always started our benchmarks using an embedded <em>controller</em> in the CLI, using the <code>start-local</code> command. This spawns a server in the CLI JVM. CLI communicates with it using standard REST API, though the server port is randomized and listens on localhost only. All the benchmarks and run results are also stored in <code>/tmp/hyperfoil/</code> - you can change the directory as an argument to the <code>start-local</code> command.
While the embedded controller might be convenient for a quick test or when developing the scenario it&rsquo;s not something that you&rsquo;d use for a full-fledged benchmark.</p><p>When testing a reasonably performing system you need multiple nodes driving the load - we call them <em>agents</em>. These agents sync up, receive commands and report statistics to a master node, the <em>controller</em>. This node exposes a RESTful API to upload & start the benchmark, watch its progress and download results.</p><p>There are two other scripts in the <code>bin/</code> directory:</p><ul><li><code>standalone.sh</code> starts both the controller and (one) agent in a single JVM. This is not too different from the controller embedded in CLI.</li><li><code>controller.sh</code> starts clustered <a href=https://vertx.io/>Vert.x</a> and deploys the controller. Agents are started as needed in different nodes. You&rsquo;ll see this in the <a href=/docs/getting-started/quickstart7>next quickstart</a>.</li></ul><p>Also note that it is possible to <a href=/docs/user-guide/installation/k8s/>run Hyperfoil in Openshift</a>.</p><p>Open two terminals; in one terminal start the standalone server and in second terminal start the CLI.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/standalone.sh
</span></span></code></pre></div><p>and</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><p>Then, let&rsquo;s try to connect to the server (by default running on <code>http://localhost:8090</code>) and upload the <code>single-request</code> benchmark:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This is the name of the benchmark. It&#39;s recommended to keep this in sync with</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># name of this file, adding extension `.hf.yaml`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>single-request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We must define at least one HTTP target, in this case it becomes a default</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># for all HTTP requests.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Simulation consists of phases - potentially independent workloads.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># We&#39;ll discuss phases more in detail in next quickstarts.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># `example` is the name of the single phase in this benchmark.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>example</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># `atOnce` with `users: 1` results in running the scenario below just once</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The only sequence in this scenario is called `test`.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># In the only step in this sequence we&#39;ll do a HTTP GET request</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># to `http://hyperfoil.io/`</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># Inject helpers to make this request synchronous, i.e. keep</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># the sequence blocked until Hyperfoil processes the response.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>sync</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>From the second terminal, the one running the Hyperfoil CLI, issue the following commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ connect
</span></span><span style=display:flex><span>Connected! Server has these agents connected:
</span></span><span style=display:flex><span>* localhost<span style=color:#ce5c00;font-weight:700>[</span>REGISTERED<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../single-request.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark single-request, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ run single-request
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0001</span>
</span></span></code></pre></div><p>When you switch to the first terminal (the one running the controller), you can see in the logs that the benchmark definition was stored on the server, the benchmark has been executed and its results have been stored to disk. Hyperfoil by default stores benchmarks in directory <code>/tmp/hyperfoil/benchmark</code> and data about runs in <code>/tmp/hyperfoil/run</code>; check it out:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>column -t -s , /tmp/hyperfoil/run/0001/stats/total.csv
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>Phase    Name  Requests  Responses  Mean       Min        p50.0      p90.0      p99.0      p99.9      p99.99     Max        MeanSendTime  ConnFailure  Reset  Timeouts  2xx  3xx  4xx  5xx  Other  Invalid  BlockedCount  BlockedTime  MinSessions  MaxSessions
</span></span><span style=display:flex><span>example  <span style=color:#204a87>test</span>  <span style=color:#0000cf;font-weight:700>1</span>         <span style=color:#0000cf;font-weight:700>1</span>          <span style=color:#0000cf;font-weight:700>267911168</span>  <span style=color:#0000cf;font-weight:700>267386880</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>268435455</span>  <span style=color:#0000cf;font-weight:700>2655879</span>       <span style=color:#0000cf;font-weight:700>0</span>            <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>         <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>             <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>Reading CSV/JSON files directly is not too comfortable; you can check the details through CLI as well:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run 002D
</span></span><span style=display:flex><span>Phase   Sequence  Requests      Mean       p50       p90       p99     p99.9    p99.99    2xx    3xx    4xx    5xx Timeouts Errors
</span></span><span style=display:flex><span>example:
</span></span><span style=display:flex><span>	test:            <span style=color:#0000cf;font-weight:700>1</span> 267.91 ms 268.44 ms 268.44 ms 268.44 ms 268.44 ms 268.44 ms      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>1</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>By the time you type the <code>stats</code> command into CLI the benchmark is already completed and the CLI shows stats for the whole run. Let&rsquo;s try running the {% include example_link.md src=&lsquo;eshop-scale.hf.yaml&rsquo; %} we&rsquo;ve seen in previous quickstart; this will give us some time to observe on-line statistics as the benchmark is progressing:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../eshop-scale.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark eshop-scale, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ run eshop-scale
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>Run 0002, benchmark eshop-scale
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Here the console would automatically jump into the <code>status</code> command, displaying the progress of the benchmark online. Press Ctrl+C to cancel that (it won&rsquo;t stop the benchmark run) and run the <code>stats</code> command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Recent stats from run <span style=color:#0000cf;font-weight:700>0002</span>
</span></span><span style=display:flex><span>Phase   Sequence  Requests      Mean       p50       p90       p99     p99.9    p99.99    2xx    3xx    4xx    5xx Timeouts Errors
</span></span><span style=display:flex><span>buyingUserSteady/000:
</span></span><span style=display:flex><span>        buy:             <span style=color:#0000cf;font-weight:700>8</span>   1.64 ms   1.91 ms   3.05 ms   3.05 ms   3.05 ms   3.05 ms      <span style=color:#0000cf;font-weight:700>8</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>        browse:          <span style=color:#0000cf;font-weight:700>8</span>   2.13 ms   2.65 ms   3.00 ms   3.00 ms   3.00 ms   3.00 ms      <span style=color:#0000cf;font-weight:700>8</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>browsingUserSteady/000:
</span></span><span style=display:flex><span>        browse:          <span style=color:#0000cf;font-weight:700>8</span>   2.74 ms   2.69 ms   2.97 ms   2.97 ms   2.97 ms   2.97 ms      <span style=color:#0000cf;font-weight:700>8</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>Press Ctr+C to stop watching...
</span></span></code></pre></div><p>You can go back to the run progress using the <code>status</code> command (hint: use <code>status --all</code> to display all phases, including those not started or already terminated):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ status
</span></span><span style=display:flex><span>Run 0002, benchmark eshop-scale
</span></span><span style=display:flex><span>Agents: localhost<span style=color:#ce5c00;font-weight:700>[</span>INITIALIZED<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/04/15 16:27:24.526
</span></span><span style=display:flex><span>NAME                    STATUS   STARTED       REMAINING  FINISHED  TOTAL DURATION
</span></span><span style=display:flex><span>browsingUserRampUp/006  RUNNING  16:28:54.565  <span style=color:#0000cf;font-weight:700>2477</span> ms
</span></span><span style=display:flex><span>buyingUserRampUp/006    RUNNING  16:28:54.565  <span style=color:#0000cf;font-weight:700>2477</span> ms
</span></span><span style=display:flex><span>Press Ctrl+C to stop watching...
</span></span></code></pre></div><p>Since we are showing this quickstart running the controller and CLI on the same machine it&rsquo;s easy to fetch results locally from <code>/tmp/hyperfoil/run/XXXX/...</code>. To save you SSHing into the controller host and finding the directories in a &rsquo;true remote&rsquo; case there&rsquo;s the <code>export</code> command; This fetches statistics to your computer where you&rsquo;re running CLI. You can chose between default JSON format (e.g. <code>export 0002 -f json -d /path/to/dir</code>) and CSV format (<code>export 0002 -f csv -d /path/to/dir</code>) - the latter packs all CSV files into single ZIP file for your convenience.</p><p>When you find out that the benchmark is not going well, you can terminate it prematurely:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ <span style=color:#204a87>kill</span>
</span></span><span style=display:flex><span>Kill run 0002, benchmark eshop-scale<span style=color:#ce5c00;font-weight:700>(</span>phases: <span style=color:#0000cf;font-weight:700>2</span> running, <span style=color:#0000cf;font-weight:700>0</span> finished, <span style=color:#0000cf;font-weight:700>40</span> terminated<span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>[</span>y/N<span style=color:#ce5c00;font-weight:700>]</span>: y
</span></span><span style=display:flex><span>Killed.
</span></span></code></pre></div><p>In the <a href=/docs/getting-started/quickstart7>next quickstart</a> we will deal with starting clustered Hyperfoil.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c81b8e39dec1574d4befeef36e537978>2.7 - Clustered mode</h1><div class=lead>Learn how to start the Hyperfoil server in clustered mode</div><p><a href=/docs/getting-started/quickstart6>Previously</a> we&rsquo;ve learned to start Hyperfoil in standalone server mode, and to do some runs through CLI. In this quickstart we&rsquo;ll see how to run your benchmark distributed to several agent nodes.</p><p>Hyperfoil operates as a cluster of <a href=https://vertx.io/>Vert.x</a>. When the benchmark is started, it deploys agents on other nodes according to the benchmark configuration - these are Vert.x nodes, too. Together controller and agents form a cluster and communicate over the event bus.</p><p>In this quickstart we&rsquo;ll use the SSH deployer; make sure your machine has SSH server running on port 22 and you can login using your pubkey <code>~/.ssh/id_rsa</code>. The SSH deployer copies the necessary JARs to <code>/tmp/hyperfoil/agentlib/</code> and starts the agent there. For instructions to run Hyperfoil in Kubernetes or Openshift please consult the <a href=/docs/user-guide/installation/k8s/>Installation docs</a>.</p><p>When we were running in the standalone or local mode we did not have to set any agents in the benchmark definition. That changes now as we need to inform the controller where the agents should be deployed. Let&rsquo;s see a benchmark - <code>two-agents.hf.yaml</code> that has those agents defined.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>two-agents</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># List of agents the Controller should deploy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>agents</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># This defines the agent using SSH connection to localhost, port 22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent-one</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>localhost:22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Another agent on localhost, this time defined using properties</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent-two</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>localhost</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span></span></span></code></pre></div><p>The load the benchmark generates is evenly split among the agents, so if you want to use another agent, you don&rsquo;t need to do any calculations - just add the agent and you&rsquo;re good to go.</p><p>Open three terminals; in the first start the controller using <code>bin/controller.sh</code>, in second one open the CLI with <code>bin/cli.sh</code> and in the third one start the example workload server:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>podman run --rm -p 8080:8083 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>Connect, upload, start and check out the benchmark using CLI exactly the same way as we did in the previous quickstart:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ connect
</span></span><span style=display:flex><span>Connected!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../two-agents.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark two-agents, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ run two-agents
</span></span><span style=display:flex><span>Started run 004A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ status
</span></span><span style=display:flex><span>Run 004A, benchmark two-agents
</span></span><span style=display:flex><span>Agents: agent-one<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>, agent-two<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/04/17 17:08:19.703    Terminated: 2019/04/17 17:08:29.729
</span></span><span style=display:flex><span>NAME  STATUS      STARTED       REMAINING  FINISHED      TOTAL DURATION
</span></span><span style=display:flex><span>main  TERMINATED  17:08:19.708             17:08:29.729  <span style=color:#0000cf;font-weight:700>10021</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>21</span> ms<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@localhost<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run 004A
</span></span><span style=display:flex><span>Phase   Sequence  Requests      Mean       p50       p90       p99     p99.9    p99.99    2xx    3xx    4xx    5xx Timeouts Errors
</span></span><span style=display:flex><span>main:
</span></span><span style=display:flex><span>	test:          <span style=color:#0000cf;font-weight:700>106</span>   3.12 ms   2.83 ms   3.23 ms  19.53 ms  25.30 ms  25.30 ms    <span style=color:#0000cf;font-weight:700>106</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>        <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>You see that we did 106 requests which fits the assumption about running 10 user sessions per second over 10 seconds, while we have used 2 agents.</p><p>Vert.x clustering is using <a href=http://infinispan.org/>Infinispan</a> and <a href=http://www.jgroups.org/>JGroups</a>; depending on your networking setup it might not work out-of-the-box. If you experience any trouble, check out the <a href=/docs/faq>FAQ</a>.</p><p><a href=/docs/getting-started/quickstart8>Next quickstart</a> will get back to the scenario definition; we&rsquo;ll show you how to extend Hyperfoil with custom steps and handlers.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-7f802fa2fbaab44a7b5ca822ef30567b>2.8 - Custom components</h1><p>Hyperfoil offers some basic steps to do HTTP requests, generate data, alter control flow in the scenario etc., but your needs may surpass the features implemented so far. Also, it might be just easier to express your logic in Java code than combining steps in the YAML. The downside is reduced ability to reuse and more tight dependency on Hyperfoil APIs.</p><p>This quickstart will show you how to extend Hyperfoil with custom steps and handlers. As we use the standard Java <code>ServiceLoader</code> approach, after you build the module you should drop it into <code>extensions</code> directory. (Note: if you upload the benchmarks through CLI you need to put it to both the machine where you run the CLI and to the controller.)</p><p>Each extension will consist of two classes:</p><ul><li><code>Builder</code>, is loaded as service and creates the immutable extension instance</li><li>extension (<code>Step</code>, <code>Action</code> or handler)</li></ul><p>Let&rsquo;s start with a <code>io.hyperfoil.api.config.Step</code> implementation. The interface has single method <code>invoke(Session)</code> that should return <code>true</code> if the step was executed and <code>false</code> if its execution has been blocked and should be retried later. In case that the execution is blocked the invocation must not have any side effects - e.g. if the step is fetching objects from some pools and one of the pools is depleted, it should release the already acquired objects back to the pool.</p><p>We&rsquo;ll create a step that will divide variable from a session by a (configurable) constant and store the result in another variable.</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>DivideStep</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Step</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// All fields in a step are immutable, any state must be stored in the Session
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>ReadAccess</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>IntAccess</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>DivideStep</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ReadAccess</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>IntAccess</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Variables in session are not accessed directly using map lookup but
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// through the Access objects. This is necessary as the scenario can use
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// some simple expressions that are parsed when the scenario is built
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// (in this constructor), not at runtime.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fromVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>toVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>divisor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>boolean</span> <span style=color:#000>invoke</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Session</span> <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// This step will block until the variable is set, rather than
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// throwing an error or defaulting the value.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(!</span><span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isSet</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>))</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Session can store either objects or integers. Using int variables is
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// more efficient as it prevents repeated boxing and unboxing.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>/</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span></code></pre></div></div></div><p>Then we need a builder class that will allow us to configure the step. To keep related classes together we will define it as inner static class:</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>DivideStep</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Step</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#8f5902;font-style:italic>// Make this builder loadable as service
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#5c35cc;font-weight:700>@MetaInfServices</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>StepBuilder</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// This is the step name that will be used in the YAML
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#5c35cc;font-weight:700>@Name</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;divide&#34;</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Builder</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>BaseStepBuilder</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Builder</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>InitFromParam</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Builder</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Contrary to the step fields in builder are mutable
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>String</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>String</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Let&#39;s permit a short-form definition that will store the result
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// in the same variable. Note that the javadoc @param is used to generate external documentation.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>       * @param param Use myVar /= constant
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>       */</span>
</span></span><span style=display:flex><span>      <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>init</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divIndex</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>indexOf</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;/=&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>divIndex</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>BenchmarkDefinitionException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Invalid inline definition: &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>try</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Integer</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>parseInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>substring</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>divIndex</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>trim</span><span style=color:#ce5c00;font-weight:700>()));</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>NumberFormatException</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>BenchmarkDefinitionException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Invalid inline definition: &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>         <span style=color:#000>String</span> <span style=color:#000>var</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>param</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>substring</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>divIndex</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>trim</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>var</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>toVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>var</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// All fields are set in fluent setters - this helps when the scenario
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// is defined through programmatic configuration.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// When parsing YAML the methods are invoked through reflection;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#8f5902;font-style:italic>// the attribute name is used for the method lookup.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fromVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>toVar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// The parser can automatically convert primitive types and enums.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>divisor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>List</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Step</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>build</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#8f5902;font-style:italic>// You can ignore the sequence parameter; this is used only in steps
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#8f5902;font-style:italic>// that require access to the parent sequence at runtime.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>fromVar</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>null</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>toVar</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>null</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>divisor</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Here is a good place to check that the attributes are sane.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>            <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>BenchmarkDefinitionException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Missing one of the required attributes!&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>         <span style=color:#8f5902;font-style:italic>// The builder has a bit more flexibility and it can create more than
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#8f5902;font-style:italic>// one step at once.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Collections</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>singletonList</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DivideStep</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>               <span style=color:#000>SessionFactory</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>readAccess</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>fromVar</span><span style=color:#ce5c00;font-weight:700>),</span> <span style=color:#000>SessionFactory</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>intAccess</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>toVar</span><span style=color:#ce5c00;font-weight:700>),</span> <span style=color:#000>divisor</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span></code></pre></div></div></div><p>As the comments say, the builder is using fluent setter syntax to set the attributes. When you want to nest attributes under another builder, you can just add parameter-less method <code>FooBuilder foo()</code> the returns an instance of <code>FooBuilder</code>; the parser will fill this instance as well. There are some interfaces your builder can implement to accept lists or different structures, but the description is out of scope of this quickstart.</p><p>The builder class has two annotations: <code>@Name</code> which specifies the name we&rsquo;ll use in YAML as step name, and <code>@MetaInfServices</code> with <code>StepBuilder.class</code> as the parameter. If you were to implement other type of extension, this would be <code>Action.Builder.class</code>, <code>Request.ProcessorBuilder.class</code> etc. In order to record the service in META-INF directory in the jar you must also add this dependency to your module:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;groupId&gt;</span>org.kohsuke.metainf-services<span style=color:#204a87;font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;artifactId&gt;</span>metainf-services<span style=color:#204a87;font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;optional&gt;</span>true<span style=color:#204a87;font-weight:700>&lt;/optional&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>The whole class <a href=https://github.com/Hyperfoil/Hyperfoil/blob/master/distribution/src/main/java/io/hyperfoil/example/DivideStep.java>can be inspected here</a> and it is already included in the <code>extensions</code> directory. You can try running <code>bin/standalone.sh</code>, upload and run <code>divide.hf.yaml</code>. You should see about 5 log messages in the server log.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This benchmark demonstrates custom steps</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>divide</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>setInt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>foo &lt;- 33</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>divide</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>foo /= 3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>log</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>message</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Foo is {}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>foo</span></span></span></code></pre></div><p>There are several other integration points but <code>Step</code>:</p><ul><li><p><code>io.hyperfoil.api.session.Action</code> is very similar to step, but it does not allow blocking. Implement <code>Action.BuilderFactory</code> to define new actions.</p></li><li><p><code>StatusHandler</code>, <code>HeaderHandler</code> and <code>BodyHandler</code> in <code>io.hyperfoil.api.http</code> package process different stages of HTTP response parsing. All these have <code>BuilderFactory</code> inner interface for you to implement.</p></li><li><p><code>io.hyperfoil.api.connection.Processor</code> performs later generic stages of response processing. As this interface is generic, there are two factories that you could use: <code>i.h.a.c.Request.ProcessorBuilderFactory</code> and <code>i.h.a.c.HttpRequest.ProcessorBuilderFactory</code>.</p></li></ul><p>There is quite some boilerplate code in the process of creating a new component; that&rsquo;s why you can use Hyperfoil Codegen Maven plugin to scaffold the basic outline for you. Go to the module where you want the component generated and run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn io.hyperfoil:hyperfoil-codegen-maven-plugin:skeleton
</span></span></code></pre></div><p>The plugin will ask you for the package name, component name and type and write down the source code skeleton. You can provide the parameters right on commandline like</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn io.hyperfoil:hyperfoil-codegen-maven-plugin:skeleton <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    -Dskeleton.package<span style=color:#ce5c00;font-weight:700>=</span>foo.bar -Dskeleton.name<span style=color:#ce5c00;font-weight:700>=</span>myComponent -Dskeleton.type<span style=color:#ce5c00;font-weight:700>=</span>step
</span></span></code></pre></div><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4>The generator does not add the dependency to <code>org.kohsuke.metainf-services:metainf-services</code> to this module&rsquo;s <code>pom.xml</code>, you need to do that manually.</div><p>If you add <code>io.hyperfoil</code> as a plugin group to your <code>$HOME/.m2/settings.xml</code> like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;settings&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;pluginGroups&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;pluginGroup&gt;</span>io.hyperfoil<span style=color:#204a87;font-weight:700>&lt;/pluginGroup&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/pluginGroups&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/settings&gt;</span>
</span></span></code></pre></div><p>you can use the short syntax for the generator:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn hyperfoil-codegen:skeleton -Dskeleton.name<span style=color:#ce5c00;font-weight:700>=</span>....
</span></span></code></pre></div><p>See also further information about <a href=/docs/extensions/>custom extensions development</a>.</p><hr><p>This is the last quickstart in this series; if you seek more info check out the <a href=/docs/>documentation</a> or talk to us on <a href=https://github.com/Hyperfoil/Hyperfoil/discussions>GitHub Discussions</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ecf7e357d2a131135219db95eddda49c>3 - User Guide</h1><div class=lead>Comprehensive set of resourcs for everything you need to get started with Hyperfoil</div><p>Welcome to the Hyperfoil User Guide, your comprehensive resource for everything you need to get started. This section covers installation, detailed instructions on defining benchmarks, and troubleshooting tips to help you resolve common issues. Whether you&rsquo;re a beginner or an advanced user, you&rsquo;ll find valuable information to enhance your performance testing with Hyperfoil.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3d4feb145da9af18dcaedf5b8372894a>3.1 - Installation</h1><div class=lead>Detailed instructions for installing Hyperfoil manually, on Kubernetes/Openshift, or with Ansible.</div><p>In this section, you’ll find detailed instructions for installing and setting up Hyperfoil using various methods, including manual setup, Ansible, and Kubernetes/Openshift. Follow these guides to choose the best installation procedure for your environment.</p></div><div class=td-content><h1 id=pg-ff809110397f9741adad09d719b356f2>3.1.1 - Manual startup</h1><div class=lead>Explore manual startup options for the Hyperfoil controller.</div><p>Hyperfoil controller is started with</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/controller.sh
</span></span></code></pre></div><p>Any arguments passed to the scripts will be passed as-is to the <code>java</code> process.</p><p>By default <code>io.hyperfoil.deployer</code> is set to <code>ssh</code> which means that the controller will deploy agents over SSH, based on the <a href=/docs/user-guide/benchmark/agent/#ssh-deployer>agents configurion</a>. This requires that the user account running the controller must have public-key SSH authorization set up using key <code>$HOME/.ssh/id_rsa</code>. The user also has to be able to copy files to the directory set in agent definition (by default <code>/tmp/hyperfoil</code>) using SCP - Hyperfoil automatically synchronizes library files in this folder with the currently running instance and then executes the agent.</p><p>When you don&rsquo;t intend to run distributed benchmarks you can start the controller in <em>standalone</em> mode:</p><pre tabindex=0><code>bin/standalone.sh
</code></pre><p>This variant won&rsquo;t deploy any agents remotely and therefore it does not need any <code>agents:</code> section in the <a href=/docs/user-guide/benchmark>benchmark definition</a>; instead it will use single agent started in the same JVM.</p><p>Below is the comprehensive list of all the properties Hyperfoil recognizes. All system properties can be replaced by environment variables, uppercasing the letters and replacing dots and dashes with underscores: e.g. <code>io.hyperfoil.controller.host</code> becomes <code>IO_HYPERFOIL_CONTROLLER_HOST</code>.</p><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>io.hyperfoil.controller.host</td><td>0.0.0.0</td><td>Host for Controller REST server</td></tr><tr><td>io.hyperfoil.controller.port</td><td>8090</td><td>Port for Controller REST server</td></tr><tr><td>io.hyperfoil.rootdir</td><td>/tmp/hyperfoil</td><td>Root directory for stored files</td></tr><tr><td>io.hyperfoil.benchmarkdir</td><td><em>root</em>/benchmark</td><td>Benchmark files (YAML and serialized)</td></tr><tr><td>io.hyperfoil.rundir</td><td><em>root</em>/run</td><td>Run result files (configs, stats&mldr;)</td></tr><tr><td>io.hyperfoil.deployer</td><td>ssh</td><td>Implementation for agents deployment</td></tr><tr><td>io.hyperfoil.deployer.timeout</td><td>15000 ms</td><td>Timeout for agents to start</td></tr><tr><td>io.hyperfoil.agent.debug.port</td><td></td><td>If set, agent will be started with JVM debug port open</td></tr><tr><td>io.hyperfoil.agent.debug.suspend</td><td>n</td><td>Suspend parameter for the debug port</td></tr><tr><td>io.hyperfoil.controller.cluster.ip</td><td>first non-loopback</td><td>Hostname/IP used for clustering with agents</td></tr><tr><td>io.hyperfoil.controller.cluster.port</td><td>7800</td><td>Default JGroups clustering port</td></tr><tr><td>io.hyperfoil.controller.external.uri</td><td></td><td>Externally advertised URI of REST server</td></tr><tr><td>io.hyperfoil.controller.keystore.path</td><td></td><td>File path to Java Keystore</td></tr><tr><td>io.hyperfoil.controller.keystore.password</td><td></td><td>Java Keystore password</td></tr><tr><td>io.hyperfoil.controller.pem.keys</td><td></td><td>File path(s) to private TLS key(s) in PEM format</td></tr><tr><td>io.hyperfoil.controller.pem.certs</td><td></td><td>File path(s) to server TLS certificate(s) in PEM format</td></tr><tr><td>io.hyperfoil.controller.password</td><td></td><td>Password used for Basic authentication</td></tr><tr><td>io.hyperfoil.controller.secured.via.proxy</td><td></td><td>This must be set to <code>true</code> for Basic auth without TLS encryption</td></tr><tr><td>io.hyperfoil.trigger.url</td><td></td><td>See below</td></tr></tbody></table><p>If <code>io.hyperfoi.trigger.url</code> is set the controller does not start benchmark run right away after hitting <code>/benchmark/my-benchmark/start</code> ; instead it responds with status 301 and header Location set to concatenation of this string and <code>BENCHMARK=my-benchmark&amp;RUN_ID=xxxx</code>. CLI interprets that response as a request to hit CI instance on this URL, assuming that CI will trigger a new job that will eventually call <code>/benchmark/my-benchmark/start?runId=xxxx</code> with header <code>x-trigger-job</code>. This is useful if the the CI has to synchronize Hyperfoil to other benchmarks that don&rsquo;t use this controller instance.</p><h2 id=security>Security<a class=td-heading-self-link href=#security aria-label="Heading self-link"></a></h2><p>Since Hyperfoil accepts and invoked any serialized Java objects you must not run it exposed to public to prevent a very simple remote code execution. Even if using HTTPS and password protection (see below) we recommend to limit access and privileges of the process to absolute minimum.</p><p>You can get confidential access to the server using TLS encryption, providing the certificate and keys either using Java Keystore mechanism (properties above starting with <code>io.hyperfoil.controller.keystore</code>) or via PEM files (properties starting with <code>io.hyperfoil.controller.pem</code>). These options are mutually exclusive. In the latter case it is possible to use multiple certificate/key files, separated by comma (,).</p><p>Authentication uses Basic authentication scheme accepting any string as username. The password is set using <code>io.hyperfoil.controller.password</code> or respective environment variable. If you&rsquo;re exposing the server using plaintext HTTP you must set <code>-Dio.hyperfoil.controller.secured.via.proxy=true</code> to confirm that this is a desired configuration (e.g. if the TLS is terminated at proxy and the connection from proxy does not require confidentiality).</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f9f986e3fb547c118cd69904afdfdd3f>3.1.2 - K8s/Openshift deployment</h1><div class=lead>Deploy Hyperfoil in Kubernetes or Openshift environment using the out-of-the-box Hyperfoil operator</div><p>A convenient alternative to running Hyperfoil on hosts with SSH access is deploying it in Kubernetes or Openshift environment. The recommended way to install it using an operator in your Openshift console - just go to Operators - OperatorHub and search for &lsquo;hyperfoil&rsquo;, and follow the installation wizard. Alternatively you can <a href=/docs/user-guide/installation/k8s_manual/>deploy the controller manually</a>.</p><p>In order to start a Hyperfoil Controller instance in your cluster, create a new namespace <code>hyperfoil</code>: Go to Operators - Installed Operators and open Hyperfoil. In upper left corner select &lsquo;Project: &rsquo; - Create project and fill out the details. Then click on the &lsquo;Hyperfoil&rsquo; tab and find the button &lsquo;Create Hyperfoil&rsquo;.</p><p>You should see a YAML definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil.io/v1alpha2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Hyperfoil</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example-hyperfoil</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agentDeployTimeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>60000</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>log</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>myConfigMap/log4j2-superverbose.xml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>route</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil.apps.mycloud.example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>latest</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Change the <code>name</code> to just <code>hyperfoil</code> (or whatever you prefer) and delete all the content from the <code>spec</code> section:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil.io/v1alpha2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Hyperfoil</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This is a perfectly valid Hyperfoil resource with everything set to default values. You can customize some properties in the <code>spec</code> section further - see the <a href=#reference>reference</a>.</p><p>The operator deploys only the controller; each agent is then started when the run starts as a <code>pod</code> in the same namespace and stopped when the run completes.</p><p>When the resource becomes ready (you can check it out through Openshift CLI using <code>oc get hf</code>) the controller pod should be up and running. Now you can open Hyperfoil CLI and connect to the controller. While default Hyperfoil port is 8090, default route setting uses TLS (edge) and therefore Openshift router will expose the service on port 443. If your cluster&rsquo;s certificate is not recognized (such as when using self-signed certificates) you need to use <code>--insecure</code> (or <code>-k</code>) option.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/cli.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ connect hyperfoil-hyperfoil.apps.my.cluster.domain:443 --insecure
</span></span><span style=display:flex><span>WARNING: Hyperfoil TLS certificate validity is not checked. Your credentials might get compromised.
</span></span><span style=display:flex><span>Connected!
</span></span><span style=display:flex><span>WARNING: Server <span style=color:#204a87>time</span> seems to be off by <span style=color:#0000cf;font-weight:700>12124</span> ms
</span></span></code></pre></div><p>Now you can upload & run benchmarks as usual - we&rsquo;re using {% include example_link.md src=&lsquo;k8s-hello-world.hf.yaml&rsquo; %} in this example. Note that it can take several seconds to spin up containers with agents.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@hyperfoil-hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ upload examples/k8s-hello-world.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark k8s-hello-world, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@hyperfoil-hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ run k8s-hello-world
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0000</span>
</span></span><span style=display:flex><span>Run 0000, benchmark k8s-hello-world
</span></span><span style=display:flex><span>Agents: agent-one<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/11/18 19:07:36.752    Terminated: 2019/11/18 19:07:41.778
</span></span><span style=display:flex><span>NAME  STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION               DESCRIPTION
</span></span><span style=display:flex><span>main  TERMINATED  19:07:36.753             19:07:41.778  <span style=color:#0000cf;font-weight:700>5025</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>25</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  5.00 users per second
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@hyperfoil-hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$
</span></span></code></pre></div><p>You can find more details about adjusting the agents in the <a href=/docs/user-guide/benchmark/agent/#kubernetesopenshift-deployer>benchmark format reference</a>.</p><p>Running Hyperfoil inside the cluster you are trying to test might skew results due to different network topology compared to driving the load from &lsquo;outside&rsquo; (as real users would do). It is your responsibility to validate if your setup and separation between load driver and SUT (system under test) is correct. You have been warned.</p><h2 id=reference>Reference<a class=td-heading-self-link href=#reference aria-label="Heading self-link"></a></h2><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>version</td><td>Tag for controller image (e.g. <code>0.14</code> for a released version or <code>0.15-SNAPSHOT</code> for last build from main (master) branch). Defaults to <code>latest</code>.</td></tr><tr><td>image</td><td>Controller image. If &lsquo;version&rsquo; is defined, too, the tag is replaced (or appended). Defaults to &lsquo;quay.io/hyperfoil/hyperfoil&rsquo;</td></tr><tr><td><a href=#route>route</a></td><td>Configuration for the route leading to Controller REST endpoint.</td></tr><tr><td><a href=#auth>auth</a></td><td>Authorization configuration.</td></tr><tr><td>log</td><td>Name of the config map and optionally its entry (separated by &lsquo;/&rsquo;: e.g myconfigmap/log4j2-superverbose.xml) storing Log4j2 configuration file. By default the Controller uses its embedded configuration.</td></tr><tr><td>agentDeployTimeout</td><td>Deploy timeout for agents, in milliseconds.</td></tr><tr><td>triggerUrl</td><td>Value for <code>io.hyperfoil.trigger.url</code> - <a href=#starting-the-controller-manually>see above</a></td></tr><tr><td>preHooks</td><td>List of config map names holding hooks that run before the run starts.</td></tr><tr><td>postHooks</td><td>List of config map names holding hooks that run when the run finishes.</td></tr><tr><td>persistentVolumeClaim</td><td>Name of the PVC Hyperfoil should mount for its workdir.</td></tr></tbody></table><h3 id=route>route<a class=td-heading-self-link href=#route aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>host</td><td>Host for the route leading to Controller REST endpoint. Example: hyperfoil.apps.cloud.example.com</td></tr><tr><td>type</td><td>Either &lsquo;http&rsquo; (for plain-text routes - not recommended), &rsquo;edge&rsquo;, &lsquo;reencrypt&rsquo; or &lsquo;passthrough&rsquo;</td></tr><tr><td>tls</td><td>Name of the secret hosting <code>tls.crt</code>, <code>tls.key</code> and optionally <code>ca.crt</code>. This is mandatory for <code>passthrough</code> routes and optional for edge and reencrypt routes</td></tr></tbody></table><h3 id=auth>auth<a class=td-heading-self-link href=#auth aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>secret</td><td>Name of secret used for basic authentication. Must contain key <code>password</code>; Hyperfoil accepts any username for login.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-bf4589d8e0fac53dabd39bc5f2e0a20e>3.1.3 - Manual k8s/Openshift deployment</h1><div class=lead>Manually deploy Hyperfoil in Kubernetes or Openshift environment</div><p>If you cannot <a href=/docs/user-guide/installation/k8s/>use the operator</a> or if you&rsquo;re running vanilla Kubernetes you can define all the resource manually. You deploy only the controller; each agent is then started, when the run starts, as a <code>pod</code> in the same namespace and stopped when the run completes.</p><p>Following steps install Hyperfoil controller in Openshift, assuming that you have all the required priviledges. With vanilla Kubernetes you might have to replace the <code>route</code> with an appropriate <code>ingress</code>.</p><h4 id=1-create-new-namespace-for-hyperfoil>1. Create new namespace for hyperfoil<a class=td-heading-self-link href=#1-create-new-namespace-for-hyperfoil aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>oc new-project hyperfoil
</span></span></code></pre></div><h4 id=2-create-required-resources>2. Create required resources<a class=td-heading-self-link href=#2-create-required-resources aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl -s -L k8s.hyperfoil.io <span style=color:#000;font-weight:700>|</span> oc apply -f -
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>role.rbac.authorization.k8s.io/controller created
</span></span><span style=display:flex><span>serviceaccount/controller created
</span></span><span style=display:flex><span>service/hyperfoil created
</span></span><span style=display:flex><span>rolebinding.rbac.authorization.k8s.io/controller created
</span></span><span style=display:flex><span>deploymentconfig.apps.openshift.io/controller created
</span></span><span style=display:flex><span>route.route.openshift.io/hyperfoil created
</span></span></code></pre></div><p>The route will use hostname following the format <code>hyperfoil-hyperfoil.apps.my.cluster.domain</code> - feel free to customize the hostname as needed.</p><h4 id=3-wait-until-the-image-gets-downloaded-and-the-container-starts>3. Wait until the image gets downloaded and the container starts<a class=td-heading-self-link href=#3-wait-until-the-image-gets-downloaded-and-the-container-starts aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>oc get po
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>NAME                  READY   STATUS              RESTARTS   AGE
</span></span><span style=display:flex><span>controller-1-pqbvs    1/1     Running             <span style=color:#0000cf;font-weight:700>0</span>          57s
</span></span><span style=display:flex><span>controller-1-deploy   0/1     Completed           <span style=color:#0000cf;font-weight:700>0</span>          72s
</span></span></code></pre></div><h4 id=4-open-cli-and-connect-to-the-controller>4. Open CLI and connect to the controller<a class=td-heading-self-link href=#4-open-cli-and-connect-to-the-controller aria-label="Heading self-link"></a></h4><p>While default Hyperfoil port is 8090, Openshift router will expose the service on port 80.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bin/cli.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ connect hyperfoil-hyperfoil.apps.my.cluster.domain -p <span style=color:#0000cf;font-weight:700>80</span>
</span></span><span style=display:flex><span>Connected!
</span></span><span style=display:flex><span>WARNING: Server <span style=color:#204a87>time</span> seems to be off by <span style=color:#0000cf;font-weight:700>12124</span> ms
</span></span></code></pre></div><h4 id=5-upload-and-run-benchmarks-as-usual>5. Upload and run benchmarks as usual<a class=td-heading-self-link href=#5-upload-and-run-benchmarks-as-usual aria-label="Heading self-link"></a></h4><p>We&rsquo;re using <code>k8s-hello-world.hf.yaml</code> in this example.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>k8s-hello-world</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>agents</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent-one</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>https://kubernetes.default.svc.cluster.local</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Note that it can take several seconds to spin up containers with agents.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@hyperfoil-hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ upload .../k8s-hello-world.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark k8s-hello-world, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@hyperfoil-hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ run k8s-hello-world
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0000</span>
</span></span><span style=display:flex><span>Run 0000, benchmark k8s-hello-world
</span></span><span style=display:flex><span>Agents: agent-one<span style=color:#ce5c00;font-weight:700>[</span>STARTING<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2019/11/18 19:07:36.752    Terminated: 2019/11/18 19:07:41.778
</span></span><span style=display:flex><span>NAME  STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION               DESCRIPTION
</span></span><span style=display:flex><span>main  TERMINATED  19:07:36.753             19:07:41.778  <span style=color:#0000cf;font-weight:700>5025</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>25</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  5.00 users per second
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@hyperfoil-hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$
</span></span></code></pre></div><p>You can find more details about adjusting the agents in the <a href=/docs/user-guide/benchmark/agent/#kubernetesopenshift-deployer>benchmark format reference</a>.</p><p>Running Hyperfoil inside the cluster you are trying to test might skew results due to different network topology compared to driving the load from &lsquo;outside&rsquo; (as real users would do). It is your responsibility to validate if your setup and separation between load driver and SUT (system under test) is correct. You have been warned.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-a732327a38e5b0b5deb4162f4a7f7229>3.1.4 - Ansible startup</h1><div class=lead>Deploy Hyperfoil using Ansible Galaxy scripts</div><p>You can fetch release, distribute and start the cluster using Ansible Galaxy scripts; <a href=https://github.com/Hyperfoil/hyperfoil_setup>setup</a>, <a href=https://github.com/Hyperfoil/hyperfoil_test>test</a>, <a href=https://github.com/Hyperfoil/hyperfoil_shutdown>shutdown</a></p><p>First, get the scripts:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ansible-galaxy install hyperfoil.hyperfoil_setup,<span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.galaxy_version <span style=color:#ce5c00;font-weight:700>}}</span>
</span></span><span style=display:flex><span>ansible-galaxy install hyperfoil.hyperfoil_shutdown,<span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.galaxy_version <span style=color:#ce5c00;font-weight:700>}}</span>
</span></span><span style=display:flex><span>ansible-galaxy install hyperfoil.hyperfoil_test,<span style=color:#ce5c00;font-weight:700>{{</span> site.last_release.galaxy_version <span style=color:#ce5c00;font-weight:700>}}</span>
</span></span></code></pre></div><p>Now, edit your <code>hosts</code> file, it could look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil-controller<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>controller <span style=color:#000>ansible_host</span><span style=color:#ce5c00;font-weight:700>=</span>localhost
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil-agent<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>agent-1 <span style=color:#000>ansible_host</span><span style=color:#ce5c00;font-weight:700>=</span>localhost
</span></span></code></pre></div><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4>You can add more agents by duplicating the last line with <code>agent-2</code> etc.</div><p>Prepare your playbook; here is a short example that starts the controller, uploads and starts <a href=https://github.com/Hyperfoil/hyperfoil_test/blob/master/benchmarks/example.yaml.j2>simple benchmark</a> (the templating engine replaces the agents in benchmark script based on Ansible hosts) and waits for its completion. When it confirms number of requests executed it stops the controller.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil-agent, hyperfoil-controller ]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>tasks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># This will only gather facts about all nodes</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil-controller</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>roles</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>hyperfoil.hyperfoil_setup</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>127.0.0.1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>connection</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>roles</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>hyperfoil.hyperfoil_test</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>test_name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Note that due to the way Ansible lookups work this will work only if hyperfoil-controller == localhost</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>127.0.0.1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>connection</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>tasks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Find number of requests</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>set_fact</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>test_requests</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;{{ lookup(&#39;csvfile&#39;, &#39;example file=/tmp/hyperfoil/workspace/run/&#39; + test_runid + &#39;/stats/total.csv col=2 delimiter=,&#39;)}}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Print number of requests</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>debug</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>msg</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;Executed {{ test_requests }} requests.&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>hyperfoil-controller</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>roles</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>hyperfoil.hyperfoil_shutdown</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Finally, run the playbook:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ansible-playbook -i hosts example.yml
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1aa0b1f37dce687249000b3550a88754>3.2 - Benchmark</h1><div class=lead>Detailed breakdown of each component involved in defining a benchmark</div><p>In Hyperfoil, defining a benchmark involves structuring scenarios, phases, variables and other components to simulate realistic user behavior and workload patterns. This section provides a detailed breakdown of each component involved in defining a benchmark.</p></div><div class=td-content><h1 id=pg-58d6d997673b74a5517024f9baf5d16e>3.2.1 - Agents</h1><div class=lead>Entities responsible for executing benchmark and collecting statistics</div><p>This section can be omitted in <a href=/docs/user-guide/installation/start_manual/>standalone mode</a>.</p><p>Agents section forms either a list or map with arbitrary agent names and either an inline or properties-style definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>agents</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>someAgent</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;inline definition&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>otherAgent</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>foo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The definition is passed to an instance of <code>i.h.api.deployment.Deployer</code> which will interpret the definition. Deployer implementation is registred using the <code>java.util.ServiceLoader</code> and selected through the <code>io.hyperfoil.deployer</code> system property. The default implementation is <code>ssh</code>.</p><h2 id=common-properties>Common properties<a class=td-heading-self-link href=#common-properties aria-label="Heading self-link"></a></h2><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>threads</td><td>from benchmark</td><td>Number of threads used by the agent (overrides <code>threads</code> in benchmark root).</td></tr><tr><td>extras</td><td></td><td>Custom options passed to the JVM (system properties, JVM options&mldr;)</td></tr></tbody></table><h2 id=ssh-deployer>SSH deployer<a class=td-heading-self-link href=#ssh-deployer aria-label="Heading self-link"></a></h2><p>The user account running Hyperfoil Controller must have a public-key authorization set up on agents&rsquo; hosts using key <code>$HOME/.ssh/id_rsa</code>. It also has to be able to copy files into the <code>dir</code> directory using SCP - all the required JARs will be copied there and you will find the logs there as well.</p><p><code>ssh</code> deployer accepts either the <code>[user@]host[:port]</code> inline syntax or these properties:</p><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>user</td><td>Current username</td><td></td></tr><tr><td>host</td><td></td><td>This property is mandatory.</td></tr><tr><td>port</td><td>22</td><td></td></tr><tr><td>sshKey</td><td>id_rsa</td><td>Optionally define a different named key in the <code>$HOME/.ssh</code> directory</td></tr><tr><td>dir</td><td>Directory set by system property <code>io.hyperfoil.rootdir</code> or <code>/tmp/hyperfoil</code></td><td>Working directory for the agent. This directory can be shared by multiple agents running on the same physical machine.</td></tr><tr><td>cpu</td><td>(all cpus)</td><td>If set the CPUs where the agent can run is limited using <code>taskset -c &amp;lt;cpu&amp;gt;</code>. Example: <code>0-2,6</code></td></tr></tbody></table><p>See an example of ssh deployment configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>agents</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>testserver1:22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>testuser@testserver2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>agent3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>testserver3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>22</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>dir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/some/other/path</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h2 id=kubernetesopenshift-deployer>Kubernetes/Openshift deployer<a class=td-heading-self-link href=#kubernetesopenshift-deployer aria-label="Heading self-link"></a></h2><p>To activate the kubernetes deployer you should set <code>-Dio.hyperfoil.deployer=k8s</code>; the <a href=/docs/user-guide/installation/k8s/>recommended installation</a> does that automatically.</p><p>The agents are configured the same way as with SSH deployment, only the properties differ. Full reference is provided below.</p><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>agents</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>my-agent</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>node</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>my-worker-node</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>node</td><td></td><td>Configures the labels for the <code>nodeSelector</code>. If the value does not contain equals sign (<code>=</code>) or comma (<code>,</code>) this sets the desired value of label <code>kubernetes.io/hostname</code>. You can also set multiple custom labels separated by commas, e.g. <code>foo=bar,kubernetes.io/os=linux</code>.</td></tr><tr><td>stop</td><td>true</td><td>By default the controller stops all agents immediatelly after the run terminates. In case of errors this is not too convenient as you might want to perform further analysis. To prevent automatic agent shutdown set this to false.</td></tr><tr><td>log</td><td></td><td>Name of config map (e.g. <code>my-config-map</code>) or config map and its entry (e.g. <code>my-config-map/log4j2.xml</code>) that contains the Log4j2 configuration file. Default entry from the config map is <code>log4j2.xml</code>. Hyperfoil will mount this configmap as a volume to this agent.</td></tr><tr><td>image</td><td>quay.io/hyperfoil/hyperfoil:<em>controller-version</em></td><td>Different version of Hyperfoil in the agents</td></tr><tr><td>imagePullPolicy</td><td>Always</td><td>Image pull policy for agents</td></tr><tr><td>fetchLogs</td><td>true</td><td>Automatically watch agents&rsquo; logs and store them in the run directory.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b1acdfa3d39eb15b26e75568d16f4ab3>3.2.2 - HTTP</h1><div class=lead>This section defines servers that agents contact during benchmarks, allowing configurations for multiple targets with specific connection settings</div><p>All servers that Hyperfoil should contact must be declared in this section. Before the benchmark starts Hyperfoil agents will open connections to the target servers; if this connection fails the benchmark is terminated immediatelly.</p><p>You can either declare single target server (the default one) within this section or more of them:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>50</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>HTTP configuration has these properties:</p><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>protocol</td><td></td><td>Either <code>http</code> or <code>https</code></td></tr><tr><td>host</td><td></td><td>Hostname of the server. For convenience you can use the <code>http[s]://host[:port]</code> inline syntax as shown above</td></tr><tr><td>port</td><td><code>80</code> or <code>443</code></td><td>Default is based on the <code>protocol</code></td></tr><tr><td><a href=#shared-connections>sharedConnections</a></td><td>1</td><td>Number of connections to open. It is recommended to set this property to a non-default value.</td></tr><tr><td><a href=#connection-strategies>connectionStrategy</a></td><td>SHARED_POOL</td><td>Connection pooling model (see details below)</td></tr><tr><td>addresses</td><td></td><td>Supply list of IPs or IP:port targets that will be used for the connections instead of resolving the <code>host</code> in DNS and using <code>port</code> as set - <code>host</code> and <code>port</code> will be used only for <code>Host</code> headers and SNI. If this list contains more addresses the connections will be split evenly.</td></tr><tr><td>requestTimeout</td><td>30 seconds</td><td>Default request timeout, this can be overridden in each <code>httpRequest</code>.</td></tr><tr><td>allowHttp1x</td><td>true</td><td>Allow HTTP 1.1 for connections (e.g. during ALPN).</td></tr><tr><td>allowHttp2x</td><td>true</td><td>Allow HTTP 2.0 for connections (e.g. during ALPN). If both 1.1 and 2.0 are allowed and <code>https</code> is not used (which would trigger ALPN) Hyperfoil will use HTTP 1.1. If only 2.0 is allowed Hyperfoil will start with HTTP 1.1 and perform protocol upgrade to 2.0.</td></tr><tr><td>directHttp2</td><td>false</td><td>Start with H2C HTTP 2.0 without protocol upgrade. Makes sense only for plain text (<code>http</code>) connections. Currently not implemented.</td></tr><tr><td>maxHttp2Streams</td><td>100</td><td>Maximum number of requests concurrently enqueued on single HTTP 2.0 connection.</td></tr><tr><td>pipeliningLimit</td><td>1</td><td>Maximum number of requests pipelined on single HTTP 1.1 connection.</td></tr><tr><td>rawBytesHandlers</td><td>true</td><td>Enable or disable using handlers that process HTTP response raw bytes.</td></tr><tr><td><a href=#keymanager-configuration>keyManager</a></td><td></td><td>TLS key manager for setting up client certificates.</td></tr><tr><td><a href=#trustmanager-configuration>trustManager</a></td><td></td><td>TLS trust manager for setting up server certificates.</td></tr></tbody></table><h2 id=shared-connections>Shared connections<a class=td-heading-self-link href=#shared-connections aria-label="Heading self-link"></a></h2><p>This number is split between all agents and executor threads evenly; if there are too many agents/executors each will get at least 1 connection.</p><p>When a scalar value is used for this property the connection pool has fixed size; Hyperfoil opens all connections when the benchmark starts and should a connection be closed throughout the benchmark, another connection is reopened instead. You can change this behaviour by composing the property of these sub-properties:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>core</td><td>Number of connections that will be opened when the benchmark starts. Number of connections in the pool should never drop below this value (another connection will be opened instead).</td></tr><tr><td>max</td><td>Maximum number of connections in the pool.</td></tr><tr><td>buffer</td><td>Hyperfoil will try to keep at least <code>active + buffer</code> connections in the pool where <code>active</code> is the number of currently used connection (those with at least 1 in-flight request)</td></tr><tr><td>keepAliveTime</td><td>When a connection is not used for more than this value (in milliseconds) it will be closed. Non-positive value means that the connection is never closed because of being idle.</td></tr></tbody></table><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>core</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>buffer</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>keepAliveTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>30000</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h2 id=connection-strategies>Connection strategies<a class=td-heading-self-link href=#connection-strategies aria-label="Heading self-link"></a></h2><p>This property describes the connection pooling model, you can choose from the options below:</p><table><thead><tr><th>Strategy</th><th>Description</th></tr></thead><tbody><tr><td>SHARED_POOL</td><td>Connections are created in a pool and then borrowed by the session. When the request is complete the connection is returned to the shared pool.</td></tr><tr><td>SESSION_POOLS</td><td>Connections are created in a shared pool. When the request is completed it is not returned to the shared pool but to a session-local pool. Subsequent requests by this session first try to acquire the connection from this local pool. When the session completes all connections from the session-local pool are returned to the shared pool.</td></tr><tr><td>OPEN_ON_REQUEST</td><td>Connections are created before request or borrowed from a session-local pool. When the request is completed the connection is returned to this pool. When the session completes all connections from the session-local pool are closed.</td></tr><tr><td>ALWAYS_NEW</td><td>Always create the connection before the request and close it when it is complete. No pooling of connections.</td></tr></tbody></table><h2 id=keymanager-configuration>KeyManager configuration<a class=td-heading-self-link href=#keymanager-configuration aria-label="Heading self-link"></a></h2><p>All files are loaded when the benchmark is constructed, e.g. on the machine running CLI. You don&rsquo;t need to upload any files to controller or agent machines.</p><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>storeType</td><td>JKS</td><td>Implementation of the store.</td></tr><tr><td>storeFile</td><td></td><td>Path to a file with the store.</td></tr><tr><td>password</td><td></td><td>Password for accessing the store file.</td></tr><tr><td>alias</td><td></td><td>Keystore alias.</td></tr><tr><td>certFile</td><td></td><td>Path to a file with the client certificate.</td></tr><tr><td>keyFile</td><td></td><td>Path to a file with client&rsquo;s private key.</td></tr></tbody></table><h2 id=trustmanager-configuration>TrustManager configuration<a class=td-heading-self-link href=#trustmanager-configuration aria-label="Heading self-link"></a></h2><p>All files are loaded when the benchmark is constructed, e.g. on the machine running CLI. You don&rsquo;t need to upload any files to controller or agent machines.</p><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>storeType</td><td>JKS</td><td>Implementation of the store.</td></tr><tr><td>storeFile</td><td></td><td>Path to a file with the store.</td></tr><tr><td>password</td><td></td><td>Password for accessing the store file.</td></tr><tr><td>certFile</td><td></td><td>Path to a file with the server certificate.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-64114ea0efc225d733997a7c881c7cfd>3.2.3 - Phases</h1><div class=lead>Defines a unit of workload simulation within a benchmark, representing a specific load pattern or behavior</div><p>You might want to simulate several types of workloads at once: e.g. in an eshop users would come browsing or buying products, and operators would restock the virtual warehouse. Also, driving constant load may not be the best way to run the benchmark: often you want to slowly ramp the load up to let the system adjust (scale up, perform JIT, fill pools) and push the full load only after that. When trying to find system limits, you do the same repetitevely - ramp up the load, measure latencies and if the system meets SLAs (latencies below limits) continue ramping up the load until it breaks.</p><p>In Hyperfoil, this all is expressed through <em>phases</em>. Phases can run independently of each other;
these simulate certain load execute by a group of users. Within one phase all users execute the same <code>scenario</code>
(e.g. logging into the system, buying some goods and then logging off).</p><p>A phase can be in one of these states:</p><ul><li><em>not running (scheduled)</em>: As the name clearly says, the phase is not yet getting executed.</li><li><em>running</em>: The agent started running the phase, i.e., performing the configured load.</li><li><em>finished</em>: Users won&rsquo;t start new scenarios but we&rsquo;ll let already-started users complete the scenario.</li><li><em>terminated</em>: All users are done, all stats are collected and no further requests will be made.</li><li><em>cancelled</em>: Same as terminated but this phase hasn&rsquo;t been run at all.</li></ul><p>There are different types of phases based on the mode of starting new users:</p><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>constantRate</td><td>The benchmark will start certain number of users according to a schedule regardless of previously started users completing the scenario. This is the open-model.</td></tr><tr><td>increasingRate</td><td>Similar to <code>constantRate</code> but ramps up the number of started users throughout the execution of the phase.</td></tr><tr><td>decreasingRate</td><td>The same as <code>increasingRate</code> but requires <code>initialUsersPerSec</code> > <code>targetUsersPerSec</code>.</td></tr><tr><td>atOnce</td><td>All users are be started when the phase starts running and once the scenario is completed the users won&rsquo;t retry the scenario.</td></tr><tr><td>always</td><td>There is fixed number of users and once the scenario is completed the users will start executing the scenario from beginning. This is called a closed-model and is similar to the way many benchmarks with fixed number of threads work.</td></tr><tr><td>noop</td><td>This phase cannot have any scenario (or forks). It might be useful to add periods of inactivity into the benchmark.</td></tr></tbody></table><p>See the example of phases configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># Over one minute ramp the number of users started each second from 1 to 100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>rampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># We expect at most 200 users being active at one moment - see below</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxSessions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>200</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>1m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># After rampUp is finished, run for 5 minutes and start 100 new users each second</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>steadyState</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxSessions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>200</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># If some users get stuck, forcefully terminate them after 6 minutes from the phase start</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxDuration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>6m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># 2 minutes after the benchmark has started spawn 5 users constantly doing something for 2 minutes</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>outOfBand</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>always</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>final</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Do something at the end: make sure that both rampUp and steadyState are terminated</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfterStrict</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>rampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>steadyState</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>These properties are common for all types of phases:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>startTime</td><td>Time relative to benchmark start when this phase should be scheduled. In other words, it&rsquo;s the earliest moment when it could be scheduled, other conditions (below) may delay that even further.</td></tr><tr><td>startAfter</td><td>Phases that must be <em>finished</em> before this phase can start. You can use either single phase name, list of phases or a <a href=#iterations>reference to certain iteration</a>.</td></tr><tr><td>startAfterStrict</td><td>Phases that must be <em>terminated</em> before this phase can start. Use the same syntax as for <code>startAfter</code>.</td></tr><tr><td>duration</td><td>Intended duration for the phase (must be defined but for the <code>atOnce</code> type). After this time elapses no new sessions will be started; there might be some running sessions still executing operations, though.</td></tr><tr><td>maxDuration</td><td>After this time elapses all sessions are forcefully terminated.</td></tr><tr><td>isWarmup</td><td>This marker property is propagated to results JSON and allows the reporter to hide some phases by default.</td></tr><tr><td>maxUnfinishedSessions</td><td>Maximum number of session that are allowed to be open when the phase <em>finishes</em>. When there are more open sessions all the other sessions are cancelled and the benchmark is terminated. Unlimited by default.</td></tr><tr><td>maxIterations</td><td>Maximum number of <a href=#iterations>iterations</a> this phase will be scaled to. More about that below.</td></tr><tr><td><a href=/docs/user-guide/benchmark/scenario/>scenario</a></td><td>The scenario this phase should execute.</td></tr><tr><td><a href=#forks>forks</a></td><td>See forks section below.</td></tr></tbody></table><p>Below are properties specific for different phase types:</p><ul><li><code>atOnce</code>:<ul><li><code>users</code>: Number of users started at the start of the phase.</li></ul></li><li><code>always</code>:<ul><li><code>users</code>: Number of users started at the start of the phase. When a user finishes it is immediatelly restarted (any pause must be part of the scenario).</li></ul></li><li><code>constantRate</code>:<ul><li><code>usersPerSec</code>: Number of users started each second.</li><li><code>variance</code>: Randomize delays between starting users following the <a href=https://en.wikipedia.org/wiki/Exponential_distribution>exponential distribution</a>. That way the starting users behave as the <a href=https://en.wikipedia.org/wiki/Poisson_point_process>Poisson point process</a>. If this is set to <code>false</code> users will be started with uniform delays. Default is <code>true</code>.</li><li><code>maxSessions</code>: Number of preallocated sessions. This number is split between all agents/executors evenly.</li></ul></li><li><code>increasingRate</code> / <code>decreasingRate</code>:<ul><li><code>initialUsersPerSec</code>: Rate of started users at the beginning of the phase.</li><li><code>targetUsersPerSec</code>: Rate of started users at the end of the phase.</li><li><code>variance</code>: Same as in `constantRate</li><li><code>maxSessions</code>: Same as in <code>constantRate</code>.</li></ul></li></ul><p>Hyperfoil initializes all phases before the benchmark starts, pre-allocating memory for sessions.
In the open-model phases it&rsquo;s not possible to know how many users will be active at the same moment
(if the server experiences a 3-second hiccup and we have 100 new users per second this should be at least 300
as all the users will be blocked). However we need to provide the estimate for memory pre-allocation.
If the estimate gets exceeded the benchmark won&rsquo;t fail nor block new users from starting, but new sessions
will be allocated which might negatively impact results accuracy.</p><p>Properties <code>users</code>, <code>usersPerSec</code>, <code>initialUsersPerSec</code> and <code>targetUsersPerSec</code> can be either a scalar number or <a href=#iterations>scale with iterations</a> using the <code>base</code> and <code>increment</code> components. You&rsquo;ll see an example below.</p><h2 id=forks>Forks<a class=td-heading-self-link href=#forks aria-label="Heading self-link"></a></h2><p>As mentioned earlier, users in each phase execute the same scenario. Often it&rsquo;s convenient
to define the ramp-up and steady-state phases just once: the builders allow to declare such &lsquo;sub-phases&rsquo; called forks.
For all purposes but the benchmark configuration these become regular phases of the same type, duration and dependencies (<code>startAfter</code>, <code>startAfterStrict</code>) as the &lsquo;parent&rsquo; phase but slice the users according to their <code>weight</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>steadyState</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>forks</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>sellShares</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># This phase will start 10 users per second</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>buyShares</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># This phase will start 20 users per second</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>These phases will be later identified as <code>steadyState/sellShares</code> and <code>steadyState/buyShares</code>. Other phases can still
reference <code>steadyState</code> (without suffix) as the dependency: there will be a no-op phase <code>steadyState</code> that starts (becomes <em>running</em>) as soon as both the forks <em>finish</em>, <em>finish</em> immediately and terminate once both the forks <em>terminate</em>.</p><h2 id=iterations>Iterations<a class=td-heading-self-link href=#iterations aria-label="Heading self-link"></a></h2><p>In some types of tests it&rsquo;s useful to repeat given phase with increasing load - we call this concept <em>iterations</em>. In the example below you can see that <code>*usersPerSec</code> are not scalar values; in first iteration the actual value is set to the <code>base</code> value but in each subsequent iteration the value is increased by <code>increment</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>rampUp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>increasingRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Create phases rampUp/000, rampUp/001 and rampUp/002</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># rampUp/000 will go from 1 to 100 users, rampUp will go from 101 to 200 users...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>targetUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># rampUp/001 will start after steadyState/000 finishes</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>steadyState</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>previous</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>1m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>steadyState</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>base</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>increment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># steadyState/000 will start after rampUp/000 finishes</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>phase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rampUp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>iteration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>same</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Similar to forks, there will be a no-op phase <code>rampUp</code> that will start after all
<code>rampUp/xxx</code> phases finish and terminate after these terminate. Also there&rsquo;s an implicit dependency
between consecutive iterations: subsequent iteration won&rsquo;t start until previous iteration <em>terminates</em>.</p><p>The <code>startAfter</code> property in this example uses a relative reference to iteration in another phase. Each reference has these properties:</p><p>| Property | Description |
| &mdash;&mdash;&mdash; | |
| phase | Name of the referenced phase. |
| iteration | Relative number of the iteration; either <code>none</code> (default) which references the top-level phase, <code>same</code> meaning the iteration with same number, or <code>previous</code> with number one lower. |
| fork | Reference to particular fork in the phase/iteration. |</p><p>Iterations can be combined with forks as well - the result name would be e.g. <code>steadyState/000/sellShares</code>.</p><p>Note that the <code>maxSessions</code> parameter is not scaling in iterations: all iterations execute the same
scenario, the execution does not overlap and therefore it is possible to share the pool of sessions.
Therefore you should provide an estimate for the iteration spawning the highest load.</p><h2 id=staircase>Staircase<a class=td-heading-self-link href=#staircase aria-label="Heading self-link"></a></h2><p>Hyperfoil tries to make opinionated decisions, simplifying common types of benchmark setups. That&rsquo;s why it offers a simplified syntax for the scenario where you:</p><ul><li>ramp the load to a certain level</li><li>execute steady state for a while</li><li>ramp it up further</li><li>execute another steady state</li><li>repeat previous two steps over and over</li></ul><p>This is called a <em>staircase</em> as the load increases in a shape of tilted stairs. Phases such benchmark should consist of are automatically created and linked together, using the same scenario/forks.</p><p><code>staircase</code> as a top-level element in the benchmark is mutually exclusive to <code>scenario</code> and <code>phases</code> elements.</p><p>Here is a minimalistic example of such configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>simple benchmark</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>staircase</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>initialRampUpDuration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>steadyStateDuration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rampUpDuration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>initialUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>incrementUsersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>maxIterations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/foo</span></span></span></code></pre></div><p>This element uses these properties:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>initialRampUpDuration</td><td>Duration of the very first phase. Default is no initial ramp-up.</td></tr><tr><td>initialUsersPerSec</td><td>Rate of users starting at the end of the initial ramp-up.</td></tr><tr><td>steadyStateDuration</td><td>Duration of each steady-state phase.</td></tr><tr><td>rampUpDuration</td><td>Duration of each but first ramp-up. Default are no ramp-ups.</td></tr><tr><td>incrementUsersPerSec</td><td>Increase in the rate of started users in each iteration.</td></tr><tr><td>maxIterations</td><td>Maximum number of steady-state iterations.</td></tr><tr><td><a href=/docs/user-guide/benchmark/scenario/>scenario</a></td><td>The scenario to be executed.</td></tr><tr><td><a href=#forks>forks</a></td><td>The forks with different scenarios.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-02d9ad0faa5977a6fc32c799a9f1fe2b>3.2.4 - Scenario</h1><div class=lead>Defines the behavior and sequence of actions that virtual users (VU) perform during a benchmark execution</div><h1 id=scenario>Scenario<a class=td-heading-self-link href=#scenario aria-label="Heading self-link"></a></h1><p>Scenario is a set of <em>sequences</em>. The sequence is a block of sequentially executed <em>steps</em>. Contrary to steps in a sequence the sequences within a scenario do not need to be executed sequentially.</p><p>The scenario defines one or more <code>initialSequences</code> that are enabled from the beginning and other <code>sequences</code> that
must be enabled by any of the previously executed sequences. To be more precise it is not the <em>sequence</em>
that is enabled but a <em>sequence instance</em> as we can run a sequence multiple times in parallel (on different data).
The <code>initialSequences</code> enable one instance of each of the referenced sequence.</p><p>The session keeps a currently executed step for each of the enabled sequence instances. The step can be blocked
(e.g. waiting for a response to come). The session is looping through current steps in each of the enabled
sequence instances and if the step is not blocked, it is executed. There&rsquo;s no guaranteed order in which non-blocked
steps from multiple enabled sequence instances will be executed.</p><p>Here is an example of scenario:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>initialSequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># Enable instance of sequence &#39;wait5seconds&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>next</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>wait5seconds</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>wait5seconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>next</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>logout</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>logout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/logout</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>While this generic approach is useful for complex scenarios with branching logic, simple sequential scenarios can use <code>orderedSequences</code> short-cut enabling sequences in given order:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>orderedSequences</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>wait5seconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>logout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/logout</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This syntax makes the first sequence (<code>login</code> in this case) an initial sequence, adds the subsequent sequences and as the last step of each but the last sequence appends a <code>next</code> step scheduling a new instance of the following sequence.</p><p>To make configuration even more concise you can omit the <code>orderedSequences</code> level and start defining the list of sequences under <code>scenario</code> right away:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>wait5seconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>thinkTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>logout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/logout</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>An exhaustive list of steps can be found in the <a href=/docs/reference/steps/>steps reference</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4857c7f234ff4c339e1e27e0d7c72157>3.2.5 - Variables</h1><div class=lead>Data placeholders within sessions that hold values throughout the execution of a benchmark scenario</div><p>All but the simplest scenarios will use session variables. Hyperfoil sports steps that generate values into these variables (<code>randomInt</code>, <code>randomItem</code>, &mldr;), processors that write data from other sources to variables (<code>store</code>, <code>array</code>) and many places that read variables and use the values to perform some operations (<code>httpRequest.path</code> ) or alter control flow.</p><p>Hyperfoil uses different types of variables (slots in the session) for integer variables and generic objects (commonly strings). When a numeric value is received as a string (e.g. when parsing response headers) and you want to use it in a step that expects exclusively integral values you have to convert it explicitly, e.g. using the <code>stringToInt</code> action. Steps that read values to form a string can usually consume both types of variables, without any need for conversion.</p><p>Besides user-defined variables there are some read-only pseudo-variables that can be used in the scenario as if these were regular variables:</p><table><thead><tr><th>Variable</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>hyperfoil.agent.id</td><td>integer</td><td>Zero-based index of the <a href=/docs/user-guide/benchmark/agents/>agent node</a></td></tr><tr><td>hyperfoil.agents</td><td>integer</td><td>Number of <a href=/docs/user-guide/benchmark/agents/>agent nodes</a> or 1 when running in in-VM mode (standalone or CLI)</td></tr><tr><td>hyperfoil.agent.thread.id</td><td>integer</td><td>Zero-based index of current executor thread within this agent.</td></tr><tr><td>hyperfoil.agent.thread s</td><td>integer</td><td>Number of executor threads running in this agent.</td></tr><tr><td>hyperfoil.global.thread.id</td><td>integer</td><td>Zero-based index of current executor thread across all agents (unique).</td></tr><tr><td>hyperfoil.global.threads</td><td>integer</td><td>Total number of executor threads on all agents.</td></tr><tr><td>hyperfoil.phase.name</td><td>object</td><td>Full name of the currently executed phase (possibly including fork and iteration number).</td></tr><tr><td>hyperfoil.phase.id</td><td>integer</td><td>Index of the currently executed phase.</td></tr><tr><td>hyperfoil.phase.iteration</td><td>integer</td><td>Iteration number of the currently executed phase.</td></tr><tr><td>hyperfoil.run.id</td><td>object</td><td>Identifier of the current run, e.g. <code>0123</code>.</td></tr><tr><td>hyperfoil.session.id</td><td>integer</td><td>Unique index of this virtual user (session). Note that in benchmarks with multiple phases the indices might not be zero-based.</td></tr></tbody></table><h2 id=string-interpolation>String interpolation<a class=td-heading-self-link href=#string-interpolation aria-label="Heading self-link"></a></h2><p>Components that accept string values usually allow you to use a <em>pattern</em> - parts of the string can be replaced in runtime with the value from a session variable. A simple example of pattern would be <code>The quick brown ${wild-animal} jumps over the lazy ${domestic-animal}</code> - variables <code>wild-animal</code> and <code>domestic-animal</code> would get replaced with their respective values.</p><p>When you really want to use <code>${wild-animal}</code> in a value for such component you should escape it with one more dollar sign: <code>This $${variable} won't be replaced</code> will be rendered into <code>This ${variable} won't be replaced</code>.</p><p>There are a few transformations that you can perform with a variable value while interpolating the pattern:</p><ul><li><code>${urlencode:my-variable}</code> will replace characters in the <code>my-variable</code> using <a href=https://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html#encode(java.lang.String,%20java.lang.String)>URLEncoder.encode</a> (using UTF-8 encoding).</li><li><code>${{ '{%05d' }}:my-number}</code> and other formatter strings ending with <code>d</code>, <code>o</code>, <code>x</code> or <code>X</code> will convert an integer variable using <a href=https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html>Formatter</a>.</li><li><code>${replace/&lt;regexp>/&lt;replacement>/&lt;flags>:my-variable}</code> perform Java regexp replacement on <code>my-variable</code> contents. Note that you can use any character after <code>replace</code>, not just <code>/</code> - this becomes the separator between regexp, replacement and flags. The only flags currently supported is <code>g</code> - replacing all occurences of that string (by default only first occurence is replaced).</li></ul><h2 id=sequence-scoped-access>Sequence-scoped access<a class=td-heading-self-link href=#sequence-scoped-access aria-label="Heading self-link"></a></h2><p>When an array or collection is stored in a session variable you can access the individual elements by appending <code>[.]</code> to the variable name, e.g. <code>my-variable[.]</code>. You can see that we don&rsquo;t use the actual index into the array: instead we use current sequence instance index. You can read more about running multiple sequences concurrently in the <a href=/docs/architecture/#scenario-execution>Architecture/Scenario Execution</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ed2898c43a28d1cdf654b47cf571de58>3.2.6 - Templates</h1><div class=lead>Templates in Hyperfoil allow for efficient benchmark parametrization, enabling users to customize benchmarks based on specific execution environments or intended loads</div><p>It is often useful to keep a single benchmark in version control but change parts of it depending on the infrastructure where it is executed or intended load. Since <a href=/blog/releases/release_notes#018-2021-12-16>version 0.18</a> Hyperfoil supports parametrization of the benchmark through templates.</p><p>Inspired by other (more complex) YAML templating systems we decided to use YAML tags to pre-process the YAML. Templating happens even before applying the YAML nodes onto <code>BenchmarkBuilder</code>, therefore it is not possible to do that programmatically or with the serialized form.</p><p>If you are working with CLI or WebCLI there is little difference to regular benchmarks: you <code>upload</code> and <code>edit</code> the benchmark as usual. However it is not possible to auto-detect files before the benchmark is constructed from the template (the reference to a file could be a template, too!), therefore you need to pass all files using option <code>-f</code> to the <code>upload</code>/<code>edit</code> command.</p><p>When the benchmark template is uploaded, upon running it (<code>run mybenchmark</code>) you either pass the parameters using option <code>-P</code> or you are interactively asked to provide those params. The parameters are stored in CLI context and on subsequent invocations of <code>run</code> you don&rsquo;t need to set these. If you want to remove the parameters from the context use option <code>-r</code>/<code>--reset-params</code>. To see both default and current parameters you can use the <code>inspect</code> command.</p><h2 id=param>Param<a class=td-heading-self-link href=#param aria-label="Heading self-link"></a></h2><p>You should use <code>!param</code> to replace single scalar value:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://localhost:8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>param NUM_USERS</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>param DURATION 60s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>In this simple constant-rate benchmark you can customize the number of users starting each second as well as the duration. There&rsquo;s no default for <code>NUM_USERS</code>; you will be asked to provide it when you run the benchmark. On the other hand <code>DURATION</code> has a default value of <code>60s</code> - anything after the space after parameter name counts as the default value.</p><p>Parameters don&rsquo;t have to be upper-case. The identifier is case-sensitive, though.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>run scalar-value-example -PNUM_USERS<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5</span> -PDURATION<span style=color:#ce5c00;font-weight:700>=</span>60s
</span></span></code></pre></div><h2 id=concat>Concat<a class=td-heading-self-link href=#concat aria-label="Heading self-link"></a></h2><p>Sometimes you need to replace only part of a string: <code>!concat</code> will let you do that:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>concat [ &#34;http://&#34;, !param SERVER localhost, &#34;:8080&#34; ]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>60s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>In this example we will customize the host with the concatenation of <code>http://</code>, parameter <code>SERVER</code> with default <code>localhost</code> and <code>:8080</code>. This example uses inline-form of list, though you can use the regular list (one item per line), too.</p><h2 id=foreach>Foreach<a class=td-heading-self-link href=#foreach aria-label="Heading self-link"></a></h2><p>Chances are you need to generate a list based on a param: you can do this using the <code>!foreach</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>foreach</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>items</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com,http://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>separator</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;,&#34;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># comma is the default separator</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>param</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ITEM  </span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># ITEM is the default parameter name</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>do</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex;background-color:#dfdfdf><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>param ITEM</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>60s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This splits the <code>items</code> using the separator regexp and produces a list of values or mappings while the param <code>ITEM</code> is set to one of the values from items list. The example above would result in:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>60s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>You can also set <code>items</code> to a YAML list; in that case the <code>separator</code> is not used:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>myList</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>foreach</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>items</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;A&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>param B, &#34;C&#34;]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>param</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>FOO</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>do</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>param FOO</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The last example with <code>-PB=bar</code> would result in:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>myList</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#000>A</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#000>bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#000>C</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Renaming the param used for iteration can be useful in nested loops: without renaming the inner foreach would shadow the outer one.</p><h2 id=anchors-and-aliases>Anchors and aliases<a class=td-heading-self-link href=#anchors-and-aliases aria-label="Heading self-link"></a></h2><p>YAML has a built-in concept for removing repetitive sections: anchors and aliases. With the templating system you can use that universally throughout the file (in versions before 0.18 the support was limited to forks, scenarios and sequences):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>foo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;hello-world</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>hello</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>world</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>anotherFoo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sayHi</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*hello-world</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>myList</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#8f5902;font-style:italic>*hello-world</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>is interpretted as</p><pre tabindex=0><code>foo:
  hello: world
anotherFoo:
  sayHi:
    hello: world
  myList:
  - hello: world
  - bar
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-eac813dee30aae69c7dc037191fce294>3.2.7 - Hooks</h1><div class=lead>Mechanisms that allow users to run specific scripts or commands automatically before and after executing a benchmark run</div><p>It might be useful to run certain scripts before and after the run, e.g. starting some infrastructure, preloading database, gathering CPU stats during the test and so on. That&rsquo;s why Hyperfoil introduces pre- and post-hooks to the run.</p><p>Some scripts are not specific to the test being run - these should be deployed on controller as files in <code>*root*/hooks/pre/</code> and <code>*root*/hooks/post</code> directories where <em>root</em> is controller&rsquo;s root directory, <code>/tmp/hyperfoil/</code> by default. Each of these directories should contain executable scripts or binaries that will be run in alphabetic order. We strongly suggest using the format <code>00-my-script.sh</code> to set the order using first two digits.</p><p>Kubernetes/Openshift deployments use the same strategy; the only difference is that the <code>pre</code> and <code>post</code> directories are mapped as volumes from a ConfigMap resource.</p><p>Other scripts may be specific to the benchmark executed and therefore you can define them directly in the YAML files. You can either use inline command that will be executed using <code>sh -c your-command --your-options</code> or create a Java class implementing <code>io.hyperfoil.core.hooks.RunHook</code> and register it to be <a href=/docs/getting-started/quickstart8/>loaded as other Hyperfoil extensions</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>my-benchmark</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>pre</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>01-inline</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>curl http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>02-custom</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>my-hook</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>foo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>post</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>99-some-final-hook</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The lists of hooks from controller directories and benchmark are merged; if there&rsquo;s a conflict between two hooks from these two sources the final execution order is not defined (but both get executed).</p><p>In case of inline command execution the <code>stderr</code> output will stay on stderr, <code>stdout</code> will be caputered by Hyperfoil and stored in <code>*rundir*/*XXXX*/hooks.json</code>. As the post-hooks are executed after <code>info.json</code> and <code>all.json</code> get written the output cannot be included inside those files. This order of execution was chosen because it&rsquo;s likely that you will upload these files to a database - yes, using a post-hook.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9324f9d2479e31fa80f07d85df3cc6df>3.2.8 - Ergonomics</h1><div class=lead>Configuration options that enhance usability and automation of benchmarking sessions</div><p>This section hosts only single property at this moment:</p><table><thead><tr><th>Property</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>repeatCookies</td><td>true</td><td>Automatically parse cookies from HTTP responses, store them in session and resend them with subsequent requests.</td></tr><tr><td>userAgentFromSession</td><td>true</td><td>Add user-agent header to each request, holding the agent name and session id.</td></tr><tr><td>autoRangeCheck</td><td>true</td><td>Mark 4xx and 5xx responses as invalid. You can also turn this off in each step.</td></tr><tr><td>stopOnInvalid</td><td>true</td><td>When the session receives an invalid response it does not execute any further steps, cancelling all requests and stopping immediately.</td></tr><tr><td>followRedirect</td><td>NEVER</td><td>Default value for <a href=/docs/reference/steps/step_httpRequest#handler>httpRequest.handler.followRedirect</a>.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7db80c30652628d25611531a8cdce078>3.3 - Examples</h1><div class=lead>Collection of benchmark examples</div><p>If you haven&rsquo;t checked the <a href=/docs/getting-started/quickstart1/>Getting started guide</a> we strongly recommend going there first.</p><p>Below you&rsquo;ll see commented examples of configuration; contrary to the Getting started guide these don&rsquo;t present scenarios but rather list the various configuration options by example.</p><h2 id=httprequest>httpRequest<a class=td-heading-self-link href=#httprequest aria-label="Heading self-link"></a></h2><p>You will most likely use step <code>httpRequest</code> in each of your scenarios, and there&rsquo;s many ways to send a request.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This example should demonstrate various ways to configure one of the most important</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># steps - the httpRequest.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http-requests</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>ergonomics</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># Disable stopping the scenario on 4xx or 5xx response</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>autoRangeCheck</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>jsonBody</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/foo/bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Hyperfoil doesn&#39;t know what&#39;s the content of the body string, if the server</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># requires correct content-type header you have to provide it yourselves</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>headers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>content-type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>application/json</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Here we specify a multi-line string. For more info about multiline strings,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># compacting/chopping of newlines etc. please check out https://yaml-multiline.info/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>        {
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>           &#34;foo&#34; : &#34;bar&#34;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>        }</span><span style=color:#f8f8f8;text-decoration:underline>        
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>formBody</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>myVar &lt;- foobar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/myform</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Here we don&#39;t need to add any headers as the form: knows that you&#39;re sending</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># a HTML form and it can add &#39;content-type: application/x-www-form-urlencoded&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># automatically.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># This will generate body &#39;foo=bar&amp;bar=foobar&amp;goo=foofoobarbar&#39;. Any non-ascii</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># or otherwise illegal characters are correctly URL-encoded.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>foo</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>myVar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>goo</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>pattern</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>foo${myVar}bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>bodyFromFile</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/foo/bar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># This simply loads the file and sends it as the body without any conversion.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># It does not add any headers nor make it a multipart upload as the browser would do.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>fromFile</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usernames.txt</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>customHeaders</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>token &lt;- dGhpcyBpcyBhIG5pY2UgYW5kIHNlY3VyZSB0b2tlbgo=</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>etag &lt;- &#34;ETag received in some previous request&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/secured/page</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Note that HTTP headers are case-insensitive (use your preferred capitalization)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>headers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Headers can be set inline</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>accept</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>text/html</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Session variables are replaced using the pattern syntax</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>authorization</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Bearer ${token}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># Values from session variables can be also loaded using fromVar</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>if-match</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>etag</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>nonDefaultMetric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/cats</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># By default the metric name equals to name of the sequence (&#39;nonDefaultMetric&#39; here).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># We can override that either with a constant value...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>mammals</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>animal</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>cats</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>dogs</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>locusts</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/foo/${animal}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># ... or a regexp switch on the actual authority+path (e.g. example.com:8080/foo/cats).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># If the benchmark uses single (default) HTTP target the authority is omitted.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>metric</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>.*cats -&gt; mammals</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>.*dogs -&gt; mammals</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- -<span style=color:#000>&gt; insects</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>toughSLAs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/index.html</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>status</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#8f5902;font-style:italic># Any request that is not responded with status code will be marked as invalid.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>range</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>200</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># When you need only one SLA you can use mapping without the list (just forget the dash).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>sla</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># This first SLA is evaluated when the phase completes from all requests that happened</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># during the phase.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Errors are connection failures, timeouts, 4xx and 5xx responses</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>errorRatio</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># You can set custom criteria for what is considered valid/invalid as with the status</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># handler above. By default any response with status that is not within 200-399</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># is deemed invalid (as well as error).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>invalidRatio</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>blockedRatio</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>meanResponseTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ms</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># 90% requests should be under 100 ms, only 1% can be over 1 second</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>limits</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>0.9</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ms</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>0.99</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Following SLA is evaluated when all the statistics for the past second arrive,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># accumulating results from the window (last 10 seconds). Therefore it can detect shorter</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># peaks of degraded performance.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>window</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>meanResponseTime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>50</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ms</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Some scenarios need to access multiple HTTP endpoints; following example shows an example configuration for that:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This example manifests running a benchmark against multiple domains</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>more-servers</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>https://hyperfoil.io</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># With HTTPS, most modern servers will negotiate HTTP 2.0 as the application protocol.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Since HTTP 2.0 uses multiple streams over single TCP (TLS in this case) connection</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># you can usually set lower number of connections.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># You may want to route requests through a proxy/load balancer or simply use a domain</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># that is not resolvable. Configuration below will actually send the requests to addresses</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># set below, but the requests will use in the &#39;host: foobar.com&#39; in the headers</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># and in SNI if this goes over TLS (HTTPS).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://foobar.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Hyperfoil will split the connections evenly to the defined addresses</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># (an entry is considered single address for this purpose even if DNS registers</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># multiple IP addresses for the hostname).</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>addresses</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># Both hostnames and IP addresses are allowed</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>proxy.my-locally-defined-domain.test</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#0000cf;font-weight:700>192.168.1.10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#8f5902;font-style:italic># You can set a custom port as well</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#0000cf;font-weight:700>192.168.1.11</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>8080</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Authority is the combination of hostname and port.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>authority</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hyperfoil.io:443</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/docs</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hostname</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>foobar.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># The target must be configured in the &#39;http&#39; section above; the correctness</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># is usually validated when parsing/building the benchmark but sometimes it is</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># only possible at runtime, potentially resulting in errors during execution.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>authority</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${hostname}:80</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/foo</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-b2c7826362a5f4e84154bb1e2badfada>3.4 - Troubleshooting</h1><div class=lead>Common technical issues that you could hit during benchmark development</div><h2 id=it-doesnt-work-can-you-help-me>It doesn&rsquo;t work. Can you help me?<a class=td-heading-self-link href=#it-doesnt-work-can-you-help-me aria-label="Heading self-link"></a></h2><p>The first step to identifying any issue is getting a verbose log - setting logging level to TRACE. How exactly you do that depends on the way you deploy Hyperfoil:</p><ol><li><p>If you use CLI and the <code>start-local</code> command, just run it as <code>start-local -l TRACE</code> which sets the default logging level. You&rsquo;ll find the log in <code>/tmp/hyperfoil.local.log</code> by default.</p></li><li><p>If you run Hyperfoil manually in <a href=/docs/user-guide/installation/start_manual/>standalone mode</a> (non-clustered) the agent will run in the same JVM as the controller. You need to add <code>-Dlog4j.configurationFile=file:///path/to/log4j2-trace.xml</code> option when starting <code>standalone.sh</code>. If you start Hyperfoil through Ansible the same is set using <code>hyperfoil_log_config</code> variable.</p></li><li><p>If you run Hyperfoil in clustered mode, the failing code is probably in the agents. You need to pass the logging settings to agents using the deployer; with <a href=/docs/user-guide/benchmark/agents/#ssh-deployer>SSH deployer</a> you need to add <code>-Dlog4j.configurationFile=file:///path/to/log4j2-trace.xml</code> to the <code>extras</code> property, in <a href=/docs/user-guide/benchmark/agents/#kubernetesopenshift-deployer>Kubernetes/Openshift</a> there is the <code>log</code> option that lets you set the logging configuration through a config-map.</p></li></ol><p>An example of Log4j2 configuration file with TRACE logging on is here:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#8f5902;font-style:italic>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;Configuration&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>&lt;Appenders&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;Console</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;CONSOLE&#34;</span> <span style=color:#c4a000>target=</span><span style=color:#4e9a06>&#34;SYSTEM_OUT&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>&lt;PatternLayout</span> <span style=color:#c4a000>pattern=</span><span style=color:#4e9a06>&#34;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %m%n&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;/Console&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>&lt;/Appenders&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>&lt;Loggers&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;Root</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;TRACE&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>&lt;AppenderRef</span> <span style=color:#c4a000>ref=</span><span style=color:#4e9a06>&#34;CONSOLE&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;/Root&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>&lt;/Loggers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/Configuration&gt;</span>
</span></span></code></pre></div><p>TRACE-level logging can be very verbose to a point where it will pose a bottleneck. It&rsquo;s recommended to isolate your problem at lower request rate if that&rsquo;s possible.</p><p>If you need to print variable values for debugging, check out <a href=/docs/reference/steps/step_log>log step</a>.</p><h2 id=my-phase-fails-with-sla-failure-progress-was-blocked-waiting-for-a-free-connection-hint-increase-httpsharedconnections>My phase fails with SLA failure &lsquo;Progress was blocked waiting for a free connection. Hint: increase http.sharedConnections.&rsquo;<a class=td-heading-self-link href=#my-phase-fails-with-sla-failure-progress-was-blocked-waiting-for-a-free-connection-hint-increase-httpsharedconnections aria-label="Heading self-link"></a></h2><p>By default Hyperfoil uses single connection to each HTTP(s) host; the default is set so low to force you thinking about connection limits early during test development. If you don&rsquo;t override this value as in:</p><pre tabindex=0><code>http:
  host: http://hyperfoil.io
  sharedConnections: 1000
</code></pre><p>you get the error above, as the default SLA does not allow a session (virtual user) to be blocked due to not being able to acquire a connection from the connection pool immediatelly. If you can&rsquo;t increase number of connections (or use HTTP2 that allows multiple requests to multiplex within single connection), you can set</p><pre tabindex=0><code>- httpRequest:
    sla:
    - blockedRatio: 1000 # any value big enough
</code></pre><p>on each request to drop the default SLA. The <code>blockedRatio</code> value is a threshold ratio between time spent waiting for a free connection and waiting for the response.</p><p>You could also wonder why the sessions are missing a connection when the scenario should guarantee there&rsquo;s always a free connection e.g. when using <code>always</code> phase type with same number of users and connections. However this may not hold when the connection is closed (either explicitly or after receiving a 5xx response) - while Hyperfoil starts replacing that connection immediatelly it takes a moment. If you expects connections to be closed add a few (10%) extra connections. Another reason could be poor balancing of connections and sessions to threads (should be gone in version 0.8).</p><h2 id=when-i-set-host-header-for-http-request-i-get-warnings>When I set &lsquo;Host&rsquo; header for HTTP request I get warnings<a class=td-heading-self-link href=#when-i-set-host-header-for-http-request-i-get-warnings aria-label="Heading self-link"></a></h2><p>Hyperfoil automatically inserts the &lsquo;Host&rsquo; header to each request and when you try to override that for certain request it emits a warning:</p><pre tabindex=0><code>Setting `host` header explicitly is not recommended. Use the HTTP host and adjust actual target using `addresses` property.
</code></pre><p>With this warning on we don&rsquo;t inject the header as it <em>might</em> be intended, e.g. when the target server does not parse headers in a case-sensitive way (as it should!) and you have to use certain case. However, if you want to run your requests to a different IP than the host resolves to (e.g. hit <code>127.0.0.1:8080</code> with <code>Host: example.com</code>) you should rather use</p><pre tabindex=0><code>http:
  host: http://hyperfoil.io
  addresses:
  - 127.0.0.1:8080
</code></pre><h2 id=when-i-use-a-session-variable-i-am-seeing-the-error-variable-foo-is-not-set>When I use a session variable I am seeing the error &ldquo;Variable foo is not set!&rdquo;<a class=td-heading-self-link href=#when-i-use-a-session-variable-i-am-seeing-the-error-variable-foo-is-not-set aria-label="Heading self-link"></a></h2><pre tabindex=0><code>Errors:
in-vm: Variable foo is not set!
</code></pre><p>On occasion a scenario step has been seen to execute out of sequence. To ensure the variable is set beforehand use <code>initialSequences</code> with the step that populates the variable.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-17b81e141eb8ac7e0af38775813b1152>4 - How To</h1><div class=lead>A collection of practical advices for common things in Hyperfoil</div><p>This section contains practical advices for common things you could want to use in a benchmark.</p></div><div class=td-content><h1 id=pg-8ef01f0a946d4d4dd93646230da342ee>4.1 - Benchmark schema support</h1><div class=lead>How to make your life easier while building your own benchmarks</div><p>For your convenience we recommend using editor with YAML validation against JSON schema; you can point your editor to <code>docs/schema.json</code>. We can recommend <a href=https://code.visualstudio.com/>Visual Studio Code</a>
with <a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml">redhat.vscode-yaml</a> plugin.</p><p>You need to edit settings file to map benchmark configuration files (with <code>.hf.yaml</code> extension) to the schema, adding:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#4e9a06>&#34;yaml.schemas&#34;</span> <span style=color:#a40000>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;file:///path/to/hyperfoil-distribution/docs/schema.json&#34;</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/*.hf.yaml&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>,</span>
</span></span></code></pre></div><p>Note that you can also directly point to the hosted JSON schema definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#4e9a06>&#34;yaml.schemas&#34;</span> <span style=color:#a40000>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;https://hyperfoil.io/schema.json&#34;</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/*.hf.yaml&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>,</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-56f7093d58f5923964e6c64ce9339c99>4.2 - Using credentials</h1><p>Hyperfoil benchmarks can refer to external files. When you use the <code>upload</code> command in CLI the files are automatically attached the the benchmark YAML (relative paths are resolved relative to this file). Later on when editing the file you can choose to re-upload some of these. Once the benchmark is <a href=/docs/architecture/#building-the-scenario>built</a> the files are loaded to the in-memory representation - Hyperfoil won&rsquo;t access these files during runtime. With clustered benchmarks these files don&rsquo;t need to be on the agents either - the controller sends serialized in-memory representation to the agents and that contains everything needed for the actual execution.</p><p>When testing a workload you will likely skip user registration and come with a list of username+password keys. A convenient way is to keep these in a CSV file that looks like</p><pre tabindex=0><code>&#34;johny&#34;,&#34;my-5ec12eT_pwd!&#34;
&#34;bob&#34;,&#34;superlongpassphrasethatnobodywillguess&#34;
</code></pre><p>We will create a <a href=/docs/reference/steps/step_randomCsvRow>step</a> that selects a random line from such file and stores it in session variables <code>username</code> and <code>password</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>randomCsvRow</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>credentials.csv</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># Path relative to the benchmark</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>columns</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The <code>columns</code> property has a mapping of zero-based indices of columns in the CSV file. This way you can use a file with some extra information.</p><p>In case you don&rsquo;t need to split lines into separate variables you can use the <a href=/docs/reference/steps/step_randomItem>randomItem</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>randomItem</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usernames.txt</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>We have selected the credentials, now it&rsquo;s time to execute the login. When users submit a form on HTML page this usually results in a <code>POST</code> request with <code>content-type: application/x-www-form-urlencoded</code> header and the form contents encoded in the request body. Hyperfoil lets you specify this conveniently using the <a href=/docs/reference/steps/step_httpRequest#bodyformlist-of-mappings>form</a> body formatter:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>action</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>log-me-in-please</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Successful response from the server carries a token in most cases but the actual method can vary. If the server sets a cookie Hyperfoil automatically records this and sends it on subsequent requests (this can be switched off using <a href=/docs/user-guide/benchmark/ergonomics/>ergonomics.repeatCookies</a>). If the server sends the token in a response header, e.g. <code>x-token</code> you can store it using the header handler into the <code>token</code> session variable:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>header</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>filter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>header</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;x-token&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>processor</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>store</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>token</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>If the server returns this token as a part of JSON object - e.g <code>{ "token": "abc123" }</code> you would process response body using the <a href=/docs/reference/steps/processor_json>json processor</a> in body handler:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>json</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;.token&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>token</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h2 id=runnable-example>Runnable example<a class=td-heading-self-link href=#runnable-example aria-label="Heading self-link"></a></h2><p>Below you can find a runnable example that we have prepared for you and that you can download <a href=/benchmarks/credentials.hf.yaml>here</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>credentials</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>https://localhost:8084</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>use-cookie</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Make sure that without the cookie (before login) the request fails with 401</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>before-login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/howto/credentials/secure</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>autoRangeCheck</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># Don&#39;t fail with 4xx-5xx</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>status</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>range</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>401</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>login-with-form</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomCsvRow</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>credentials.csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>columns</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>POST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/howto/credentials/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>fromVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># Here we already have the cookie set to a httpRequest will succeed</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>after-login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/howto/credentials/secure</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>use-bearer-token</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>atOnce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>request-login-page</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#8f5902;font-style:italic># This first request will response with WWW-Authenticate header</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/howto/credentials/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>autoRangeCheck</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>status</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>range</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>401</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>login-with-basic-auth</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>randomCsvRow</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>credentials.csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>columns</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>username</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>template</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>pattern</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${username}:${password}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>toVar</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>concatenated</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/howto/credentials/login</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>headers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#8f5902;font-style:italic># Our example runs over HTTP2 and that mandates lower-case header names</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>authorization</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Basic ${base64encode:concatenated}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># With Authorization header the server will reply with token</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># and redirect us to the secured page. `httpRequest` implements</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># automatic redirection through `handler.followRedirect` but that</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#8f5902;font-style:italic># wouldn&#39;t send the token, so we&#39;ll do that manually</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>header</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span>- <span style=color:#204a87;font-weight:700>filter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>header</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>x-token</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>processor</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span>- <span style=color:#204a87;font-weight:700>store</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>token</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>status</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>range</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>30x</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>after-login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/howto/credentials/secure</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>headers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>authorization</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Bearer ${token}</span></span></span></code></pre></div><p>There are two scenarios: <strong>use-cookie</strong> performs the login using the POST from form as shown above and then keeps the secret token in a cookie; <strong>use-bearer-token</strong> performs HTTP Basic authentication, receives a token in headers and then uses that for HTTP Bearer authentication.</p><p>You should start with running a <a href=https://github.com/Hyperfoil/hyperfoil-examples/tree/main/howto/credentials>server with mocked responses</a> in one console:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -p 8084:8084 quay.io/hyperfoil/hyperfoil-examples
</span></span></code></pre></div><p>In second console start the CLI with in-vm controller (or standalone and open the WebCLI in your browser). We are running in host-network mode to be able to reach localhost from within the container.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm -it --net host quay.io/hyperfoil/hyperfoil cli
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local
</span></span><span style=display:flex><span>Starting controller in default directory <span style=color:#ce5c00;font-weight:700>(</span>/tmp/hyperfoil<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>Controller started, listening on 127.0.0.1:35243
</span></span><span style=display:flex><span>Connecting to the controller...
</span></span><span style=display:flex><span>Connected to 127.0.0.1:35243!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ upload https://hyperfoil.io/benchmarks/credentials.hf.yaml
</span></span><span style=display:flex><span>Loaded benchmark credentials, uploading...
</span></span><span style=display:flex><span>... <span style=color:#204a87;font-weight:700>done</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0000</span>
</span></span><span style=display:flex><span>Run 0000, benchmark credentials
</span></span><span style=display:flex><span>Agents: in-vm<span style=color:#ce5c00;font-weight:700>[</span>STOPPED<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2022/10/27 15:48:39.271    Terminated: 2022/10/27 15:48:39.301
</span></span><span style=display:flex><span>NAME              STATUS      STARTED       REMAINING  COMPLETED     TOTAL DURATION             DESCRIPTION&lt;/span&gt;
</span></span><span style=display:flex><span>use-bearer-token  TERMINATED  15:48:39.271             15:48:39.301  <span style=color:#0000cf;font-weight:700>30</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>31</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  <span style=color:#0000cf;font-weight:700>1</span> users at once
</span></span><span style=display:flex><span>use-cookie        TERMINATED  15:48:39.271             15:48:39.300  <span style=color:#0000cf;font-weight:700>29</span> ms <span style=color:#ce5c00;font-weight:700>(</span>exceeded by <span style=color:#0000cf;font-weight:700>30</span> ms<span style=color:#ce5c00;font-weight:700>)</span>  <span style=color:#0000cf;font-weight:700>1</span> users at once
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run <span style=color:#0000cf;font-weight:700>0000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PHASE             METRIC                 THROUGHPUT   REQUESTS  MEAN     p50      p90      p99      p99.9    p99.99   TIMEOUTS  ERRORS  BLOCKED  2xx  3xx  4xx  5xx  CACHE&lt;/span&gt;
</span></span><span style=display:flex><span>use-bearer-token  after-login            33.33 req/s         <span style=color:#0000cf;font-weight:700>1</span>  3.79 ms  3.80 ms  3.80 ms  3.80 ms  3.80 ms  3.80 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>use-bearer-token  login-with-basic-auth  33.33 req/s         <span style=color:#0000cf;font-weight:700>1</span>  4.57 ms  4.59 ms  4.59 ms  4.59 ms  4.59 ms  4.59 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>use-bearer-token  request-login-page     33.33 req/s         <span style=color:#0000cf;font-weight:700>1</span>  7.49 ms  7.50 ms  7.50 ms  7.50 ms  7.50 ms  7.50 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>use-cookie        after-login            34.48 req/s         <span style=color:#0000cf;font-weight:700>1</span>  3.69 ms  3.70 ms  3.70 ms  3.70 ms  3.70 ms  3.70 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>use-cookie        before-login           34.48 req/s         <span style=color:#0000cf;font-weight:700>1</span>  9.60 ms  9.63 ms  9.63 ms  9.63 ms  9.63 ms  9.63 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>use-cookie        login-with-form        34.48 req/s         <span style=color:#0000cf;font-weight:700>1</span>  4.96 ms  4.98 ms  4.98 ms  4.98 ms  4.98 ms  4.98 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns    <span style=color:#0000cf;font-weight:700>1</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span></code></pre></div><p>The list of possibilities is endless; if your use case does not fit any of the above please check out the <a href=/docs/reference/processors/>reference</a>. You can also have a look at a full example in the <a href=/blog/2021/01/25/beginners-guide-to-hyperfoil-part-2#login-workflow>second part of the Beginner&rsquo;s Guide</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3f77c8d8a47e2db5d7bd64ecc8baa77a>5 - Migration</h1><div class=lead>Set of guides to migrate from other tools to Hyperfoil</div><p>This section includes some guides to make the migration from other benchmarking tools easier.</p></div><div class=td-content><h1 id=pg-43723ed78ffd3b1e71ee41626a792212>5.1 - Migrating from wrk/wrk2</h1><div class=lead>How and why should I migrate from wrk/wrk2 to Hyperfoil?</div><p>Both Will Glozer&rsquo;s <a href=https://github.com/wg/wrk>wrk</a> and Gil Tene&rsquo;s <a href=https://github.com/giltene/wrk2>wrk2</a> are great tools but maybe you&rsquo;ve realized that you need more functionalities, need to hit more endpoints in parallel or simply have to scale horizontally to more nodes. Hyperfoil offers an adapter that tries to mimic the behaviour of these load drivers. This guide will show how to use these and translate the test into a full-fledged Hyperfoil benchmark.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Please make sure that you are using Hyperfoil version >= <code>0.22</code></div><p>Let&rsquo;s start with this command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>./wrk -c <span style=color:#0000cf;font-weight:700>10</span> -t <span style=color:#0000cf;font-weight:700>2</span> -d 10s -H <span style=color:#4e9a06>&#39;accept: application/json&#39;</span> http://example.com
</span></span></code></pre></div><p>that will produce something like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>Running 10s <span style=color:#204a87>test</span> @ http://example.com
</span></span><span style=display:flex><span>  <span style=color:#0000cf;font-weight:700>2</span> threads and <span style=color:#0000cf;font-weight:700>10</span> connections
</span></span><span style=display:flex><span>  Thread Stats   Avg      Stdev     Max   +/- Stdev
</span></span><span style=display:flex><span>    Latency    97.64ms  489.01us 101.11ms   73.66%
</span></span><span style=display:flex><span>    Req/Sec    50.73      4.81    80.00     91.92%
</span></span><span style=display:flex><span>  <span style=color:#0000cf;font-weight:700>1010</span> requests in 10.01s, 1.53MB <span style=color:#204a87>read</span>
</span></span><span style=display:flex><span>Requests/sec:    100.85
</span></span><span style=display:flex><span>Transfer/sec:    156.91KB
</span></span></code></pre></div><p>You can do exactly the same thing with Hyperfoil, either using <code>bin/wrk.sh</code>/<code>bin/wrk2.sh</code> or using container:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run --rm quay.io/hyperfoil/hyperfoil wrk -c <span style=color:#0000cf;font-weight:700>10</span> -t <span style=color:#0000cf;font-weight:700>2</span> -d 10s  -H <span style=color:#4e9a06>&#39;accept: application/json&#39;</span> http://example.com/
</span></span></code></pre></div><p>that will generate something like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>Running 10s <span style=color:#204a87>test</span> @ http://example.com/
</span></span><span style=display:flex><span>  <span style=color:#0000cf;font-weight:700>2</span> threads and <span style=color:#0000cf;font-weight:700>10</span> connections
</span></span><span style=display:flex><span>  Thread Stats   Avg      Stdev     Max   +/- Stdev
</span></span><span style=display:flex><span>    Latency    98.61ms    9.58ms 402.65ms   98.92%
</span></span><span style=display:flex><span>    Req/Sec   101.70      3.35   110.00     80.00
</span></span><span style=display:flex><span>  <span style=color:#0000cf;font-weight:700>1017</span> requests in 10.023s,   1.59MB <span style=color:#204a87>read</span>
</span></span><span style=display:flex><span>Requests/sec: 101.47
</span></span><span style=display:flex><span>Transfer/sec: 162.84kB
</span></span></code></pre></div><p>Not much of a difference as you can see. Note that if you want to test something in localhost you&rsquo;d need to use host networking (<code>--net host</code>). You could also run it from CLI using the <code>wrk</code>/<code>wrk2</code> command. In that case you&rsquo;d either connect to a controller using the <code>connect</code> command or start a controller inside the CLI with <code>start-local</code> command. When the (remote) controller is clustered you can use <code>-A</code>/<code>--agent</code> option (e.g. <code>-Amy-agent=host=my-server.my-company.com,port=22</code>) to drive the load from a different node.</p><p>Unlike original tools we support HTTP2 - this is disabled by default and you need to pass <code>--enable-http2</code> to allow it explicitly.</p><p>When you run the command from the CLI the benchmark stays in controller, so you can have a look on the statistics the same way as with any other Hyperfoil run (<code>stats</code>, <code>report</code>, <code>compare</code>, &mldr;). You can also execute another run of the benchmark and observe the status as it progresses:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>podman run -it --rm quay.io/hyperfoil/hyperfoil cli
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil<span style=color:#ce5c00;font-weight:700>]</span>$ start-local --quiet
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ wrk -t <span style=color:#0000cf;font-weight:700>2</span> -c <span style=color:#0000cf;font-weight:700>10</span> -H <span style=color:#4e9a06>&#39;accept: application/json&#39;</span> -d 10s http://example.com
</span></span><span style=display:flex><span>Running 10s <span style=color:#204a87>test</span> @ http://example.com
</span></span><span style=display:flex><span>  <span style=color:#0000cf;font-weight:700>2</span> threads and <span style=color:#0000cf;font-weight:700>10</span> connections
</span></span><span style=display:flex><span>  Thread Stats   Avg      Stdev     Max   +/- Stdev
</span></span><span style=display:flex><span>    Latency    97.99ms  618.36?s 101.19ms   62.63%
</span></span><span style=display:flex><span>    Req/Sec   102.50      2.94   110.00     90.00
</span></span><span style=display:flex><span>  <span style=color:#0000cf;font-weight:700>1025</span> requests in 10.006s,   1.61MB <span style=color:#204a87>read</span>
</span></span><span style=display:flex><span>Requests/sec: 102.44
</span></span><span style=display:flex><span>Transfer/sec: 164.41kB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ stats
</span></span><span style=display:flex><span>Total stats from run <span style=color:#0000cf;font-weight:700>0000</span>
</span></span><span style=display:flex><span>Extensions <span style=color:#ce5c00;font-weight:700>(</span>use -e to show<span style=color:#ce5c00;font-weight:700>)</span>: transfer
</span></span><span style=display:flex><span>PHASE        METRIC   THROUGHPUT    REQUESTS  MEAN      p50       p90        p99        p99.9      p99.99     TIMEOUTS  ERRORS  BLOCKED  2xx   3xx  4xx  5xx  CACHE
</span></span><span style=display:flex><span>calibration  request   96.58 req/s       <span style=color:#0000cf;font-weight:700>608</span>  99.39 ms  98.57 ms  100.14 ms  117.96 ms  406.85 ms  406.85 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns   <span style=color:#0000cf;font-weight:700>608</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87>test</span>         request  101.44 req/s      <span style=color:#0000cf;font-weight:700>1025</span>  97.99 ms  98.04 ms   99.09 ms  100.14 ms  101.19 ms  101.19 ms         <span style=color:#0000cf;font-weight:700>0</span>       <span style=color:#0000cf;font-weight:700>0</span>     <span style=color:#0000cf;font-weight:700>0</span> ns  <span style=color:#0000cf;font-weight:700>1015</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>    <span style=color:#0000cf;font-weight:700>0</span>      <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>hyperfoil@in-vm<span style=color:#ce5c00;font-weight:700>]</span>$ run wrk
</span></span><span style=display:flex><span>Started run <span style=color:#0000cf;font-weight:700>0001</span>
</span></span><span style=display:flex><span>Run 0001, benchmark wrk
</span></span><span style=display:flex><span>Agents: in-vm<span style=color:#ce5c00;font-weight:700>[</span>READY<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>Started: 2022/09/08 17:59:05.283
</span></span><span style=display:flex><span>NAME  STATUS   STARTED       REMAINING      COMPLETED  TOTAL DURATION  DESCRIPTION
</span></span><span style=display:flex><span><span style=color:#204a87>test</span>  RUNNING  17:59:11.372  <span style=color:#0000cf;font-weight:700>88</span> ms <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>88</span> ms<span style=color:#ce5c00;font-weight:700>)</span>                             <span style=color:#0000cf;font-weight:700>10</span> users always
</span></span></code></pre></div><p>Under the hood the command creates a benchmark that should reflect what the original <code>wrk</code>/<code>wrk2</code> implementation does. These do not have a YAML representation so you cannot view it with <code>info</code>/<code>edit</code> but you can use <code>inspect</code> to dig deep into the programmatic representation. The source YAML for the <code>wrk</code> invocation above would look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>wrk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>threads</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -t</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>http</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http://example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>allowHttp2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>sharedConnections</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -c</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>ergonomics</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>repeatCookies</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>userAgentFromSession</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>calibration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>always</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -c</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>6s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxDuration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>70s</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># This is duration + default timeout 60s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>&amp;scenario</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>request</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>httpRequest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>GET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>60s</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option --timeout</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>headers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>accept</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>application/json</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -H</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>handler</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>rawBytes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># Handler to record the data for &#39;Transfer/sec&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>always</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -c</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -d</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxDuration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -d</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>startAfterStrict</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>calibration</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>scenario</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>*scenario</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>As you can see there&rsquo;s a &lsquo;calibration&rsquo; phase - <code>wrk</code> implementations might use it for different purposes but in our case it&rsquo;s convenient at least for a basic JVM warmup. The &rsquo;test&rsquo; phase starts only when all requests from calibration phase complete. The scenario and number of users is identical, though.</p><p>With <code>wrk2</code> we use open model, you have to set request rate using the <code>-R</code> option - with <code>-R 20</code>; the phases would look like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>phases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>calibration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>constantRate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>usersPerSec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>variance</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>maxSessions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>300</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># request rate x 15</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># option -d</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#8f5902;font-style:italic># ...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Hopefully this gives you some headstart and you can get familiar with Hyperfoil before diving into the details of benchmark syntax.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b00a88a07ceb21b1a83e5822e0c86c1d>6 - Reference</h1><div class=lead>List of all possible steps and handlers that can be used for the benchmark development</div><p>Before exploring this reference you should be familiar with the <a href=/docs/user-guide/benchmark/>basic structure of a benchmark</a>. If you&rsquo;re not sure what is the difference between the phase, scenario and sequence check out the <a href=/docs/overview/concepts/>concepts in user guide</a>.</p><p>This reference lists all the steps and handlers used in a scenario. The lists below are not finite; you can also easily <a href=/docs/getting-started/quickstart8/>develop and use your own components</a>, but Hyperfoil provides generic components for the most common tasks out of the box.</p><p>There are few generic types of components:</p><ul><li><a href=/docs/reference/steps/>steps</a></li><li><a href=/docs/reference/actions/>actions</a></li><li><a href=/docs/reference/processors/>processors</a></li></ul><p>This documentation is auto-generated from Javadoc in source code, explaining format for each key-value pair in benchmark YAML. If there is an issue with these docs (e.g. property showing no description) please <a href=https://github.com/Hyperfoil/Hyperfoil/issues/new>file an issue on GitHub</a>.</p><p>This is the basic structure of the docs:</p><hr><p>EXAMPLE</p><p>Example description.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Key</td><td>Class</td><td>Explanation for the value</td></tr></tbody></table><hr><p>YAML syntax</p><pre tabindex=0><code>EXAMPLE:
  Key: Value
</code></pre><p>For example, the POST definition in <a href=/docs/reference/steps/step_httpRequest>httpRequest step</a> looks like this:</p><hr><p>POST</p><p>Generic builder for generating a string.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use pattern replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><hr><p>YAML syntax</p><pre tabindex=0><code>POST:
  pattern: /user/${userId}/info
</code></pre><p>You might be wondering why the documentation above does not mention anything about issuing a HTTP request. In fact the top-level <code>POST</code> property <a href=/docs/reference/steps/step_httpRequest>httpRequest</a> says &ldquo;Issue HTTP POST request to given path.&rdquo; but the <code>POST()</code> method returns a generic string builder; this generic builder is used as the path for the HTTP request with POST method.</p><p>If the &rsquo;type&rsquo; is not a scalar value, the key in &lsquo;property&rsquo; works as a link to further property mapping. It&rsquo;s also possible that the property has multiple options, e.g. accepting both property mapping and list of values.</p><p>For brevity some components have inline definition like this:</p><hr><p>SET</p><p>Set variable in session to certain value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><hr><p>YAML syntax</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>myVar &lt;- &#34;This is my value&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p> </p><p>Hyperfoil defines automatically generated <a href=/schema.json>JSON schema</a> for the benchmark; you can <a href=/docs/howtos/editor/>use that in Visual Studio Code</a> to automatically check the YAML syntax.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e8ca74a8865e8d0c1ff4a37fd5118753>6.1 - Steps</h1><p>Steps are the basic building blocks that form each sequence of a scenario, similar to statements in a programming language. Steps are potentially blocking (the sequence cannot continue with next step until previous one finishes).</p><p>Note that every <a href=/docs/reference/actions/>action</a> can be also used as a step that simply never blocks, as actions do not require any extra input.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c77477011b0f09119502d86926c52b00>6.1.1 - addItem</h1><div class=lead>Appends value to an array stored in another variable.</div><p>Appends value to an array stored in another variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>toVar</td><td>String</td><td>Destination variable with the array.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-9faf2a18cd5e5b79d4dc9b7b924e9f11>6.1.2 - addToInt</h1><div class=lead>Add value to integer variable in the session.</div><p>Add value to integer variable in the session.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Accepting one of: <code>var++</code>, <code>var&ndash;</code>, <code>var += value</code>, <code>var -= value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>orElseSetTo</td><td>int</td><td>If the variable is currently not set, set it to this value instead of addition.</td></tr><tr><td>value</td><td>int</td><td>Value added (can be negative).</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ca186cdb91708d06b2d185d84109091d>6.1.3 - addToSharedCounter</h1><div class=lead>Adds value to a counter shared by all sessions in the same executor.</div><p>Adds value to a counter shared by all sessions in the same executor.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use on of: <code>counter++</code>, <code>counter&ndash;</code>, <code>counter += &lt;value></code>,</td></tr><tr><td><code>counter -= &lt;value></code></td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>operator</td><td>enum</td><td>Operation to perform on the counter. Default is <code>ADD</code>.<br>Options:{::nomarkdown}<ul><li><code>ADD</code></li><li><code>SUBTRACT</code></li></ul>{:/}</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b709ee24ce9213297c37fd215ea00382>6.1.4 - awaitAllResponses</h1><div class=lead>Block current sequence until all requests receive the response.</div><p>Block current sequence until all requests receive the response.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ed9a9588c069d1deaca663aa73639f75>6.1.5 - awaitDelay</h1><div class=lead>Block this sequence until referenced delay point.</div><p>Block this sequence until referenced delay point.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Delay point created in <code>scheduleDelay.key</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Delay point created in <code>scheduleDelay.key</code>.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ed27fc9d175b94f5105a69fedb784faf>6.1.6 - awaitInt</h1><div class=lead>Block current sequence until condition becomes true.</div><p>Block current sequence until condition becomes true.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#equalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#greaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#greaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#lessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#lessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#notequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr><tr><td>var</td><td>String</td><td>Variable name storing the compared value.</td></tr></tbody></table><h3 id=a-idequaltoaequalto><a id=equalTo></a>equalTo<a class=td-heading-self-link href=#a-idequaltoaequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idgreaterorequaltoagreaterorequalto><a id=greaterOrEqualTo></a>greaterOrEqualTo<a class=td-heading-self-link href=#a-idgreaterorequaltoagreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idgreaterthanagreaterthan><a id=greaterThan></a>greaterThan<a class=td-heading-self-link href=#a-idgreaterthanagreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idlessorequaltoalessorequalto><a id=lessOrEqualTo></a>lessOrEqualTo<a class=td-heading-self-link href=#a-idlessorequaltoalessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idlessthanalessthan><a id=lessThan></a>lessThan<a class=td-heading-self-link href=#a-idlessthanalessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idnotequaltoanotequalto><a id=notEqualTo></a>notEqualTo<a class=td-heading-self-link href=#a-idnotequaltoanotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4d64d4bce9b7808b64e6ca3d158df866>6.1.7 - awaitVar</h1><div class=lead>Block current sequence until this variable gets set/unset.</div><p>Block current sequence until this variable gets set/unset.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name or <code>!variable</code> if we are waiting for it to be unset.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>var</td><td>String</td><td>Variable name or <code>!variable</code> if we are waiting for it to be unset.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-99f9ba03056c3024a64b7f2a71862b31>6.1.8 - breakIfFinished</h1><div class=lead>Stop execution of current sequence if the phase is in finished state.</div><p>Stop execution of current sequence if the phase is in finished state.</p><p>This is useful for a long-running (looping) sequence that should not extend the duration of its phase.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c06872cbd5141975ca8bb8b9e6bc0d37>6.1.9 - breakSequence</h1><div class=lead>Prematurely stops execution of this sequence if the condition is satisfied.</div><p>Prematurely stops execution of this sequence if the condition is satisfied.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>dependency</td><td>String</td><td>This step is blocked if this variable does not have set value (none by default).</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>onBreak</td><td><a href=index.html#actions>Action.Builder</a></td><td>Action performed when the condition is true and the sequence is to be ended.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a62d2db7476df146ca0c30891184227d>6.1.10 - clearHttpCache</h1><div class=lead>Drops all entries from HTTP cache in the session.</div><p>Drops all entries from HTTP cache in the session.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3b2ea0992f00f322a138998e84c55e55>6.1.11 - conditional</h1><div class=lead>Perform an action or sequence of actions conditionally.</div><p>Perform an action or sequence of actions conditionally.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>actions</td><td><a href=index.html#actions>Action.Builder</a></td><td>Actions that should be executed should the condition hold.</td></tr><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3c48d8013f6f6e3fbaf33720471cc7c3>6.1.12 - fail</h1><div class=lead>Fail the phase with given message. Used mostly for testing/debugging.</div><p>Fail the phase with given message. Used mostly for testing/debugging.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Message to fail with (unconditionally).</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>message</td><td>String</td><td>Message attached to the failure exception.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-89f58d3bd3ae93c30ade6433b674e41b>6.1.13 - foreach</h1><div class=lead>Instantiate new sequences based on array variable content.</div><p>Instantiate new sequences based on array variable content.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>counterVar</td><td>String</td><td>Variable to be set to the number of created sequences (optional).</td></tr><tr><td>dependency</td><td>String</td><td>This step is blocked if this variable does not have set value (none by default).</td></tr><tr><td>fromVar</td><td>String</td><td>Variable holding the array.</td></tr><tr><td>sequence</td><td>String</td><td>Name of the instantiated sequence.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7c02e49382eb4ac7f2bb45cd32926905>6.1.14 - getIndex</h1><div class=lead>Lookup index of an item in an array/collection.</div><p>Lookup index of an item in an array/collection.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>collection</td><td>String</td><td>Variable to fetch the collection from.</td></tr><tr><td>item</td><td><a href=#item>Builder</a></td><td>Item that should be looked up (using equality).</td></tr><tr><td>toVar</td><td>String</td><td>Integer variable to store the index, or -1 if the item is not found.</td></tr></tbody></table><h3 id=a-iditemaitem><a id=item></a>item<a class=td-heading-self-link href=#a-iditemaitem aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Verbatim value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-87d33e313edf95acd8f0280c6785c344>6.1.15 - getItem</h1><div class=lead>Retrieves n-th item from an array or collection.</div><p>Retrieves n-th item from an array or collection.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source variable with an array or list.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Source for index into the array/list.</td></tr><tr><td>toVar</td><td>String</td><td>Destination variable for the n-th element.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d3078210c272b46bdc8299c48dad00e5>6.1.16 - getSharedCounter</h1><div class=lead>Retrieves value from a counter shared by all sessions in the same executor and stores that in a session variable.</div><p>Retrieves value from a counter shared by all sessions in the same executor and stores that in a session variable.<br>If the value exceeds allowed integer range (-2^31 .. 2^31 - 1) it is capped.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the key and variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>toVar</td><td>String</td><td>Session variable for storing the value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5a2ac716a510195d9b4c9759dd1afeec>6.1.17 - getSize</h1><div class=lead>Calculates size of an array/collection held in variable into another variable</div><p>Calculates size of an array/collection held in variable into another variable</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>boolFilter</td><td><a href=#boolfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>fromVar</td><td>String</td><td>Variable holding the collection.</td></tr><tr><td>intFilter</td><td><a href=#intfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>stringFilter</td><td><a href=#stringfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>toVar</td><td>String</td><td>Variable storing the size.</td></tr><tr><td>undefinedValue</td><td>int</td><td>Value to use when <code>fromVar</code> is unset or it does not contain any array/collection.</td></tr></tbody></table><h3 id=a-idboolfilteraboolfilter><a id=boolFilter></a>boolFilter<a class=td-heading-self-link href=#a-idboolfilteraboolfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintfilteraintfilter><a id=intFilter></a>intFilter<a class=td-heading-self-link href=#a-idintfilteraintfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intfilterequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intfiltergreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intfiltergreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intfilterlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intfilterlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intfilternotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintfilterequaltoaintfilterequalto><a id=intFilter.equalTo></a>intFilter.equalTo<a class=td-heading-self-link href=#a-idintfilterequaltoaintfilterequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfiltergreaterorequaltoaintfiltergreaterorequalto><a id=intFilter.greaterOrEqualTo></a>intFilter.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintfiltergreaterorequaltoaintfiltergreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfiltergreaterthanaintfiltergreaterthan><a id=intFilter.greaterThan></a>intFilter.greaterThan<a class=td-heading-self-link href=#a-idintfiltergreaterthanaintfiltergreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilterlessorequaltoaintfilterlessorequalto><a id=intFilter.lessOrEqualTo></a>intFilter.lessOrEqualTo<a class=td-heading-self-link href=#a-idintfilterlessorequaltoaintfilterlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilterlessthanaintfilterlessthan><a id=intFilter.lessThan></a>intFilter.lessThan<a class=td-heading-self-link href=#a-idintfilterlessthanaintfilterlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilternotequaltoaintfilternotequalto><a id=intFilter.notEqualTo></a>intFilter.notEqualTo<a class=td-heading-self-link href=#a-idintfilternotequaltoaintfilternotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterastringfilter><a id=stringFilter></a>stringFilter<a class=td-heading-self-link href=#a-idstringfilterastringfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringfilterlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringfilterlengthastringfilterlength><a id=stringFilter.length></a>stringFilter.length<a class=td-heading-self-link href=#a-idstringfilterlengthastringfilterlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringfilterlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringfilterlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringfilterlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringfilterlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringfilterlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringfilterlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringfilterlengthequaltoastringfilterlengthequalto><a id=stringFilter.length.equalTo></a>stringFilter.length.equalTo<a class=td-heading-self-link href=#a-idstringfilterlengthequaltoastringfilterlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthgreaterorequaltoastringfilterlengthgreaterorequalto><a id=stringFilter.length.greaterOrEqualTo></a>stringFilter.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthgreaterorequaltoastringfilterlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthgreaterthanastringfilterlengthgreaterthan><a id=stringFilter.length.greaterThan></a>stringFilter.length.greaterThan<a class=td-heading-self-link href=#a-idstringfilterlengthgreaterthanastringfilterlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthlessorequaltoastringfilterlengthlessorequalto><a id=stringFilter.length.lessOrEqualTo></a>stringFilter.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthlessorequaltoastringfilterlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthlessthanastringfilterlengthlessthan><a id=stringFilter.length.lessThan></a>stringFilter.length.lessThan<a class=td-heading-self-link href=#a-idstringfilterlengthlessthanastringfilterlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthnotequaltoastringfilterlengthnotequalto><a id=stringFilter.length.notEqualTo></a>stringFilter.length.notEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthnotequaltoastringfilterlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d1880b69aa8843cb08af441e74f5dd21>6.1.18 - hotrodRequest</h1><div class=lead>Issues a HotRod request and registers handlers for the response.</div><p>Issues a HotRod request and registers handlers for the response.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cacheName</td><td>String</td><td>Name of the cache used for the operation. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>cacheName (alternative)</td><td><a href=#cachename>Builder</a></td><td><font color=#606060>&lt;no description></font></td></tr><tr><td>get</td><td>String</td><td>Get specified entry in the remote cache.</td></tr><tr><td>key</td><td>String</td><td>Key used for the operation. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>key (alternative)</td><td><a href=#key>Builder</a></td><td><font color=#606060>&lt;no description></font></td></tr><tr><td>metric</td><td>String</td><td>Requests statistics will use this metric name.</td></tr><tr><td>metric (alternative)</td><td><a href=#metric>&lt;list of strings></a></td><td>Allows categorizing request statistics into metrics based on the request path.</td></tr><tr><td>operation</td><td>enum</td><td><br>Options:{::nomarkdown}<ul><li><code>PUT</code>: {:/}Adds or overrides each specified entry in the remote cache.{::nomarkdown}</li><li><code>GET</code>: {:/}Get specified entry in the remote cache.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>put</td><td>String</td><td>Adds or overrides each specified entry in the remote cache.</td></tr><tr><td>value</td><td>String</td><td>Value for the operation. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>value (alternative)</td><td><a href=#value>Builder</a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table><h3 id=a-idcachenameacachename><a id=cacheName></a>cacheName<a class=td-heading-self-link href=#a-idcachenameacachename aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idkeyakey><a id=key></a>key<a class=td-heading-self-link href=#a-idkeyakey aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idmetricametric><a id=metric></a>metric<a class=td-heading-self-link href=#a-idmetricametric aria-label="Heading self-link"></a></h3><p>Allows categorizing request statistics into metrics based on the request path.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of strings></td><td>&lt;list of strings></td><td>{::nomarkdown}Allows categorizing request statistics into metrics based on the request path. The expressions are evaluated in the order as provided in the list. Use one of:<ul><li><code>regexp -> replacement</code>, e.g. <code>([^?]<em>)(?.</em>)? -> $1</code> to drop the query part.<li><code>regexp</code> (don&rsquo;t do any replaces and use the full path), e.g. <code>.*.jpg</code><li><code>-> name</code> (metric applied if none of the previous expressions match).</ul>{:/}</td></tr></tbody></table><h3 id=a-idvalueavalue><a id=value></a>value<a class=td-heading-self-link href=#a-idvalueavalue aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d13529b8904670ebf8b5c26ba219fe34>6.1.19 - httpRequest</h1><div class=lead>Issues a HTTP request and registers handlers for the response.</div><p>Issues a HTTP request and registers handlers for the response.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>authority</td><td>String</td><td>HTTP authority (host:port) this request should target. Must match one of the entries in <code>http</code> section. The string can use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr><tr><td>authority (alternative)</td><td><a href=#authority>Builder</a></td><td>HTTP authority (host:port) this request should target. Must match one of the entries in <code>http</code> section.</td></tr><tr><td>body</td><td><a href=#body>Builder</a></td><td>HTTP request body.</td></tr><tr><td>body (alternative)</td><td>String</td><td>HTTP request body (possibly a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>).</td></tr><tr><td>compensation</td><td><a href=#compensation>Builder</a></td><td>Configures additional metric compensated for coordinated omission.</td></tr><tr><td>compression</td><td><a href=#compression>Builder</a></td><td>Configure response compression.</td></tr><tr><td>compression (alternative)</td><td>String</td><td>Request server to respond with compressed entity using specified content encoding.</td></tr><tr><td>CONNECT</td><td>String</td><td>Issue HTTP CONNECT request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>CONNECT (alternative)</td><td><a href=#connect>Builder</a></td><td>Issue HTTP CONNECT request to given path.</td></tr><tr><td>DELETE</td><td>String</td><td>Issue HTTP DELETE request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>DELETE (alternative)</td><td><a href=#delete>Builder</a></td><td>Issue HTTP DELETE request to given path.</td></tr><tr><td>endpoint</td><td><a href=#endpoint>Builder</a></td><td>HTTP endpoint this request should target. Must match to the <code>name</code> of the entries in <code>http</code> section.</td></tr><tr><td>GET</td><td>String</td><td>Issue HTTP GET request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>GET (alternative)</td><td><a href=#get>Builder</a></td><td>Issue HTTP GET request to given path.</td></tr><tr><td>handler</td><td><a href=#handler>Builder</a></td><td>HTTP response handlers.</td></tr><tr><td>HEAD</td><td>String</td><td>Issue HTTP HEAD request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>HEAD (alternative)</td><td><a href=#head>Builder</a></td><td>Issue HTTP HEAD request to given path.</td></tr><tr><td>headers</td><td><a href=#headers>Builder</a></td><td>HTTP headers sent in the request.</td></tr><tr><td>method</td><td>enum</td><td>HTTP method used for the request.<br>Options:{::nomarkdown}<ul><li><code>GET</code></li><li><code>HEAD</code></li><li><code>POST</code></li><li><code>PUT</code></li><li><code>DELETE</code></li><li><code>OPTIONS</code></li><li><code>PATCH</code></li><li><code>TRACE</code></li><li><code>CONNECT</code></li></ul>{:/}</td></tr><tr><td>metric</td><td>String</td><td>Requests statistics will use this metric name.</td></tr><tr><td>metric (alternative)</td><td><a href=#metric>&lt;list of strings></a></td><td>Allows categorizing request statistics into metrics based on the request path.</td></tr><tr><td>OPTIONS</td><td>String</td><td>Issue HTTP OPTIONS request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>OPTIONS (alternative)</td><td><a href=#options>Builder</a></td><td>Issue HTTP OPTIONS request to given path.</td></tr><tr><td>PATCH</td><td>String</td><td>Issue HTTP PATCH request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>PATCH (alternative)</td><td><a href=#patch>Builder</a></td><td>Issue HTTP PATCH request to given path.</td></tr><tr><td>path</td><td>String</td><td>HTTP path (absolute or relative), including query and fragment. The string can use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr><tr><td>path (alternative)</td><td><a href=#path>Builder</a></td><td>HTTP path (absolute or relative), including query and fragment.</td></tr><tr><td>POST</td><td>String</td><td>Issue HTTP POST request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>POST (alternative)</td><td><a href=#post>Builder</a></td><td>Issue HTTP POST request to given path.</td></tr><tr><td>PUT</td><td>String</td><td>Issue HTTP PUT request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>PUT (alternative)</td><td><a href=#put>Builder</a></td><td>Issue HTTP PUT request to given path.</td></tr><tr><td>sla</td><td><a href=#sla>Builder</a></td><td>List of SLAs the requests are subject to.</td></tr><tr><td>sync</td><td>boolean</td><td>This request is synchronous; execution of the sequence does not continue until the full response is received. If this step is executed from multiple parallel instances of this sequence the progress of all sequences is blocked until there is a request in flight without response.<p>Default is <code>true</code>.</td></tr><tr><td>timeout</td><td>String</td><td>Request timeout - after this time the request will be marked as failed and connection will be closed.<p>Defaults to value set globally in <code>http</code> section.</td></tr><tr><td>TRACE</td><td>String</td><td>Issue HTTP TRACE request to given path. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr><tr><td>TRACE (alternative)</td><td><a href=#trace>Builder</a></td><td>Issue HTTP TRACE request to given path.</td></tr></tbody></table><h3 id=a-idauthorityaauthority><a id=authority></a>authority<a class=td-heading-self-link href=#a-idauthorityaauthority aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idbodyabody><a id=body></a>body<a class=td-heading-self-link href=#a-idbodyabody aria-label="Heading self-link"></a></h3><p>Allows building HTTP request body from session variables.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>form</td><td><a href=#bodyform>Builder</a></td><td>Build form as if we were sending the request using HTML form. This option automatically adds <code>Content-Type: application/x-www-form-urlencoded</code> to the request headers.</td></tr><tr><td>fromFile</td><td>String</td><td>Send contents of the file. Note that this method does NOT set content-type automatically.</td></tr><tr><td>fromVar</td><td>String</td><td>Use variable content as request body.</td></tr><tr><td>pattern</td><td>String</td><td><a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>Pattern</a> replacing <code>${sessionvar}</code> with variable contents in a string.</td></tr><tr><td>text</td><td>String</td><td>String sent as-is.</td></tr></tbody></table><h3 id=a-idbodyformabodyform><a id=body.form></a>body.form<a class=td-heading-self-link href=#a-idbodyformabodyform aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#bodyformlist-of-mappings>&lt;list of builders></a></td><td>Add input pair described in the mapping.</td></tr></tbody></table><h3 id=a-idbodyformltlist-of-mappingsgtabodyformltlist-of-mappingsgt><a id="body.form.<list of mappings>"></a>body.form.&lt;list of mappings><a class=td-heading-self-link href=#a-idbodyformltlist-of-mappingsgtabodyformltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Form element (e.g. as if coming from an INPUT field).</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input field value from session variable.</td></tr><tr><td>name</td><td>String</td><td>Input field name.</td></tr><tr><td>pattern</td><td>String</td><td>Input field value replacing session variables in a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>, e.g. <code>foo${myvariable}var</code></td></tr><tr><td>value</td><td>String</td><td>Input field value (verbatim).</td></tr></tbody></table><h3 id=a-idcompensationacompensation><a id=compensation></a>compensation<a class=td-heading-self-link href=#a-idcompensationacompensation aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metric</td><td>String</td><td>Metric name for the compensated results.</td></tr><tr><td>metric (alternative)</td><td><a href=#compensationmetric>&lt;list of strings></a></td><td>Configure a custom metric for the compensated results.</td></tr><tr><td>targetRate</td><td>double</td><td>Desired rate of new virtual users per second. This is similar to <code>constantRate.usersPerSec</code> phase settings but works closer to legacy benchmark drivers by fixing the concurrency.</td></tr><tr><td>targetRate (alternative)</td><td><a href=#compensationtargetrate>Builder</a></td><td>Desired rate of new virtual users per second. This is similar to <code>constantRate.usersPerSec</code> phase settings but works closer to legacy benchmark drivers by fixing the concurrency.</td></tr></tbody></table><h3 id=a-idcompensationmetricacompensationmetric><a id=compensation.metric></a>compensation.metric<a class=td-heading-self-link href=#a-idcompensationmetricacompensationmetric aria-label="Heading self-link"></a></h3><p>Configure a custom metric for the compensated results.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of strings></td><td>&lt;list of strings></td><td>{::nomarkdown}Allows categorizing request statistics into metrics based on the request path. The expressions are evaluated in the order as provided in the list. Use one of:<ul><li><code>regexp -> replacement</code>, e.g. <code>([^?]<em>)(?.</em>)? -> $1</code> to drop the query part.<li><code>regexp</code> (don&rsquo;t do any replaces and use the full path), e.g. <code>.*.jpg</code><li><code>-> name</code> (metric applied if none of the previous expressions match).</ul>{:/}</td></tr></tbody></table><h3 id=a-idcompensationtargetrateacompensationtargetrate><a id=compensation.targetRate></a>compensation.targetRate<a class=td-heading-self-link href=#a-idcompensationtargetrateacompensationtargetrate aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>base</td><td>double</td><td>Base value used for first iteration.</td></tr><tr><td>increment</td><td>double</td><td>Value by which the base value is incremented for each (but the very first) iteration.</td></tr></tbody></table><h3 id=a-idcompressionacompression><a id=compression></a>compression<a class=td-heading-self-link href=#a-idcompressionacompression aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>encoding</td><td>String</td><td>Encoding used for <code>Accept-Encoding</code>/<code>TE</code> header. The only currently supported is <code>gzip</code>.</td></tr><tr><td>type</td><td>enum</td><td>Type of compression (resource vs. transfer based).<br>Options:{::nomarkdown}<ul><li><code>CONTENT_ENCODING</code>: {:/}Use <code>Accept-Encoding</code> in request and expect <code>Content-Encoding</code> in response.{::nomarkdown}</li><li><code>TRANSFER_ENCODING</code>: {:/}Use <code>TE</code> in request and expect <code>Transfer-Encoding</code> in response.{::nomarkdown}</li></ul>{:/}</td></tr></tbody></table><h3 id=a-idconnectaconnect><a id=CONNECT></a>CONNECT<a class=td-heading-self-link href=#a-idconnectaconnect aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-iddeleteadelete><a id=DELETE></a>DELETE<a class=td-heading-self-link href=#a-iddeleteadelete aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idendpointaendpoint><a id=endpoint></a>endpoint<a class=td-heading-self-link href=#a-idendpointaendpoint aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idgetaget><a id=GET></a>GET<a class=td-heading-self-link href=#a-idgetaget aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idhandlerahandler><a id=handler></a>handler<a class=td-heading-self-link href=#a-idhandlerahandler aria-label="Heading self-link"></a></h3><p>Manages processing of HTTP responses.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>autoRangeCheck</td><td>boolean</td><td>Inject status handler that marks the request as invalid on status 4xx or 5xx. Default value depends on <code>ergonomics.autoRangeCheck</code> (see <a href=https://hyperfoil.io/userguide/benchmark/ergonomics.html>User Guide</a>).</td></tr><tr><td>body</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Handle HTTP response body.</td></tr><tr><td>followRedirect</td><td>enum</td><td>Automatically fire requests when the server responds with redirection. Default value depends on <code>ergonomics.followRedirect</code> (see <a href=https://hyperfoil.io/userguide/benchmark/ergonomics.html>User Guide</a>).<br>Options:{::nomarkdown}<ul><li><code>NEVER</code>: {:/}Do not insert any automatic redirection handling.{::nomarkdown}</li><li><code>LOCATION_ONLY</code>: {:/}Redirect only upon status 3xx accompanied with a &rsquo;location&rsquo; header. Status, headers, body and completions handlers are suppressed in this case (only raw-bytes handlers are still running). This is the default option.{::nomarkdown}</li><li><code>HTML_ONLY</code>: {:/}Handle only HTML response with META refresh header. Status, headers and body handlers are invoked both on the original response and on the response from subsequent requests. Completion handlers are suppressed on this request and invoked after the last response arrives (in case of multiple redirections).{::nomarkdown}</li><li><code>ALWAYS</code>: {:/}Implement both status 3xx + location and HTML redirects.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>header</td><td><a href=#handlerheader>HeaderHandler.Builder</a></td><td>Handle HTTP response headers.</td></tr><tr><td>onCompletion</td><td><a href=index.html#actions>Action.Builder</a></td><td>Action executed when the HTTP response is fully received.</td></tr><tr><td>rawBytes</td><td><a href=#handlerrawbytes>RawBytesHandler.Builder</a></td><td>Handler processing HTTP response before parsing.</td></tr><tr><td>status</td><td><a href=#handlerstatus>StatusHandler.Builder</a></td><td>Handle HTTP response status.</td></tr><tr><td>stopOnInvalid</td><td>boolean</td><td>Inject completion handler that will stop the session if the request has been marked as invalid. Default value depends on <code>ergonomics.stopOnInvalid</code> (see <a href=https://hyperfoil.io/userguide/benchmark/ergonomics.html>User Guide</a>).</td></tr></tbody></table><h3 id=a-idhandlerheaderahandlerheader><a id=handler.header></a>handler.header<a class=td-heading-self-link href=#a-idhandlerheaderahandlerheader aria-label="Heading self-link"></a></h3><p>Handle HTTP response headers.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>conditional</td><td><a href=#handlerheaderconditional>ConditionalHeaderHandler.Builder</a></td><td>Passes the headers to nested handler if the condition holds. Note that the condition may be evaluated multiple times and therefore any nested handlers should not change the results of the condition.</td></tr><tr><td>countHeaders</td><td>CountHeadersHandler.Builder</td><td>Stores number of occurences of each header in custom statistics (these can be displayed in CLI using the <code>stats -c</code> command).</td></tr><tr><td>filter</td><td><a href=#handlerheaderfilter>FilterHeaderHandler.Builder</a></td><td>Compares if the header name matches expression and invokes a processor with the value.</td></tr><tr><td>logInvalid</td><td>LogInvalidHandler.HeaderHandlerBuilder</td><td>Logs headers from requests marked as invalid.</td></tr><tr><td>recordHeaderTime</td><td><a href=#handlerheaderrecordheadertime>RecordHeaderTimeHandler.Builder</a></td><td>Records alternative metric based on values from a header (e.g. when a proxy reports processing time).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalahandlerheaderconditional><a id=handler.header.conditional></a>handler.header.conditional<a class=td-heading-self-link href=#a-idhandlerheaderconditionalahandlerheaderconditional aria-label="Heading self-link"></a></h3><p>Passes the headers to nested handler if the condition holds. Note that the condition may be evaluated multiple times and therefore any nested handlers should not change the results of the condition.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#handlerheaderconditionalallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#handlerheaderconditionalboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>handler</td><td><a href=#handlerheaderconditionalhandler>HeaderHandler.Builder</a></td><td>One or more header handlers that should be invoked.</td></tr><tr><td>intCondition</td><td><a href=#handlerheaderconditionalintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#handlerheaderconditionalstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalallconditionsahandlerheaderconditionalallconditions><a id=handler.header.conditional.allConditions></a>handler.header.conditional.allConditions<a class=td-heading-self-link href=#a-idhandlerheaderconditionalallconditionsahandlerheaderconditionalallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#handlerheaderconditionalallconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtahandlerheaderconditionalallconditionsltlist-of-mappingsgt><a id="handler.header.conditional.allConditions.<list of mappings>"></a>handler.header.conditional.allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtahandlerheaderconditionalallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#handlerheaderconditionalallconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#handlerheaderconditionalallconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#handlerheaderconditionalallconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#handlerheaderconditionalallconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtallconditionsahandlerheaderconditionalallconditionsltlist-of-mappingsgtallconditions><a id="handler.header.conditional.allConditions.<list of mappings>.allConditions"></a>handler.header.conditional.allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtallconditionsahandlerheaderconditionalallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#handlerheaderconditionalallconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtboolconditionahandlerheaderconditionalallconditionsltlist-of-mappingsgtboolcondition><a id="handler.header.conditional.allConditions.<list of mappings>.boolCondition"></a>handler.header.conditional.allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtboolconditionahandlerheaderconditionalallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtintconditionahandlerheaderconditionalallconditionsltlist-of-mappingsgtintcondition><a id="handler.header.conditional.allConditions.<list of mappings>.intCondition"></a>handler.header.conditional.allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtintconditionahandlerheaderconditionalallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#handlerheaderconditionalintconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#handlerheaderconditionalintconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#handlerheaderconditionalintconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#handlerheaderconditionalintconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#handlerheaderconditionalintconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#handlerheaderconditionalintconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtstringconditionahandlerheaderconditionalallconditionsltlist-of-mappingsgtstringcondition><a id="handler.header.conditional.allConditions.<list of mappings>.stringCondition"></a>handler.header.conditional.allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idhandlerheaderconditionalallconditionsltlist-of-mappingsgtstringconditionahandlerheaderconditionalallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#handlerheaderconditionalstringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalboolconditionahandlerheaderconditionalboolcondition><a id=handler.header.conditional.boolCondition></a>handler.header.conditional.boolCondition<a class=td-heading-self-link href=#a-idhandlerheaderconditionalboolconditionahandlerheaderconditionalboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalhandlerahandlerheaderconditionalhandler><a id=handler.header.conditional.handler></a>handler.header.conditional.handler<a class=td-heading-self-link href=#a-idhandlerheaderconditionalhandlerahandlerheaderconditionalhandler aria-label="Heading self-link"></a></h3><p>One or more header handlers that should be invoked.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>conditional</td><td><a href=#handlerheaderconditional>ConditionalHeaderHandler.Builder</a></td><td>Passes the headers to nested handler if the condition holds. Note that the condition may be evaluated multiple times and therefore any nested handlers should not change the results of the condition.</td></tr><tr><td>countHeaders</td><td>CountHeadersHandler.Builder</td><td>Stores number of occurences of each header in custom statistics (these can be displayed in CLI using the <code>stats -c</code> command).</td></tr><tr><td>filter</td><td><a href=#handlerheaderfilter>FilterHeaderHandler.Builder</a></td><td>Compares if the header name matches expression and invokes a processor with the value.</td></tr><tr><td>logInvalid</td><td>LogInvalidHandler.HeaderHandlerBuilder</td><td>Logs headers from requests marked as invalid.</td></tr><tr><td>recordHeaderTime</td><td><a href=#handlerheaderrecordheadertime>RecordHeaderTimeHandler.Builder</a></td><td>Records alternative metric based on values from a header (e.g. when a proxy reports processing time).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditionahandlerheaderconditionalintcondition><a id=handler.header.conditional.intCondition></a>handler.header.conditional.intCondition<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditionahandlerheaderconditionalintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#handlerheaderconditionalintconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#handlerheaderconditionalintconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#handlerheaderconditionalintconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#handlerheaderconditionalintconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#handlerheaderconditionalintconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#handlerheaderconditionalintconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditionequaltoahandlerheaderconditionalintconditionequalto><a id=handler.header.conditional.intCondition.equalTo></a>handler.header.conditional.intCondition.equalTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditionequaltoahandlerheaderconditionalintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditiongreaterorequaltoahandlerheaderconditionalintconditiongreaterorequalto><a id=handler.header.conditional.intCondition.greaterOrEqualTo></a>handler.header.conditional.intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditiongreaterorequaltoahandlerheaderconditionalintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditiongreaterthanahandlerheaderconditionalintconditiongreaterthan><a id=handler.header.conditional.intCondition.greaterThan></a>handler.header.conditional.intCondition.greaterThan<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditiongreaterthanahandlerheaderconditionalintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditionlessorequaltoahandlerheaderconditionalintconditionlessorequalto><a id=handler.header.conditional.intCondition.lessOrEqualTo></a>handler.header.conditional.intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditionlessorequaltoahandlerheaderconditionalintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditionlessthanahandlerheaderconditionalintconditionlessthan><a id=handler.header.conditional.intCondition.lessThan></a>handler.header.conditional.intCondition.lessThan<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditionlessthanahandlerheaderconditionalintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalintconditionnotequaltoahandlerheaderconditionalintconditionnotequalto><a id=handler.header.conditional.intCondition.notEqualTo></a>handler.header.conditional.intCondition.notEqualTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalintconditionnotequaltoahandlerheaderconditionalintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionahandlerheaderconditionalstringcondition><a id=handler.header.conditional.stringCondition></a>handler.header.conditional.stringCondition<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionahandlerheaderconditionalstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#handlerheaderconditionalstringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthahandlerheaderconditionalstringconditionlength><a id=handler.header.conditional.stringCondition.length></a>handler.header.conditional.stringCondition.length<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthahandlerheaderconditionalstringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#handlerheaderconditionalstringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#handlerheaderconditionalstringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#handlerheaderconditionalstringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#handlerheaderconditionalstringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#handlerheaderconditionalstringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#handlerheaderconditionalstringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthequaltoahandlerheaderconditionalstringconditionlengthequalto><a id=handler.header.conditional.stringCondition.length.equalTo></a>handler.header.conditional.stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthequaltoahandlerheaderconditionalstringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthgreaterorequaltoahandlerheaderconditionalstringconditionlengthgreaterorequalto><a id=handler.header.conditional.stringCondition.length.greaterOrEqualTo></a>handler.header.conditional.stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthgreaterorequaltoahandlerheaderconditionalstringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthgreaterthanahandlerheaderconditionalstringconditionlengthgreaterthan><a id=handler.header.conditional.stringCondition.length.greaterThan></a>handler.header.conditional.stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthgreaterthanahandlerheaderconditionalstringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthlessorequaltoahandlerheaderconditionalstringconditionlengthlessorequalto><a id=handler.header.conditional.stringCondition.length.lessOrEqualTo></a>handler.header.conditional.stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthlessorequaltoahandlerheaderconditionalstringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthlessthanahandlerheaderconditionalstringconditionlengthlessthan><a id=handler.header.conditional.stringCondition.length.lessThan></a>handler.header.conditional.stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthlessthanahandlerheaderconditionalstringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderconditionalstringconditionlengthnotequaltoahandlerheaderconditionalstringconditionlengthnotequalto><a id=handler.header.conditional.stringCondition.length.notEqualTo></a>handler.header.conditional.stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idhandlerheaderconditionalstringconditionlengthnotequaltoahandlerheaderconditionalstringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idhandlerheaderfilterahandlerheaderfilter><a id=handler.header.filter></a>handler.header.filter<a class=td-heading-self-link href=#a-idhandlerheaderfilterahandlerheaderfilter aria-label="Heading self-link"></a></h3><p>Compares if the header name matches expression and invokes a processor with the value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>header</td><td><a href=#handlerheaderfilterheader>Builder</a></td><td>Condition on the header name.</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Add one or more processors.</td></tr></tbody></table><h3 id=a-idhandlerheaderfilterheaderahandlerheaderfilterheader><a id=handler.header.filter.header></a>handler.header.filter.header<a class=td-heading-self-link href=#a-idhandlerheaderfilterheaderahandlerheaderfilterheader aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Literal value the string should match.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#handlerheaderfilterheaderlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idhandlerheaderfilterheaderlengthahandlerheaderfilterheaderlength><a id=handler.header.filter.header.length></a>handler.header.filter.header.length<a class=td-heading-self-link href=#a-idhandlerheaderfilterheaderlengthahandlerheaderfilterheaderlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#handlerheaderconditionalstringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#handlerheaderconditionalstringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#handlerheaderconditionalstringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#handlerheaderconditionalstringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#handlerheaderconditionalstringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#handlerheaderconditionalstringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idhandlerheaderrecordheadertimeahandlerheaderrecordheadertime><a id=handler.header.recordHeaderTime></a>handler.header.recordHeaderTime<a class=td-heading-self-link href=#a-idhandlerheaderrecordheadertimeahandlerheaderrecordheadertime aria-label="Heading self-link"></a></h3><p>Records alternative metric based on values from a header (e.g. when a proxy reports processing time).</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>header</td><td>String</td><td>Header carrying the time.</td></tr><tr><td>metric</td><td>String</td><td>Name of the created metric.</td></tr><tr><td>unit</td><td>String</td><td>Time unit in the header; use either <code>ms</code> or <code>ns</code>.</td></tr></tbody></table><h3 id=a-idhandlerrawbytesahandlerrawbytes><a id=handler.rawBytes></a>handler.rawBytes<a class=td-heading-self-link href=#a-idhandlerrawbytesahandlerrawbytes aria-label="Heading self-link"></a></h3><p>Handler processing HTTP response before parsing.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>transferSizeRecorder</td><td><a href=#handlerrawbytestransfersizerecorder>TransferSizeRecorder.Builder</a></td><td>Accumulates request and response sizes into custom metrics.</td></tr></tbody></table><h3 id=a-idhandlerrawbytestransfersizerecorderahandlerrawbytestransfersizerecorder><a id=handler.rawBytes.transferSizeRecorder></a>handler.rawBytes.transferSizeRecorder<a class=td-heading-self-link href=#a-idhandlerrawbytestransfersizerecorderahandlerrawbytestransfersizerecorder aria-label="Heading self-link"></a></h3><p>Accumulates request and response sizes into custom metrics.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Name of the custom metric for collecting request/response bytes.</td></tr></tbody></table><h3 id=a-idhandlerstatusahandlerstatus><a id=handler.status></a>handler.status<a class=td-heading-self-link href=#a-idhandlerstatusahandlerstatus aria-label="Heading self-link"></a></h3><p>Handle HTTP response status.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>action</td><td><a href=#handlerstatusaction>ActionStatusHandler.Builder</a></td><td>Perform certain actions when the status falls into a range.</td></tr><tr><td>counter</td><td><a href=#handlerstatuscounter>StatusToCounterHandler.Builder</a></td><td>Counts how many times given status is received.</td></tr><tr><td>multiplex</td><td><a href=#handlerstatusmultiplex>MultiplexStatusHandler.Builder</a></td><td>Multiplexes the status based on range into different status handlers.</td></tr><tr><td>range</td><td><a href=#handlerstatusrange>RangeStatusValidator.Builder</a></td><td>Marks requests that don&rsquo;t fall into the desired range as invalid.</td></tr><tr><td>stats</td><td>StatusToStatsHandler.Builder</td><td>Records number of occurrences of each status counts into custom statistics (these can be displayed in CLI using <code>stats -c</code>).</td></tr><tr><td>store</td><td><a href=#handlerstatusstore>StoreStatusHandler.Builder</a></td><td>Stores the status into session variable.</td></tr></tbody></table><h3 id=a-idhandlerstatusactionahandlerstatusaction><a id=handler.status.action></a>handler.status.action<a class=td-heading-self-link href=#a-idhandlerstatusactionahandlerstatusaction aria-label="Heading self-link"></a></h3><p>Perform certain actions when the status falls into a range.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td><a href=index.html#actions>Builder</a></td><td>Perform a sequence of actions if the range matches. Use range as the key and action in the mapping. Possible values of the status should be separated by commas (,). Ranges can be set using low-high (inclusive) (e.g. 200-299), or replacing lower digits with &lsquo;x&rsquo; (e.g. 2xx).</td></tr></tbody></table><h3 id=a-idhandlerstatuscounterahandlerstatuscounter><a id=handler.status.counter></a>handler.status.counter<a class=td-heading-self-link href=#a-idhandlerstatuscounterahandlerstatuscounter aria-label="Heading self-link"></a></h3><p>Counts how many times given status is received.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>add</td><td>int</td><td>Number to be added to the session variable.</td></tr><tr><td>expectStatus</td><td>int</td><td>Expected status (others are ignored). All status codes match by default.</td></tr><tr><td>init</td><td>int</td><td>Initial value for the session variable.</td></tr><tr><td>set</td><td>int</td><td>Do not accumulate (add), just set the variable to this value.</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idhandlerstatusmultiplexahandlerstatusmultiplex><a id=handler.status.multiplex></a>handler.status.multiplex<a class=td-heading-self-link href=#a-idhandlerstatusmultiplexahandlerstatusmultiplex aria-label="Heading self-link"></a></h3><p>Multiplexes the status based on range into different status handlers.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td><a href=#handlerstatusmultiplexany>Builder</a></td><td>Run another handler if the range matches. Use range as the key and another status handler in the mapping. Possible values of the status should be separated by commas (,). Ranges can be set using low-high (inclusive) (e.g. 200-299), or replacing lower digits with &lsquo;x&rsquo; (e.g. 2xx).</td></tr></tbody></table><h3 id=a-idhandlerstatusmultiplexltanygtahandlerstatusmultiplexltanygt><a id="handler.status.multiplex.<any>"></a>handler.status.multiplex.&lt;any><a class=td-heading-self-link href=#a-idhandlerstatusmultiplexltanygtahandlerstatusmultiplexltanygt aria-label="Heading self-link"></a></h3><p>Run another handler if the range matches. Use range as the key and another status handler in the mapping. Possible values of the status should be separated by commas (,). Ranges can be set using low-high (inclusive) (e.g. 200-299), or replacing lower digits with &lsquo;x&rsquo; (e.g. 2xx).</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>action</td><td><a href=#handlerstatusaction>ActionStatusHandler.Builder</a></td><td>Perform certain actions when the status falls into a range.</td></tr><tr><td>counter</td><td><a href=#handlerstatuscounter>StatusToCounterHandler.Builder</a></td><td>Counts how many times given status is received.</td></tr><tr><td>multiplex</td><td><a href=#handlerstatusmultiplex>MultiplexStatusHandler.Builder</a></td><td>Multiplexes the status based on range into different status handlers.</td></tr><tr><td>range</td><td><a href=#handlerstatusrange>RangeStatusValidator.Builder</a></td><td>Marks requests that don&rsquo;t fall into the desired range as invalid.</td></tr><tr><td>stats</td><td>StatusToStatsHandler.Builder</td><td>Records number of occurrences of each status counts into custom statistics (these can be displayed in CLI using <code>stats -c</code>).</td></tr><tr><td>store</td><td><a href=#handlerstatusstore>StoreStatusHandler.Builder</a></td><td>Stores the status into session variable.</td></tr></tbody></table><h3 id=a-idhandlerstatusrangeahandlerstatusrange><a id=handler.status.range></a>handler.status.range<a class=td-heading-self-link href=#a-idhandlerstatusrangeahandlerstatusrange aria-label="Heading self-link"></a></h3><p>Marks requests that don&rsquo;t fall into the desired range as invalid.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Single status code (<code>204</code>), masked code (<code>2xx</code>) or range (<code>200-399</code>).</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>max</td><td>int</td><td>Highest accepted status code.</td></tr><tr><td>min</td><td>int</td><td>Lowest accepted status code.</td></tr></tbody></table><h3 id=a-idhandlerstatusstoreahandlerstatusstore><a id=handler.status.store></a>handler.status.store<a class=td-heading-self-link href=#a-idhandlerstatusstoreahandlerstatusstore aria-label="Heading self-link"></a></h3><p>Stores the status into session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>toVar</td><td>Object</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idheadahead><a id=HEAD></a>HEAD<a class=td-heading-self-link href=#a-idheadahead aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idheadersaheaders><a id=headers></a>headers<a class=td-heading-self-link href=#a-idheadersaheaders aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td>String</td><td>Use header name (e.g. <code>Content-Type</code>) as key and value (possibly a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>).</td></tr><tr><td>&lt;any> (alternative)</td><td><a href=#headersany>Builder</a></td><td>Use header name (e.g. <code>Content-Type</code>) as key and specify value in the mapping.</td></tr></tbody></table><h3 id=a-idheadersltanygtaheadersltanygt><a id="headers.<any>"></a>headers.&lt;any><a class=td-heading-self-link href=#a-idheadersltanygtaheadersltanygt aria-label="Heading self-link"></a></h3><p>Specifies value that should be sent in headers.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>The value. This can be a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Load header value from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Load header value using a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>.</td></tr></tbody></table><h3 id=a-idmetricametric><a id=metric></a>metric<a class=td-heading-self-link href=#a-idmetricametric aria-label="Heading self-link"></a></h3><p>Allows categorizing request statistics into metrics based on the request path.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of strings></td><td>&lt;list of strings></td><td>{::nomarkdown}Allows categorizing request statistics into metrics based on the request path. The expressions are evaluated in the order as provided in the list. Use one of:<ul><li><code>regexp -> replacement</code>, e.g. <code>([^?]<em>)(?.</em>)? -> $1</code> to drop the query part.<li><code>regexp</code> (don&rsquo;t do any replaces and use the full path), e.g. <code>.*.jpg</code><li><code>-> name</code> (metric applied if none of the previous expressions match).</ul>{:/}</td></tr></tbody></table><h3 id=a-idoptionsaoptions><a id=OPTIONS></a>OPTIONS<a class=td-heading-self-link href=#a-idoptionsaoptions aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idpatchapatch><a id=PATCH></a>PATCH<a class=td-heading-self-link href=#a-idpatchapatch aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idpathapath><a id=path></a>path<a class=td-heading-self-link href=#a-idpathapath aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idpostapost><a id=POST></a>POST<a class=td-heading-self-link href=#a-idpostapost aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idputaput><a id=PUT></a>PUT<a class=td-heading-self-link href=#a-idputaput aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table><h3 id=a-idslaasla><a id=sla></a>sla<a class=td-heading-self-link href=#a-idslaasla aria-label="Heading self-link"></a></h3><p>Defines a list of Service Level Agreements (SLAs) - conditions that must hold for benchmark to be deemed successful.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#slalist-of-mappings>&lt;list of builders></a></td><td>One or more SLA configurations.</td></tr></tbody></table><h3 id=a-idslaltlist-of-mappingsgtaslaltlist-of-mappingsgt><a id="sla.<list of mappings>"></a>sla.&lt;list of mappings><a class=td-heading-self-link href=#a-idslaltlist-of-mappingsgtaslaltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Defines a Service Level Agreement (SLA) - conditions that must hold for benchmark to be deemed successful.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>blockedRatio</td><td>double</td><td>Maximum allowed ratio of time spent waiting for usable connection to sum of response latencies and blocked time. Default is 0 - client must not be blocked. Set to 1 if the client can block without limits.</td></tr><tr><td>errorRatio</td><td>double</td><td>Maximum allowed ratio of errors: connection failures or resets, timeouts and internal errors. Valid values are 0.0 - 1.0 (inclusive). Note: 4xx and 5xx statuses are NOT considered errors for this SLA parameter. Use <code>invalidRatio</code> for that.</td></tr><tr><td>invalidRatio</td><td>double</td><td>Maximum allowed ratio of requests with responses marked as invalid. Valid values are 0.0 - 1.0 (inclusive). Note: With default settings 4xx and 5xx statuses are considered invalid. Check out <code>ergonomics.autoRangeCheck</code> or <code>httpRequest.handler.autoRangeCheck</code> to change this.</td></tr><tr><td>limits</td><td><a href=#slalist-of-mappingslimits>Builder</a></td><td>Percentile limits.</td></tr><tr><td>meanResponseTime</td><td>String</td><td>Maximum allowed mean (average) response time. Use suffix <code>ns</code>, <code>us</code>, <code>ms</code> or <code>s</code> to specify units.</td></tr><tr><td>window</td><td>String</td><td>Period over which the stats should be collected. By default the SLA applies to stats from whole phase.</td></tr></tbody></table><h3 id=a-idslaltlist-of-mappingsgtlimitsaslaltlist-of-mappingsgtlimits><a id="sla.<list of mappings>.limits"></a>sla.&lt;list of mappings>.limits<a class=td-heading-self-link href=#a-idslaltlist-of-mappingsgtlimitsaslaltlist-of-mappingsgtlimits aria-label="Heading self-link"></a></h3><p>Percentile limits.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td>String</td><td>Use percentile (value between 0.0 and 1.0) as key and response time with unit (e.g. <code>ms</code>) in suffix as value.</td></tr></tbody></table><h3 id=a-idtraceatrace><a id=TRACE></a>TRACE<a class=td-heading-self-link href=#a-idtraceatrace aria-label="Heading self-link"></a></h3><p>Generic builder for generating a string.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>Object</td><td>Load the string from session variable.</td></tr><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr><tr><td>value</td><td>String</td><td>String value used verbatim.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c2a70244aa280107f1e9f05298ee8a0d>6.1.20 - json</h1><div class=lead>Parse JSON in variable into another variable.</div><p>Parse JSON in variable into another variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>delete</td><td>boolean</td><td>If this is set to true, the selected key will be deleted from the JSON and the modified JSON will be passed to the <code>processor</code>.</td></tr><tr><td>format</td><td>enum</td><td>Conversion to apply on the matching parts with &rsquo;toVar&rsquo; or &rsquo;toArray&rsquo; shortcuts.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>fromVar</td><td>String</td><td>Variable to load JSON from.</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Add one or more processors.</td></tr><tr><td>query</td><td>String</td><td>Query selecting the part of JSON.</td></tr><tr><td>replace</td><td><a href=#replace>Transformer.Builder</a></td><td>Custom transformation executed on the value of the selected item. Note that the output value must contain quotes (if applicable) and be correctly escaped.</td></tr><tr><td>replace (alternative)</td><td>String</td><td>Replace value of selected item with value generated through a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>. Note that the result must contain quotes and be correctly escaped.</td></tr><tr><td>toArray</td><td>String</td><td>Shortcut to store selected parts in an array in the session. Must follow the pattern <code>variable[maxSize]</code></td></tr><tr><td>toVar</td><td>String</td><td>Shortcut to store first match in given variable. Further matches are ignored.</td></tr><tr><td>unquote</td><td>boolean</td><td>Automatically unquote and unescape the input values. By default true.</td></tr></tbody></table><h3 id=a-idreplaceareplace><a id=replace></a>replace<a class=td-heading-self-link href=#a-idreplaceareplace aria-label="Heading self-link"></a></h3><p>Custom transformation executed on the value of the selected item. Note that the output value must contain quotes (if applicable) and be correctly escaped.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>actions</td><td><a href=#replaceactions>ActionsTransformer.Builder</a></td><td>This transformer stores the (defragmented) input into a variable, using requested format. After that it executes all the actions and fetches transformed value using the pattern.</td></tr><tr><td>pattern</td><td><a href=#replacepattern>Pattern.TransformerBuilder</a></td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr></tbody></table><h3 id=a-idreplaceactionsareplaceactions><a id=replace.actions></a>replace.actions<a class=td-heading-self-link href=#a-idreplaceactionsareplaceactions aria-label="Heading self-link"></a></h3><p>This transformer stores the (defragmented) input into a variable, using requested format. After that it executes all the actions and fetches transformed value using the pattern.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>actions</td><td><a href=index.html#actions>Action.Builder</a></td><td>Actions to be executed.</td></tr><tr><td>format</td><td>enum</td><td>Format into which should this transformer convert the buffers before storing. Default is <code>STRING</code>.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>pattern</td><td>String</td><td><a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>Pattern</a> to use when fetching the transformed value.</td></tr><tr><td>var</td><td>String</td><td>Variable used as the intermediate storage for the data.</td></tr></tbody></table><h3 id=a-idreplacepatternareplacepattern><a id=replace.pattern></a>replace.pattern<a class=td-heading-self-link href=#a-idreplacepatternareplacepattern aria-label="Heading self-link"></a></h3><p>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>The pattern formatting string.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-1e722145d76483d895263b381dc1f215>6.1.21 - log</h1><div class=lead>Log a message and variable values.</div><p>Log a message and variable values.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>String</td><td>Message format pattern. Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a> for variables.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e7fd55cac424a7314850c5eac812511e>6.1.22 - loop</h1><div class=lead>Repeats a set of steps fixed number of times.</div><p>Repeats a set of steps fixed number of times.</p><p>This step is supposed to be inserted as the first step of a sequence and the <code>counterVar</code> should not be set during the first invocation.</p><p>Before the loop the <code>counterVar</code> is initialized to zero, and in each after the last step in the <code>steps</code> sequence the counter is incremented. If the result is lesser than <code>repeats</code> this sequence is restarted from the beginning (this is also why the step must be the first step in the sequence).</p><p>It is legal to place steps after the looped steps.</p><p>Example:</p><pre tabindex=0><code>scenario:
- mySequence:
  - loop:
      counterVar: myCounter
      repeats: 5
      steps:
      - httpRequest:
          GET: /foo/${myCounter}
          # ...
      - someOtherStep: ...
  - anotherStepExecutedAfterThoseFiveLoops
</code></pre><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>counterVar</td><td>String</td><td>Variable holding number of iterations.</td></tr><tr><td>repeats</td><td>int</td><td>Number of iterations that should be executed.</td></tr><tr><td>steps</td><td><a href=index.html#steps>Builder</a></td><td>List of steps that should be looped.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d21335c3143aafe147f6ad31324243ab>6.1.23 - markRequestInvalid</h1><div class=lead>Unconditionally mark currently processed request as invalid.</div><p>Unconditionally mark currently processed request as invalid.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-651a29dfe6511bb16e4545442abe5414>6.1.24 - newSequence</h1><div class=lead>Instantiates a sequence for each invocation.</div><p>Instantiates a sequence for each invocation.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Sequence name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>concurrencyPolicy</td><td>enum</td><td><br>Options:{::nomarkdown}<ul><li><code>FAIL</code></li><li><code>WARN</code></li></ul>{:/}</td></tr><tr><td>forceSameIndex</td><td>boolean</td><td>Forces that the sequence will have the same index as the currently executing sequence. This can be useful if the sequence is passing some data to the new sequence using sequence-scoped variables. Note that the new sequence must have same concurrency factor as the currently executing sequence.</td></tr><tr><td>sequence</td><td>String</td><td>Name of the instantiated sequence.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-41ab2e4b54557e1eba6991a11073f79f>6.1.25 - noop</h1><div class=lead>Does nothing. Only for demonstration purposes.</div><p>Does nothing. Only for demonstration purposes.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-7c53f3ce0f3044359481b8fac53fd61e>6.1.26 - publishAgentData</h1><div class=lead>Makes the data available to all sessions in the same agent, including those using different executors.</div><p>Makes the data available to all sessions in the same agent, including those using different executors.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both name of source variable and the key used to read the data.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source session variable name.</td></tr><tr><td>name</td><td>String</td><td>Arbitrary unique identifier for the data.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-63ab6333c32ca6b7fb29cb10b2a1e386>6.1.27 - publishGlobalCounters</h1><div class=lead>Gathers values from session variables and publishes them globally (to all agents).</div><p>Gathers values from session variables and publishes them globally (to all agents).<br>You can name the counters individually (example 1) or use the variable names (example 2):<br></p><pre tabindex=0><code class="language-<code>" data-lang="<code>"># Example 1:
- publishGlobalCounters:
    key: myKey
    vars: [ foo, bar ]
# Example 2:
- publishGlobalCounters:
    key: someOtherKey
    vars:
    - foo: myFoo
    - bar: bbb
&lt;/code&gt;```


| Property | Type | Description |
| ------- | ------- | -------- |
| key | String | Identifier of the global record. |
| vars | [Builder](#vars) | List of names and session variables. |

### &lt;a id=&#34;vars&#34;&gt;&lt;/a&gt;vars

| Property | Type | Description |
| ------- | ------- | ------- |
| &amp;lt;any&amp;gt; | &amp;lt;unknown&amp;gt; | &lt;font color=&#34;#606060&#34;&gt;&amp;lt;no description&amp;gt;&lt;/font&gt; |
| &amp;lt;list of strings&amp;gt; | &amp;lt;unknown&amp;gt; | &lt;font color=&#34;#606060&#34;&gt;&amp;lt;no description&amp;gt;&lt;/font&gt; |
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-3e1067fddba3c87de6ab7dfa080011e4>6.1.28 - pullSharedMap</h1><div class=lead>Move values from a map shared across all sessions using the same executor into session variables.</div><p>Move values from a map shared across all sessions using the same executor into session variables.</p><p>The executor can host multiple shared maps, each holding an entry with several variables. This step moves variables from either a random entry (if no <code>match</code> is set) or with an entry that has the same value for given variable as the current session. When data is moved to the current session the entry is dropped from the shared map. If the map contains records for which the {@link #vars()} don&rsquo;t contain a destination variable the contents is lost.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Key identifying the shared map.</td></tr><tr><td>match</td><td>String</td><td>Name of the session variable that stores value identifying the entry in the shared map.</td></tr><tr><td>vars</td><td><a href=#vars>&lt;list of strings></a></td><td>List of variables the map should be pulled into.</td></tr></tbody></table><h3 id=a-idvarsavars><a id=vars></a>vars<a class=td-heading-self-link href=#a-idvarsavars aria-label="Heading self-link"></a></h3><p>List of variables the map should be pulled into.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of strings></td><td>&lt;unknown></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-df84f7168806cddb8fc62db91c90a271>6.1.29 - pushSharedMap</h1><div class=lead>Store values from session variables into a map shared across all sessions using the same executor into session variables.</div><p>Store values from session variables into a map shared across all sessions using the same executor into session variables.</p><p>The executor can host multiple shared maps, each holding an entry with several variables. This step creates one entry in the map, copying values from session variables into the entry.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Key identifying the shared map.</td></tr><tr><td>vars</td><td><a href=#vars>&lt;list of strings></a></td><td>List of variable names that should be stored in the entry.</td></tr></tbody></table><h3 id=a-idvarsavars><a id=vars></a>vars<a class=td-heading-self-link href=#a-idvarsavars aria-label="Heading self-link"></a></h3><p>List of variable names that should be stored in the entry.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of strings></td><td>&lt;unknown></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f7ebf153ba4032d5cf968ddb84db0176>6.1.30 - randomCsvRow</h1><div class=lead>Stores random row from a CSV-formatted file to variables.</div><p>Stores random row from a CSV-formatted file to variables.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>columns</td><td><a href=#columns>Builder</a></td><td>Defines mapping from columns to session variables.</td></tr><tr><td>file</td><td>String</td><td>Path to the CSV file that should be loaded.</td></tr><tr><td>separator</td><td>char</td><td>Set character used for column separation. By default it is comma (<code>,</code>).</td></tr><tr><td>skipComments</td><td>boolean</td><td>Skip lines starting with character &lsquo;#&rsquo;. By default set to false.</td></tr></tbody></table><h3 id=a-idcolumnsacolumns><a id=columns></a>columns<a class=td-heading-self-link href=#a-idcolumnsacolumns aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td>String</td><td>Use 0-based column as the key and variable name as the value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f293af3ce52975d08993b9a7b7f25f4a>6.1.31 - randomFile</h1><div class=lead>Reads bytes from a randomly chosen file into a variable.</div><p>Reads bytes from a randomly chosen file into a variable.<br>Two formats are supported:<br>Example 1 - without weights:</p><pre tabindex=0><code>toVar: myVar
files:
- /path/to/file1.txt
- file2_relative_to_benchmark.txt
</code></pre><p>Example 2 - with weights (the second file will be returned twice as often):</p><pre tabindex=0><code>toVar: myVar
files:
  /path/to/file1.txt: 1
  file2_relative_to_benchmark.txt: 2
</code></pre><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>filenameVar</td><td>String</td><td>Optional variable to store the filename of the random file.</td></tr><tr><td>files</td><td><a href=#files>Builder</a></td><td>Potentially weighted list of files to choose from.</td></tr><tr><td>toVar</td><td>String</td><td>Variable where the chosen byte array should be stored.</td></tr></tbody></table><h3 id=a-idfilesafiles><a id=files></a>files<a class=td-heading-self-link href=#a-idfilesafiles aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td>&lt;list of strings></td><td>Item as the key and weight (arbitrary floating-point number, defaults to 1.0) as the value.</td></tr><tr><td>&lt;list of strings></td><td>&lt;list of strings></td><td>Item as the key and weight (arbitrary floating-point number, defaults to 1.0) as the value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b8714a420ede088560655f9b38be326f>6.1.32 - randomInt</h1><div class=lead>Stores random (linearly distributed) integer into session variable.</div><p>Stores random (linearly distributed) integer into session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>max</td><td><a href=#max>Builder</a></td><td>Highest possible value (inclusive). Default is Integer.MAX_VALUE.</td></tr><tr><td>min</td><td><a href=#min>Builder</a></td><td>Lowest possible value (inclusive). Default is 0.</td></tr><tr><td>toVar</td><td>String</td><td>Variable name to store the result.</td></tr></tbody></table><h3 id=a-idmaxamax><a id=max></a>max<a class=td-heading-self-link href=#a-idmaxamax aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Initialize with a value from session variable.</td></tr><tr><td>value</td><td>int</td><td>Initialize with a constant value.</td></tr></tbody></table><h3 id=a-idminamin><a id=min></a>min<a class=td-heading-self-link href=#a-idminamin aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Initialize with a value from session variable.</td></tr><tr><td>value</td><td>int</td><td>Initialize with a constant value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-9005015d578fa2eb2f299c1142c6d052>6.1.33 - randomItem</h1><div class=lead>Stores random item from a list or array into session variable.</div><p>Stores random item from a list or array into session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>file</td><td>String</td><td>This file will be loaded into memory and the step will choose on line as the item.</td></tr><tr><td>fromVar</td><td>String</td><td>Variable containing an array or list.</td></tr><tr><td>list</td><td><a href=#list>Builder</a></td><td>Potentially weighted list of items to choose from.</td></tr><tr><td>toVar</td><td>String</td><td>Variable where the chosen item should be stored.</td></tr></tbody></table><h3 id=a-idlistalist><a id=list></a>list<a class=td-heading-self-link href=#a-idlistalist aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;any></td><td>&lt;list of strings></td><td>Item as the key and weight (arbitrary floating-point number, defaults to 1.0) as the value.</td></tr><tr><td>&lt;list of strings></td><td>&lt;list of strings></td><td>Item as the key and weight (arbitrary floating-point number, defaults to 1.0) as the value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-195c10345e2ffbdf365398684061f37a>6.1.34 - randomUUID</h1><div class=lead>Stores random string into session variable based on the UUID generator.</div><p>Stores random string into session variable based on the UUID generator.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>toVar</td><td>String</td><td>Variable name to store the result.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a84fab46af5f441b83ae2c8de59f3e79>6.1.35 - readAgentData</h1><div class=lead>Reads data from agent-wide scope into session variable.</div><p>Reads data from agent-wide scope into session variable.<br>The data must be published in a phase that has terminated before this phase starts: usually this is achieved using the <code>startAfterStrict</code> property on the phase.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the identifier and destination session variable.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>Unique identifier for the data.</td></tr><tr><td>toVar</td><td>String</td><td>Destination session variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6d56a2d3d096a82f4b2fc7e0a770aaea>6.1.36 - removeItem</h1><div class=lead>Removes element from an array of variables.</div><p>Removes element from an array of variables.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable containing an existing array of object variables.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Set index at which the item should be removed. Elements to the right of this are moved to the left.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d7680957ae407423805ac8e4262f277d>6.1.37 - restartSequence</h1><div class=lead>Restarts current sequence from beginning.</div><p>Restarts current sequence from beginning.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-befeecc6a64be2902f8125c311e070f5>6.1.38 - scheduleDelay</h1><div class=lead>Define a point in future until which we should wait. Does not cause waiting.</div><p>Define a point in future until which we should wait. Does not cause waiting.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>duration</td><td>String</td><td>Duration of the delay with appropriate suffix (e.g. <code>ms</code> or <code>s</code>).</td></tr><tr><td>fromLast</td><td>&lt;none></td><td>Set previous delay point reference as the reference for next delay point; it will be computed as <code>(previous delay point or now) + duration</code>.<br>Note: property does not have any value</td></tr><tr><td>fromNow</td><td>&lt;none></td><td>Set this step invocation as the delay point reference; it will be computed as <code>now + duration</code>.<br>Note: property does not have any value</td></tr><tr><td>key</td><td>String</td><td>Key that is referenced later in <code>awaitDelay</code> step. If you&rsquo;re introducing the delay through <code>thinkTime</code> do not use this property.</td></tr><tr><td>max</td><td>String</td><td>Upper cap on the duration (if randomized).</td></tr><tr><td>min</td><td>String</td><td>Lower cap on the duration (if randomized).</td></tr><tr><td>random</td><td>enum</td><td>Randomize the duration.<br>Options:{::nomarkdown}<ul><li><code>CONSTANT</code>: {:/}Do not randomize; use constant duration.{::nomarkdown}</li><li><code>LINEAR</code>: {:/}Use linearly random duration between <code>min</code> and <code>max</code> (inclusively).{::nomarkdown}</li><li><code>NEGATIVE_EXPONENTIAL</code>: {:/}Use negative-exponential duration with expected value of <code>duration</code>, capped at <code>min</code> and <code>max</code> (inclusively).{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>type</td><td>enum</td><td>Alternative way to set delay reference point. See <code>fromNow</code> and <code>fromLast</code> property setters.<br>Options:{::nomarkdown}<ul><li><code>FROM_LAST</code></li><li><code>FROM_NOW</code></li></ul>{:/}</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-379fbfec10bbd6aead0bb67ec96aa2d1>6.1.39 - set</h1><div class=lead>Set variable in session to certain value.</div><p>Set variable in session to certain value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>intArray</td><td><a href=#intarray>Builder</a></td><td>Set variable to an (unset) integer array.</td></tr><tr><td>objectArray</td><td><a href=#objectarray>Builder</a></td><td>Set variable to an (unset) object array.</td></tr><tr><td>value</td><td>String</td><td>String value.</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idintarrayaintarray><a id=intArray></a>intArray<a class=td-heading-self-link href=#a-idintarrayaintarray aria-label="Heading self-link"></a></h3><p>Creates integer arrays to be stored in the session.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Contents of the new array. If the variable contains an array or a list, items will be copied to the elements with the same index up to the size of this array. If the variable contains a different value all elements will be initialized to this value.</td></tr><tr><td>size</td><td>int</td><td>Size of the array.</td></tr></tbody></table><h3 id=a-idobjectarrayaobjectarray><a id=objectArray></a>objectArray<a class=td-heading-self-link href=#a-idobjectarrayaobjectarray aria-label="Heading self-link"></a></h3><p>Creates object arrays to be stored in the session.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Contents of the new array. If the variable contains an array or a list, items will be copied to the elements with the same index up to the size of this array. If the variable contains a different value all elements will be initialized to this value.</td></tr><tr><td>size</td><td>int</td><td>Size of the array.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5dd94c75d9bae462384429f2ed42f0a9>6.1.40 - setInt</h1><div class=lead>Set session variable to an integral value.</div><p>Set session variable to an integral value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Set variable only if the current value satisfies certain condition.</td></tr><tr><td>max</td><td><a href=#max>Builder</a></td><td>Set to value that is the maximum of this list of values.</td></tr><tr><td>min</td><td><a href=#min>Builder</a></td><td>Set to value that is the minimum of this list of values.</td></tr><tr><td>onlyIfNotSet</td><td>boolean</td><td>Set variable to the value only if it is not already set.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idmaxamax><a id=max></a>max<a class=td-heading-self-link href=#a-idmaxamax aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#maxlist-of-mappings>&lt;list of builders></a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table><h3 id=a-idmaxltlist-of-mappingsgtamaxltlist-of-mappingsgt><a id="max.<list of mappings>"></a>max.&lt;list of mappings><a class=td-heading-self-link href=#a-idmaxltlist-of-mappingsgtamaxltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idminamin><a id=min></a>min<a class=td-heading-self-link href=#a-idminamin aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#maxlist-of-mappings>&lt;list of builders></a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-fd958bcacb2dee247ab59e3444b295f1>6.1.41 - setItem</h1><div class=lead>Set element in a collection on given position.</div><p>Set element in a collection on given position.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Integer session variable with an index into the collection.</td></tr><tr><td>toVar</td><td>String</td><td>Session variable with the collection.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-61cf6f6b50f73cfa552d6ec97990df5b>6.1.42 - setSharedCounter</h1><div class=lead>Sets value in a counter shared by all sessions in the same executor.</div><p>Sets value in a counter shared by all sessions in the same executor.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the name of the counter and variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-05faae193490781ae8a674b593bf2058>6.1.43 - stop</h1><div class=lead>Immediately stop the user session (break all running sequences).</div><p>Immediately stop the user session (break all running sequences).</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d7c1fb7c7206f12a934394c449169a10>6.1.44 - stopwatch</h1><div class=lead>Run nested sequence of steps, recording execution time.</div><p>Run nested sequence of steps, recording execution time.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3696f2baf330845b249f692a89b45a18>6.1.45 - stringToInt</h1><div class=lead>Parse string into integer and store it in a variable.</div><p>Parse string into integer and store it in a variable.</p><p>If the parsing fails the target variable is not modified.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>fromVar -&amp;gt; toVar</code></td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source variable name.</td></tr><tr><td>toVar</td><td>String</td><td>Target variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-cce6d8c4296b10392693306026ace140>6.1.46 - template</h1><div class=lead>Format <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> into session variable.</div><p>Format <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> into session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>pattern</td><td>String</td><td><a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>Pattern</a> to be encoded, e.g. <code>foo${variable}bar${another-variable}</code></td></tr><tr><td>toVar</td><td>String</td><td>Variable name to store the result.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-cb5766b35df10870bce74cf34202dac6>6.1.47 - thinkTime</h1><div class=lead>Block current sequence for specified duration.</div><p>Block current sequence for specified duration.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Duration of the delay with appropriate suffix (e.g. <code>ms</code> or <code>s</code>).</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>duration</td><td>String</td><td>Duration of the delay with appropriate suffix (e.g. <code>ms</code> or <code>s</code>).</td></tr><tr><td>fromLast</td><td>&lt;none></td><td>Set previous delay point reference as the reference for next delay point; it will be computed as <code>(previous delay point or now) + duration</code>.<br>Note: property does not have any value</td></tr><tr><td>fromNow</td><td>&lt;none></td><td>Set this step invocation as the delay point reference; it will be computed as <code>now + duration</code>.<br>Note: property does not have any value</td></tr><tr><td>key</td><td>String</td><td>Key that is referenced later in <code>awaitDelay</code> step. If you&rsquo;re introducing the delay through <code>thinkTime</code> do not use this property.</td></tr><tr><td>max</td><td>String</td><td>Upper cap on the duration (if randomized).</td></tr><tr><td>min</td><td>String</td><td>Lower cap on the duration (if randomized).</td></tr><tr><td>random</td><td>enum</td><td>Randomize the duration.<br>Options:{::nomarkdown}<ul><li><code>CONSTANT</code>: {:/}Do not randomize; use constant duration.{::nomarkdown}</li><li><code>LINEAR</code>: {:/}Use linearly random duration between <code>min</code> and <code>max</code> (inclusively).{::nomarkdown}</li><li><code>NEGATIVE_EXPONENTIAL</code>: {:/}Use negative-exponential duration with expected value of <code>duration</code>, capped at <code>min</code> and <code>max</code> (inclusively).{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>type</td><td>enum</td><td>Alternative way to set delay reference point. See <code>fromNow</code> and <code>fromLast</code> property setters.<br>Options:{::nomarkdown}<ul><li><code>FROM_LAST</code></li><li><code>FROM_NOW</code></li></ul>{:/}</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8b96576cdcd0dce8739e65796cb1f6df>6.1.48 - timestamp</h1><div class=lead>Stores the current time in milliseconds as string to a session variable.</div><p>Stores the current time in milliseconds as string to a session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>localeCountry</td><td>String</td><td>2-letter ISO country code used in the formatter locale. Defaults to &lsquo;US&rsquo;.</td></tr><tr><td>pattern</td><td>String</td><td>Format the timestamp using <code>SimpleDateFormat</code> pattern.</td></tr><tr><td>toVar</td><td>String</td><td>Target variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-700c22b63653627f8fea4a95484918eb>6.1.49 - unset</h1><div class=lead>Undefine variable name.</div><p>Undefine variable name.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>var</td><td>Object</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d58d66ab51d43ebf96c38f988e82983c>6.2 - Processors</h1><p>Processors can work either as consumers of input bytes (e.g. storing part of the input into session variables), as filters (passing modified version of the input to delegated processors) or combination of the above.</p><p>Some processors can expect extra context in the session, such as an ongoing (HTTP) request. It is possible to use processors that don&rsquo;t expect specific type of request in places where a more specific type is provided; opposite is not allowed.</p><p>Also it is possible to use an <a href=/docs/reference/actions/>action</a> instead of a processor; Hyperfoil automatically inserts an adapter. That&rsquo;s why the list below includes actions as well.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c6a98da7fa8ca189a23e844e4012b80b>6.2.1 - addItem</h1><div class=lead>Appends value to an array stored in another variable.</div><p>Appends value to an array stored in another variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>toVar</td><td>String</td><td>Destination variable with the array.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-0db88721d1dd7d38e258355625bb2026>6.2.2 - addToInt</h1><div class=lead>Add value to integer variable in the session.</div><p>Add value to integer variable in the session.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Accepting one of: <code>var++</code>, <code>var&ndash;</code>, <code>var += value</code>, <code>var -= value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>orElseSetTo</td><td>int</td><td>If the variable is currently not set, set it to this value instead of addition.</td></tr><tr><td>value</td><td>int</td><td>Value added (can be negative).</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7a9ba4a71001710d8deef4648f986302>6.2.3 - addToSharedCounter</h1><div class=lead>Adds value to a counter shared by all sessions in the same executor.</div><p>Adds value to a counter shared by all sessions in the same executor.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use on of: <code>counter++</code>, <code>counter&ndash;</code>, <code>counter += &lt;value></code>,</td></tr><tr><td><code>counter -= &lt;value></code></td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>operator</td><td>enum</td><td>Operation to perform on the counter. Default is <code>ADD</code>.<br>Options:{::nomarkdown}<ul><li><code>ADD</code></li><li><code>SUBTRACT</code></li></ul>{:/}</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-941841d688495dfd99c4085af4e8aad2>6.2.4 - array</h1><div class=lead>Stores data in an array stored as session variable.</div><p>Stores data in an array stored as session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use format <code>toVar[maxSize]</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>format</td><td>enum</td><td>Format into which should this processor convert the buffers before storing. Default is <code>STRING</code>.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>maxSize</td><td>int</td><td>Maximum size of the array.</td></tr><tr><td>silent</td><td>boolean</td><td>Do not log warnings when the maximum size is exceeded.</td></tr><tr><td>toVar</td><td>String</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a70e0c9a6125ee94974f0e0b16ce4b8a>6.2.5 - clearHttpCache</h1><div class=lead>Drops all entries from HTTP cache in the session.</div><p>Drops all entries from HTTP cache in the session.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ee8b3f87b22543f56dcf82ecfef3cf93>6.2.6 - closeConnection</h1><div class=lead>Prevents reuse connection after the response has been handled.</div><p>Prevents reuse connection after the response has been handled.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6e7da6f674ed0624b90ff2ad87b5202f>6.2.7 - collection</h1><div class=lead>Collects results of processor invocation into a unbounded list.</div><p>Collects results of processor invocation into a unbounded list.<br>WARNING: This processor should be used rarely as it allocates memory during the benchmark.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name to store the list.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>format</td><td>enum</td><td>Format into which should this processor convert the buffers before storing. Default is <code>STRING</code>.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>toVar</td><td>String</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6ddd6321f6617b8c6d7bbc0061ffadb5>6.2.8 - conditional</h1><div class=lead>Passes the data to nested processor if the condition holds.</div><p>Passes the data to nested processor if the condition holds.<br>Note that the condition may be evaluated multiple times and therefore any nested processors should not change the results of the condition.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>One or more processors that should be invoked if the condition holds.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-29cabec0d112cde0b69476dc488cfe05>6.2.9 - count</h1><div class=lead>Records number of parts this processor is invoked on.</div><p>Records number of parts this processor is invoked on.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Name of variable for the number of occurrences.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>toVar</td><td>String</td><td>Variable where to store number of occurrences.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-9c3039901b6281342a745968d6d2da69>6.2.10 - fail</h1><div class=lead>Fail the phase with given message. Used mostly for testing/debugging.</div><p>Fail the phase with given message. Used mostly for testing/debugging.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Message to fail with (unconditionally).</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>message</td><td>String</td><td>Message attached to the failure exception.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-65df783747a37cff26abe53a78629094>6.2.11 - getIndex</h1><div class=lead>Lookup index of an item in an array/collection.</div><p>Lookup index of an item in an array/collection.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>collection</td><td>String</td><td>Variable to fetch the collection from.</td></tr><tr><td>item</td><td><a href=#item>Builder</a></td><td>Item that should be looked up (using equality).</td></tr><tr><td>toVar</td><td>String</td><td>Integer variable to store the index, or -1 if the item is not found.</td></tr></tbody></table><h3 id=a-iditemaitem><a id=item></a>item<a class=td-heading-self-link href=#a-iditemaitem aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Verbatim value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d5b280c77ae265626200cac6c8cdc623>6.2.12 - getItem</h1><div class=lead>Retrieves n-th item from an array or collection.</div><p>Retrieves n-th item from an array or collection.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source variable with an array or list.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Source for index into the array/list.</td></tr><tr><td>toVar</td><td>String</td><td>Destination variable for the n-th element.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-301e6531d29e4dc0cea9e96dd57b5297>6.2.13 - getSharedCounter</h1><div class=lead>Retrieves value from a counter shared by all sessions in the same executor and stores that in a session variable.</div><p>Retrieves value from a counter shared by all sessions in the same executor and stores that in a session variable.<br>If the value exceeds allowed integer range (-2^31 .. 2^31 - 1) it is capped.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the key and variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>toVar</td><td>String</td><td>Session variable for storing the value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-95d9df7d4ff152c9d51edbe049b23bcf>6.2.14 - getSize</h1><div class=lead>Calculates size of an array/collection held in variable into another variable</div><p>Calculates size of an array/collection held in variable into another variable</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>boolFilter</td><td><a href=#boolfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>fromVar</td><td>String</td><td>Variable holding the collection.</td></tr><tr><td>intFilter</td><td><a href=#intfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>stringFilter</td><td><a href=#stringfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>toVar</td><td>String</td><td>Variable storing the size.</td></tr><tr><td>undefinedValue</td><td>int</td><td>Value to use when <code>fromVar</code> is unset or it does not contain any array/collection.</td></tr></tbody></table><h3 id=a-idboolfilteraboolfilter><a id=boolFilter></a>boolFilter<a class=td-heading-self-link href=#a-idboolfilteraboolfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintfilteraintfilter><a id=intFilter></a>intFilter<a class=td-heading-self-link href=#a-idintfilteraintfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intfilterequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intfiltergreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intfiltergreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intfilterlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intfilterlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intfilternotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintfilterequaltoaintfilterequalto><a id=intFilter.equalTo></a>intFilter.equalTo<a class=td-heading-self-link href=#a-idintfilterequaltoaintfilterequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfiltergreaterorequaltoaintfiltergreaterorequalto><a id=intFilter.greaterOrEqualTo></a>intFilter.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintfiltergreaterorequaltoaintfiltergreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfiltergreaterthanaintfiltergreaterthan><a id=intFilter.greaterThan></a>intFilter.greaterThan<a class=td-heading-self-link href=#a-idintfiltergreaterthanaintfiltergreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilterlessorequaltoaintfilterlessorequalto><a id=intFilter.lessOrEqualTo></a>intFilter.lessOrEqualTo<a class=td-heading-self-link href=#a-idintfilterlessorequaltoaintfilterlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilterlessthanaintfilterlessthan><a id=intFilter.lessThan></a>intFilter.lessThan<a class=td-heading-self-link href=#a-idintfilterlessthanaintfilterlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilternotequaltoaintfilternotequalto><a id=intFilter.notEqualTo></a>intFilter.notEqualTo<a class=td-heading-self-link href=#a-idintfilternotequaltoaintfilternotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterastringfilter><a id=stringFilter></a>stringFilter<a class=td-heading-self-link href=#a-idstringfilterastringfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringfilterlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringfilterlengthastringfilterlength><a id=stringFilter.length></a>stringFilter.length<a class=td-heading-self-link href=#a-idstringfilterlengthastringfilterlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringfilterlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringfilterlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringfilterlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringfilterlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringfilterlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringfilterlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringfilterlengthequaltoastringfilterlengthequalto><a id=stringFilter.length.equalTo></a>stringFilter.length.equalTo<a class=td-heading-self-link href=#a-idstringfilterlengthequaltoastringfilterlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthgreaterorequaltoastringfilterlengthgreaterorequalto><a id=stringFilter.length.greaterOrEqualTo></a>stringFilter.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthgreaterorequaltoastringfilterlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthgreaterthanastringfilterlengthgreaterthan><a id=stringFilter.length.greaterThan></a>stringFilter.length.greaterThan<a class=td-heading-self-link href=#a-idstringfilterlengthgreaterthanastringfilterlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthlessorequaltoastringfilterlengthlessorequalto><a id=stringFilter.length.lessOrEqualTo></a>stringFilter.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthlessorequaltoastringfilterlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthlessthanastringfilterlengthlessthan><a id=stringFilter.length.lessThan></a>stringFilter.length.lessThan<a class=td-heading-self-link href=#a-idstringfilterlengthlessthanastringfilterlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthnotequaltoastringfilterlengthnotequalto><a id=stringFilter.length.notEqualTo></a>stringFilter.length.notEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthnotequaltoastringfilterlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d50dd140e1d76d6c01ada1c5d4b8fda7>6.2.15 - gzipInflator</h1><div class=lead>Decompresses a GZIP data and pipes the output to delegated processors.</div><p>Decompresses a GZIP data and pipes the output to delegated processors.<br>If the data contains multiple concatenated GZIP streams it will pipe multiple decompressed objects with <code>isLastPart</code> set to true at the end of each stream.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>encodingVar</td><td>Object</td><td>Variable used to pass header value from header handlers.</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Add one or more processors.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2d21f54bb6cd91e17cc346c7e41c540a>6.2.16 - json</h1><div class=lead>Parses JSON responses using simple queries.</div><p>Parses JSON responses using simple queries.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>delete</td><td>boolean</td><td>If this is set to true, the selected key will be deleted from the JSON and the modified JSON will be passed to the <code>processor</code>.</td></tr><tr><td>format</td><td>enum</td><td>Conversion to apply on the matching parts with &rsquo;toVar&rsquo; or &rsquo;toArray&rsquo; shortcuts.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Add one or more processors.</td></tr><tr><td>processor (alternative)</td><td><a href=index.html#processors>Processor.Builder</a></td><td>If neither <code>delete</code> or <code>replace</code> was set this processor will be called with the selected parts. In the other case the processor will be called with chunks of full (modified) JSON.<p>Note that the <code>processor.before()</code> and <code>processor.after()</code> methods are called only once for each request, not for the individual filtered items.</td></tr><tr><td>query</td><td>String</td><td>Query selecting the part of JSON.</td></tr><tr><td>replace</td><td><a href=#replace>Transformer.Builder</a></td><td>Custom transformation executed on the value of the selected item. Note that the output value must contain quotes (if applicable) and be correctly escaped.</td></tr><tr><td>replace (alternative)</td><td>String</td><td>Replace value of selected item with value generated through a <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a>. Note that the result must contain quotes and be correctly escaped.</td></tr><tr><td>toArray</td><td>String</td><td>Shortcut to store selected parts in an array in the session. Must follow the pattern <code>variable[maxSize]</code></td></tr><tr><td>toVar</td><td>String</td><td>Shortcut to store first match in given variable. Further matches are ignored.</td></tr><tr><td>unquote</td><td>boolean</td><td>Automatically unquote and unescape the input values. By default true.</td></tr></tbody></table><h3 id=a-idreplaceareplace><a id=replace></a>replace<a class=td-heading-self-link href=#a-idreplaceareplace aria-label="Heading self-link"></a></h3><p>Custom transformation executed on the value of the selected item. Note that the output value must contain quotes (if applicable) and be correctly escaped.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>actions</td><td><a href=#replaceactions>ActionsTransformer.Builder</a></td><td>This transformer stores the (defragmented) input into a variable, using requested format. After that it executes all the actions and fetches transformed value using the pattern.</td></tr><tr><td>pattern</td><td><a href=#replacepattern>Pattern.TransformerBuilder</a></td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr></tbody></table><h3 id=a-idreplaceactionsareplaceactions><a id=replace.actions></a>replace.actions<a class=td-heading-self-link href=#a-idreplaceactionsareplaceactions aria-label="Heading self-link"></a></h3><p>This transformer stores the (defragmented) input into a variable, using requested format. After that it executes all the actions and fetches transformed value using the pattern.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>actions</td><td><a href=index.html#actions>Action.Builder</a></td><td>Actions to be executed.</td></tr><tr><td>format</td><td>enum</td><td>Format into which should this transformer convert the buffers before storing. Default is <code>STRING</code>.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>pattern</td><td>String</td><td><a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>Pattern</a> to use when fetching the transformed value.</td></tr><tr><td>var</td><td>String</td><td>Variable used as the intermediate storage for the data.</td></tr></tbody></table><h3 id=a-idreplacepatternareplacepattern><a id=replace.pattern></a>replace.pattern<a class=td-heading-self-link href=#a-idreplacepatternareplacepattern aria-label="Heading self-link"></a></h3><p>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>The pattern formatting string.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>pattern</td><td>String</td><td>Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>pattern</a> replacing session variables.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-260b076bd79058665f49e01d52706c32>6.2.17 - log</h1><div class=lead>Log a message and variable values.</div><p>Log a message and variable values.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>String</td><td>Message format pattern. Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a> for variables.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ac4007d930dd714bc06a7a55f02aac95>6.2.18 - logInvalid</h1><div class=lead>Logs body chunks from requests marked as invalid.</div><p>Logs body chunks from requests marked as invalid.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b35bd7bfd80e7b5e803b17a9da2828f0>6.2.19 - markRequestInvalid</h1><div class=lead>Unconditionally mark currently processed request as invalid.</div><p>Unconditionally mark currently processed request as invalid.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d25ee192e40b2fd40e5f984976b60c1c>6.2.20 - newSequence</h1><div class=lead>Instantiates a sequence for each invocation.</div><p>Instantiates a sequence for each invocation.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Sequence name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>concurrencyPolicy</td><td>enum</td><td><br>Options:{::nomarkdown}<ul><li><code>FAIL</code></li><li><code>WARN</code></li></ul>{:/}</td></tr><tr><td>forceSameIndex</td><td>boolean</td><td>Forces that the sequence will have the same index as the currently executing sequence. This can be useful if the sequence is passing some data to the new sequence using sequence-scoped variables. Note that the new sequence must have same concurrency factor as the currently executing sequence.</td></tr><tr><td>sequence</td><td>String</td><td>Name of the instantiated sequence.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ad0a401854c7ced964e8416a651a1341>6.2.21 - parseHtml</h1><div class=lead>Parses HTML tags and invokes handlers based on criteria.</div><p>Parses HTML tags and invokes handlers based on criteria.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>onEmbeddedResource</td><td><a href=#onembeddedresource>Builder</a></td><td>Handler firing upon reference to other resource, e.g. image, stylesheet&mldr;</td></tr><tr><td>onTagAttribute</td><td><a href=#ontagattribute>Builder</a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table><h3 id=a-idonembeddedresourceaonembeddedresource><a id=onEmbeddedResource></a>onEmbeddedResource<a class=td-heading-self-link href=#a-idonembeddedresourceaonembeddedresource aria-label="Heading self-link"></a></h3><p>Handles <code>&lt;img src="&mldr;"></code>, <code>&lt;link href="&mldr;"></code>, <code>&lt;embed src="&mldr;"></code>, <code>&lt;frame src="&mldr;"></code>, <code>&lt;iframe src="&mldr;"></code>, <code>&lt;object data="&mldr;"></code> and <code>&lt;script src="&mldr;"></code>.</p><p>Does not handle <code>&lt;source src="&mldr;"></code> or <code>&lt;track src="&mldr;"></code> because browser would choose only one of the options.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fetchResource</td><td><a href=#onembeddedresourcefetchresource>Builder</a></td><td>Automatically download referenced resource.</td></tr><tr><td>ignoreExternal</td><td>boolean</td><td>Ignore resources hosted on servers that are not covered in the <code>http</code> section.</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Add one or more processors.</td></tr><tr><td>processor (alternative)</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Custom processor invoked pointing to attribute data - e.g. in case of <code>&lt;img></code> tag the processor gets contents of the <code>src</code> attribute.</td></tr></tbody></table><h3 id=a-idonembeddedresourcefetchresourceaonembeddedresourcefetchresource><a id=onEmbeddedResource.fetchResource></a>onEmbeddedResource.fetchResource<a class=td-heading-self-link href=#a-idonembeddedresourcefetchresourceaonembeddedresourcefetchresource aria-label="Heading self-link"></a></h3><p>Automates download of embedded resources.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>concurrency</td><td>int</td><td>Maximum number of resources fetched concurrently. Default is 8.</td></tr><tr><td>maxResources</td><td>int</td><td>Maximum number of resources that can be fetched.</td></tr><tr><td>metric</td><td><a href=#onembeddedresourcefetchresourcemetric>&lt;list of strings></a></td><td>Metrics selector for downloaded resources.</td></tr><tr><td>onCompletion</td><td><a href=index.html#actions>Action.Builder</a></td><td>Action performed when the download of all resources completes.</td></tr></tbody></table><h3 id=a-idonembeddedresourcefetchresourcemetricaonembeddedresourcefetchresourcemetric><a id=onEmbeddedResource.fetchResource.metric></a>onEmbeddedResource.fetchResource.metric<a class=td-heading-self-link href=#a-idonembeddedresourcefetchresourcemetricaonembeddedresourcefetchresourcemetric aria-label="Heading self-link"></a></h3><p>Metrics selector for downloaded resources.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of strings></td><td>&lt;list of strings></td><td>{::nomarkdown}Allows categorizing request statistics into metrics based on the request path. The expressions are evaluated in the order as provided in the list. Use one of:<ul><li><code>regexp -> replacement</code>, e.g. <code>([^?]<em>)(?.</em>)? -> $1</code> to drop the query part.<li><code>regexp</code> (don&rsquo;t do any replaces and use the full path), e.g. <code>.*.jpg</code><li><code>-> name</code> (metric applied if none of the previous expressions match).</ul>{:/}</td></tr></tbody></table><h3 id=a-idontagattributeaontagattribute><a id=onTagAttribute></a>onTagAttribute<a class=td-heading-self-link href=#a-idontagattributeaontagattribute aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>attribute</td><td>String</td><td>Name of the attribute in this element you want to process, e.g. <code>action</code></td></tr><tr><td>format</td><td>enum</td><td>Conversion to apply on the matching parts with &rsquo;toVar&rsquo; or &rsquo;toArray&rsquo; shortcuts.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>processor</td><td><a href=index.html#processors>Processor.Builder</a></td><td>Add one or more processors.</td></tr><tr><td>tag</td><td>String</td><td>Name of the tag this handler should look for, e.g. <code>form</code></td></tr><tr><td>toArray</td><td>String</td><td>Shortcut to store selected parts in an array in the session. Must follow the pattern <code>variable[maxSize]</code></td></tr><tr><td>toVar</td><td>String</td><td>Shortcut to store first match in given variable. Further matches are ignored.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-457b70bdb85c3e5f12afdca1ca35e73f>6.2.22 - publishAgentData</h1><div class=lead>Makes the data available to all sessions in the same agent, including those using different executors.</div><p>Makes the data available to all sessions in the same agent, including those using different executors.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both name of source variable and the key used to read the data.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source session variable name.</td></tr><tr><td>name</td><td>String</td><td>Arbitrary unique identifier for the data.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b837ec7195bc4d5f13fb7b683cec1bea>6.2.23 - publishGlobalCounters</h1><div class=lead>Gathers values from session variables and publishes them globally (to all agents).</div><p>Gathers values from session variables and publishes them globally (to all agents).<br>You can name the counters individually (example 1) or use the variable names (example 2):<br></p><pre tabindex=0><code class="language-<code>" data-lang="<code>"># Example 1:
- publishGlobalCounters:
    key: myKey
    vars: [ foo, bar ]
# Example 2:
- publishGlobalCounters:
    key: someOtherKey
    vars:
    - foo: myFoo
    - bar: bbb
&lt;/code&gt;```


| Property | Type | Description |
| ------- | ------- | -------- |
| key | String | Identifier of the global record. |
| vars | [Builder](#vars) | List of names and session variables. |

### &lt;a id=&#34;vars&#34;&gt;&lt;/a&gt;vars

| Property | Type | Description |
| ------- | ------- | ------- |
| &amp;lt;any&amp;gt; | &amp;lt;unknown&amp;gt; | &lt;font color=&#34;#606060&#34;&gt;&amp;lt;no description&amp;gt;&lt;/font&gt; |
| &amp;lt;list of strings&amp;gt; | &amp;lt;unknown&amp;gt; | &lt;font color=&#34;#606060&#34;&gt;&amp;lt;no description&amp;gt;&lt;/font&gt; |
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-11724288b9a33a3829264bc59f241ae0>6.2.24 - queue</h1><div class=lead>Stores defragmented data in a queue.</div><p>Stores defragmented data in a queue.<br>For each item in the queue a new sequence instance will be started (subject the concurrency constraints) with sequence index that allows it to read an object from an array using sequence-scoped access.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>concurrency</td><td>int</td><td>Maximum number of started sequences that can be running at one moment.</td></tr><tr><td>format</td><td>enum</td><td>Conversion format from byte buffers. Default format is STRING.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>maxSize</td><td>int</td><td>Maximum number of elements that can be stored in the queue.</td></tr><tr><td>onCompletion</td><td><a href=index.html#actions>Action.Builder</a></td><td>Custom action that should be performed when the last consuming sequence reports that it has processed the last element from the queue. Note that the sequence is NOT automatically augmented to report completion.</td></tr><tr><td>sequence</td><td>String</td><td>Name of the started sequence.</td></tr><tr><td>var</td><td>String</td><td>Variable storing the array that it used as a output object from the queue.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-16e230848c596645efa69837609278d3>6.2.25 - readAgentData</h1><div class=lead>Reads data from agent-wide scope into session variable.</div><p>Reads data from agent-wide scope into session variable.<br>The data must be published in a phase that has terminated before this phase starts: usually this is achieved using the <code>startAfterStrict</code> property on the phase.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the identifier and destination session variable.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>Unique identifier for the data.</td></tr><tr><td>toVar</td><td>String</td><td>Destination session variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2257a9b3db64c84638585c5051c78af5>6.2.26 - removeItem</h1><div class=lead>Removes element from an array of variables.</div><p>Removes element from an array of variables.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable containing an existing array of object variables.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Set index at which the item should be removed. Elements to the right of this are moved to the left.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c68e8e3c3b8d06a74245e633b22113a5>6.2.27 - restartSequence</h1><div class=lead>Schedules a restart of this sequence.</div><p>Schedules a restart of this sequence.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-267e18c4a8af2f705ba7cad32e5708a9>6.2.28 - set</h1><div class=lead>Set variable in session to certain value.</div><p>Set variable in session to certain value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>intArray</td><td><a href=#intarray>Builder</a></td><td>Set variable to an (unset) integer array.</td></tr><tr><td>objectArray</td><td><a href=#objectarray>Builder</a></td><td>Set variable to an (unset) object array.</td></tr><tr><td>value</td><td>String</td><td>String value.</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idintarrayaintarray><a id=intArray></a>intArray<a class=td-heading-self-link href=#a-idintarrayaintarray aria-label="Heading self-link"></a></h3><p>Creates integer arrays to be stored in the session.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Contents of the new array. If the variable contains an array or a list, items will be copied to the elements with the same index up to the size of this array. If the variable contains a different value all elements will be initialized to this value.</td></tr><tr><td>size</td><td>int</td><td>Size of the array.</td></tr></tbody></table><h3 id=a-idobjectarrayaobjectarray><a id=objectArray></a>objectArray<a class=td-heading-self-link href=#a-idobjectarrayaobjectarray aria-label="Heading self-link"></a></h3><p>Creates object arrays to be stored in the session.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Contents of the new array. If the variable contains an array or a list, items will be copied to the elements with the same index up to the size of this array. If the variable contains a different value all elements will be initialized to this value.</td></tr><tr><td>size</td><td>int</td><td>Size of the array.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-970e4f2f6bd04e795dbd209d9f06e708>6.2.29 - setInt</h1><div class=lead>Set session variable to an integral value.</div><p>Set session variable to an integral value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Set variable only if the current value satisfies certain condition.</td></tr><tr><td>max</td><td><a href=#max>Builder</a></td><td>Set to value that is the maximum of this list of values.</td></tr><tr><td>min</td><td><a href=#min>Builder</a></td><td>Set to value that is the minimum of this list of values.</td></tr><tr><td>onlyIfNotSet</td><td>boolean</td><td>Set variable to the value only if it is not already set.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idmaxamax><a id=max></a>max<a class=td-heading-self-link href=#a-idmaxamax aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#maxlist-of-mappings>&lt;list of builders></a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table><h3 id=a-idmaxltlist-of-mappingsgtamaxltlist-of-mappingsgt><a id="max.<list of mappings>"></a>max.&lt;list of mappings><a class=td-heading-self-link href=#a-idmaxltlist-of-mappingsgtamaxltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idminamin><a id=min></a>min<a class=td-heading-self-link href=#a-idminamin aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#maxlist-of-mappings>&lt;list of builders></a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5407eb11385ddbfef4cb5b8546ef075a>6.2.30 - setItem</h1><div class=lead>Set element in a collection on given position.</div><p>Set element in a collection on given position.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Integer session variable with an index into the collection.</td></tr><tr><td>toVar</td><td>String</td><td>Session variable with the collection.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d020fdb98405f6dca8bb94c51f6d102d>6.2.31 - setSharedCounter</h1><div class=lead>Sets value in a counter shared by all sessions in the same executor.</div><p>Sets value in a counter shared by all sessions in the same executor.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the name of the counter and variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7d7cd197e0840b4b25b0a02ab4c472e4>6.2.32 - store</h1><div class=lead>Stores data in a session variable (overwriting on multiple occurences).</div><p>Stores data in a session variable (overwriting on multiple occurences).</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>format</td><td>enum</td><td>Format into which should this processor convert the buffers before storing. Default is <code>STRING</code>.<br>Options:{::nomarkdown}<ul><li><code>BYTEBUF</code>: {:/}Store the buffer directly. Beware that this may cause memory leaks!{::nomarkdown}</li><li><code>BYTES</code>: {:/}Store data as byte array.{::nomarkdown}</li><li><code>STRING</code>: {:/}Interprets the bytes as UTF-8 string.{::nomarkdown}</li></ul>{:/}</td></tr><tr><td>toVar</td><td>Object</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-662d636570fc2c2d7f0c597afd51129d>6.2.33 - storeInt</h1><div class=lead>Converts buffers into integral value and stores it in a variable.</div><p>Converts buffers into integral value and stores it in a variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Name of integer variable where to store the value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>override</td><td>boolean</td><td>Allow the value to be set multiple times (last write wins). Defaults to false.</td></tr><tr><td>toVar</td><td>String</td><td>Name of variable where to store the integral value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2d85a60551e09cadf9b49cf16f948cb4>6.2.34 - stringToInt</h1><div class=lead>Parse string into integer and store it in a variable.</div><p>Parse string into integer and store it in a variable.</p><p>If the parsing fails the target variable is not modified.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>fromVar -&amp;gt; toVar</code></td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source variable name.</td></tr><tr><td>toVar</td><td>String</td><td>Target variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-dc4fa9227de31ad76ba6e1c1a473d933>6.2.35 - unset</h1><div class=lead>Undefine variable name.</div><p>Undefine variable name.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>var</td><td>Object</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-74d7fed089124b33bcdb2c3efbb5649b>6.3 - Actions</h1><p>Actions are non-blocking handlers for various events.</p></div><div class=td-content><h1 id=pg-b62021bf8767fe329413e3899c00ebbb>6.3.1 - addItem</h1><div class=lead>Appends value to an array stored in another variable.</div><p>Appends value to an array stored in another variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>toVar</td><td>String</td><td>Destination variable with the array.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-9da2846d51e05ffc0b7922b6c3baa697>6.3.2 - addToInt</h1><div class=lead>Add value to integer variable in the session.</div><p>Add value to integer variable in the session.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Accepting one of: <code>var++</code>, <code>var&ndash;</code>, <code>var += value</code>, <code>var -= value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>orElseSetTo</td><td>int</td><td>If the variable is currently not set, set it to this value instead of addition.</td></tr><tr><td>value</td><td>int</td><td>Value added (can be negative).</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2f7912fe74b800e17fae0f314db37626>6.3.3 - addToSharedCounter</h1><div class=lead>Adds value to a counter shared by all sessions in the same executor.</div><p>Adds value to a counter shared by all sessions in the same executor.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use on of: <code>counter++</code>, <code>counter&ndash;</code>, <code>counter += &lt;value></code>,</td></tr><tr><td><code>counter -= &lt;value></code></td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>operator</td><td>enum</td><td>Operation to perform on the counter. Default is <code>ADD</code>.<br>Options:{::nomarkdown}<ul><li><code>ADD</code></li><li><code>SUBTRACT</code></li></ul>{:/}</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-246385c09927d0f4591927cf9e268b1c>6.3.4 - clearHttpCache</h1><div class=lead>Drops all entries from HTTP cache in the session.</div><p>Drops all entries from HTTP cache in the session.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d955a012ec099127d0b6c38ddbd62fb1>6.3.5 - conditional</h1><div class=lead>Perform an action or sequence of actions conditionally.</div><p>Perform an action or sequence of actions conditionally.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>actions</td><td><a href=index.html#actions>Action.Builder</a></td><td>Actions that should be executed should the condition hold.</td></tr><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2fa8979b1dea4fc8a6f2d1a86b18f755>6.3.6 - fail</h1><div class=lead>Fail the phase with given message. Used mostly for testing/debugging.</div><p>Fail the phase with given message. Used mostly for testing/debugging.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Message to fail with (unconditionally).</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#boolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>message</td><td>String</td><td>Message attached to the failure exception.</td></tr><tr><td>stringCondition</td><td><a href=#stringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsaallconditions><a id=allConditions></a>allConditions<a class=td-heading-self-link href=#a-idallconditionsaallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt><a id="allConditions.<list of mappings>"></a>allConditions.&lt;list of mappings><a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtaallconditionsltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><p>Selector for condition type.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>allConditions</td><td><a href=#allconditionslist-of-mappingsallconditions>Builder</a></td><td>Condition combining multiple other conditions with &lsquo;AND&rsquo; logic.</td></tr><tr><td>boolCondition</td><td><a href=#allconditionslist-of-mappingsboolcondition>Builder</a></td><td>Condition comparing boolean variables.</td></tr><tr><td>intCondition</td><td><a href=#allconditionslist-of-mappingsintcondition>Builder</a></td><td>Condition comparing integer variables.</td></tr><tr><td>stringCondition</td><td><a href=#allconditionslist-of-mappingsstringcondition>Builder</a></td><td>Condition comparing string variables.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions><a id="allConditions.<list of mappings>.allConditions"></a>allConditions.&lt;list of mappings>.allConditions<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtallconditionsaallconditionsltlist-of-mappingsgtallconditions aria-label="Heading self-link"></a></h3><p>Test more conditions and combine the results using AND logic.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#allconditionslist-of-mappings>&lt;list of builders></a></td><td>List of conditions.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition><a id="allConditions.<list of mappings>.boolCondition"></a>allConditions.&lt;list of mappings>.boolCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtboolconditionaallconditionsltlist-of-mappingsgtboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition><a id="allConditions.<list of mappings>.intCondition"></a>allConditions.&lt;list of mappings>.intCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtintconditionaallconditionsltlist-of-mappingsgtintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition><a id="allConditions.<list of mappings>.stringCondition"></a>allConditions.&lt;list of mappings>.stringCondition<a class=td-heading-self-link href=#a-idallconditionsltlist-of-mappingsgtstringconditionaallconditionsltlist-of-mappingsgtstringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idboolconditionaboolcondition><a id=boolCondition></a>boolCondition<a class=td-heading-self-link href=#a-idboolconditionaboolcondition aria-label="Heading self-link"></a></h3><p>Tests session variable containing boolean value.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable name.</td></tr><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><p>Condition comparing integer in session variable.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Parses condition in the form &lt;variable> &lt;operator> &lt;value></td></tr><tr><td>where operator is one of: <code>==</code>, <code>!=</code>,</td></tr><tr><td><code>&lt;></code> (the same as <code>!=</code>),</td></tr><tr><td><code>>=</code>, <code>></code>, <code>&lt;=</code>, <code>&lt;</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionastringcondition><a id=stringCondition></a>stringCondition<a class=td-heading-self-link href=#a-idstringconditionastringcondition aria-label="Heading self-link"></a></h3><p>Condition comparing string in session variable.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>fromVar</td><td>Object</td><td>Variable name.</td></tr><tr><td>isSet</td><td>boolean</td><td>Check if the value is set or unset. By default the variable must be set.</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringconditionlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringconditionlengthastringconditionlength><a id=stringCondition.length></a>stringCondition.length<a class=td-heading-self-link href=#a-idstringconditionlengthastringconditionlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringconditionlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringconditionlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringconditionlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringconditionlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringconditionlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringconditionlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringconditionlengthequaltoastringconditionlengthequalto><a id=stringCondition.length.equalTo></a>stringCondition.length.equalTo<a class=td-heading-self-link href=#a-idstringconditionlengthequaltoastringconditionlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto><a id=stringCondition.length.greaterOrEqualTo></a>stringCondition.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterorequaltoastringconditionlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan><a id=stringCondition.length.greaterThan></a>stringCondition.length.greaterThan<a class=td-heading-self-link href=#a-idstringconditionlengthgreaterthanastringconditionlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto><a id=stringCondition.length.lessOrEqualTo></a>stringCondition.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthlessorequaltoastringconditionlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthlessthanastringconditionlengthlessthan><a id=stringCondition.length.lessThan></a>stringCondition.length.lessThan<a class=td-heading-self-link href=#a-idstringconditionlengthlessthanastringconditionlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto><a id=stringCondition.length.notEqualTo></a>stringCondition.length.notEqualTo<a class=td-heading-self-link href=#a-idstringconditionlengthnotequaltoastringconditionlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d93bc9b636a58fac68f968b3be2f039b>6.3.7 - getIndex</h1><div class=lead>Lookup index of an item in an array/collection.</div><p>Lookup index of an item in an array/collection.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>collection</td><td>String</td><td>Variable to fetch the collection from.</td></tr><tr><td>item</td><td><a href=#item>Builder</a></td><td>Item that should be looked up (using equality).</td></tr><tr><td>toVar</td><td>String</td><td>Integer variable to store the index, or -1 if the item is not found.</td></tr></tbody></table><h3 id=a-iditemaitem><a id=item></a>item<a class=td-heading-self-link href=#a-iditemaitem aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Verbatim value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-dee98ce631adfb4aa2af130b79db583b>6.3.8 - getItem</h1><div class=lead>Retrieves n-th item from an array or collection.</div><p>Retrieves n-th item from an array or collection.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source variable with an array or list.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Source for index into the array/list.</td></tr><tr><td>toVar</td><td>String</td><td>Destination variable for the n-th element.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b26c7b4835115c9139856307b38c2944>6.3.9 - getSharedCounter</h1><div class=lead>Retrieves value from a counter shared by all sessions in the same executor and stores that in a session variable.</div><p>Retrieves value from a counter shared by all sessions in the same executor and stores that in a session variable.<br>If the value exceeds allowed integer range (-2^31 .. 2^31 - 1) it is capped.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the key and variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>toVar</td><td>String</td><td>Session variable for storing the value.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3e06ffb5a33af65633b353eb4b62ce0a>6.3.10 - getSize</h1><div class=lead>Calculates size of an array/collection held in variable into another variable</div><p>Calculates size of an array/collection held in variable into another variable</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>boolFilter</td><td><a href=#boolfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>fromVar</td><td>String</td><td>Variable holding the collection.</td></tr><tr><td>intFilter</td><td><a href=#intfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>stringFilter</td><td><a href=#stringfilter>Builder</a></td><td>Count only items matching the condition.</td></tr><tr><td>toVar</td><td>String</td><td>Variable storing the size.</td></tr><tr><td>undefinedValue</td><td>int</td><td>Value to use when <code>fromVar</code> is unset or it does not contain any array/collection.</td></tr></tbody></table><h3 id=a-idboolfilteraboolfilter><a id=boolFilter></a>boolFilter<a class=td-heading-self-link href=#a-idboolfilteraboolfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td>boolean</td><td>Expected value.</td></tr></tbody></table><h3 id=a-idintfilteraintfilter><a id=intFilter></a>intFilter<a class=td-heading-self-link href=#a-idintfilteraintfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intfilterequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intfiltergreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intfiltergreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intfilterlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intfilterlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intfilternotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintfilterequaltoaintfilterequalto><a id=intFilter.equalTo></a>intFilter.equalTo<a class=td-heading-self-link href=#a-idintfilterequaltoaintfilterequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfiltergreaterorequaltoaintfiltergreaterorequalto><a id=intFilter.greaterOrEqualTo></a>intFilter.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintfiltergreaterorequaltoaintfiltergreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfiltergreaterthanaintfiltergreaterthan><a id=intFilter.greaterThan></a>intFilter.greaterThan<a class=td-heading-self-link href=#a-idintfiltergreaterthanaintfiltergreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilterlessorequaltoaintfilterlessorequalto><a id=intFilter.lessOrEqualTo></a>intFilter.lessOrEqualTo<a class=td-heading-self-link href=#a-idintfilterlessorequaltoaintfilterlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilterlessthanaintfilterlessthan><a id=intFilter.lessThan></a>intFilter.lessThan<a class=td-heading-self-link href=#a-idintfilterlessthanaintfilterlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintfilternotequaltoaintfilternotequalto><a id=intFilter.notEqualTo></a>intFilter.notEqualTo<a class=td-heading-self-link href=#a-idintfilternotequaltoaintfilternotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterastringfilter><a id=stringFilter></a>stringFilter<a class=td-heading-self-link href=#a-idstringfilterastringfilter aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>caseSensitive</td><td>boolean</td><td>True if the case must match, false if the check is case-insensitive.</td></tr><tr><td>endsWith</td><td>CharSequence</td><td>Suffix for the string.</td></tr><tr><td>equalTo</td><td>CharSequence</td><td>Literal value the string should match (the same as {@link #value}).</td></tr><tr><td>length</td><td>int</td><td>Check the length of the string.</td></tr><tr><td>length (alternative)</td><td><a href=#stringfilterlength>Builder</a></td><td>Check the length of the string.</td></tr><tr><td>matchVar</td><td>String</td><td>Fetch the value from a variable.</td></tr><tr><td>negate</td><td>boolean</td><td>Invert the logic of this condition. Defaults to false.</td></tr><tr><td>notEqualTo</td><td>CharSequence</td><td>Value that the string must not match.</td></tr><tr><td>startsWith</td><td>CharSequence</td><td>Prefix for the string.</td></tr><tr><td>value</td><td>CharSequence</td><td>Literal value the string should match.</td></tr></tbody></table><h3 id=a-idstringfilterlengthastringfilterlength><a id=stringFilter.length></a>stringFilter.length<a class=td-heading-self-link href=#a-idstringfilterlengthastringfilterlength aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#stringfilterlengthequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#stringfilterlengthgreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#stringfilterlengthgreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#stringfilterlengthlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#stringfilterlengthlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#stringfilterlengthnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idstringfilterlengthequaltoastringfilterlengthequalto><a id=stringFilter.length.equalTo></a>stringFilter.length.equalTo<a class=td-heading-self-link href=#a-idstringfilterlengthequaltoastringfilterlengthequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthgreaterorequaltoastringfilterlengthgreaterorequalto><a id=stringFilter.length.greaterOrEqualTo></a>stringFilter.length.greaterOrEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthgreaterorequaltoastringfilterlengthgreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthgreaterthanastringfilterlengthgreaterthan><a id=stringFilter.length.greaterThan></a>stringFilter.length.greaterThan<a class=td-heading-self-link href=#a-idstringfilterlengthgreaterthanastringfilterlengthgreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthlessorequaltoastringfilterlengthlessorequalto><a id=stringFilter.length.lessOrEqualTo></a>stringFilter.length.lessOrEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthlessorequaltoastringfilterlengthlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthlessthanastringfilterlengthlessthan><a id=stringFilter.length.lessThan></a>stringFilter.length.lessThan<a class=td-heading-self-link href=#a-idstringfilterlengthlessthanastringfilterlengthlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idstringfilterlengthnotequaltoastringfilterlengthnotequalto><a id=stringFilter.length.notEqualTo></a>stringFilter.length.notEqualTo<a class=td-heading-self-link href=#a-idstringfilterlengthnotequaltoastringfilterlengthnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d9449f224c6e246e88400e4e7a08d8e9>6.3.11 - log</h1><div class=lead>Log a message and variable values.</div><p>Log a message and variable values.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>A pattern for <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>String</td><td>Message format pattern. Use <a href=https://hyperfoil.io/userguide/benchmark/variables.html#string-interpolation>string interpolation</a> for variables.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5153fe174fcce597181a2f3004ef8bc0>6.3.12 - markRequestInvalid</h1><div class=lead>Unconditionally mark currently processed request as invalid.</div><p>Unconditionally mark currently processed request as invalid.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-fa80e554549d2fa20f35c366eacdb27d>6.3.13 - newSequence</h1><div class=lead>Instantiates a sequence for each invocation.</div><p>Instantiates a sequence for each invocation.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Sequence name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>concurrencyPolicy</td><td>enum</td><td><br>Options:{::nomarkdown}<ul><li><code>FAIL</code></li><li><code>WARN</code></li></ul>{:/}</td></tr><tr><td>forceSameIndex</td><td>boolean</td><td>Forces that the sequence will have the same index as the currently executing sequence. This can be useful if the sequence is passing some data to the new sequence using sequence-scoped variables. Note that the new sequence must have same concurrency factor as the currently executing sequence.</td></tr><tr><td>sequence</td><td>String</td><td>Name of the instantiated sequence.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4bba38f9f42ceaeb756243178f080e31>6.3.14 - publishAgentData</h1><div class=lead>Makes the data available to all sessions in the same agent, including those using different executors.</div><p>Makes the data available to all sessions in the same agent, including those using different executors.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both name of source variable and the key used to read the data.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source session variable name.</td></tr><tr><td>name</td><td>String</td><td>Arbitrary unique identifier for the data.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-590f6b5f042d7f1885e536d772e34c57>6.3.15 - publishGlobalCounters</h1><div class=lead>Gathers values from session variables and publishes them globally (to all agents).</div><p>Gathers values from session variables and publishes them globally (to all agents).<br>You can name the counters individually (example 1) or use the variable names (example 2):<br></p><pre tabindex=0><code class="language-<code>" data-lang="<code>"># Example 1:
- publishGlobalCounters:
    key: myKey
    vars: [ foo, bar ]
# Example 2:
- publishGlobalCounters:
    key: someOtherKey
    vars:
    - foo: myFoo
    - bar: bbb
&lt;/code&gt;```


| Property | Type | Description |
| ------- | ------- | -------- |
| key | String | Identifier of the global record. |
| vars | [Builder](#vars) | List of names and session variables. |

### &lt;a id=&#34;vars&#34;&gt;&lt;/a&gt;vars

| Property | Type | Description |
| ------- | ------- | ------- |
| &amp;lt;any&amp;gt; | &amp;lt;unknown&amp;gt; | &lt;font color=&#34;#606060&#34;&gt;&amp;lt;no description&amp;gt;&lt;/font&gt; |
| &amp;lt;list of strings&amp;gt; | &amp;lt;unknown&amp;gt; | &lt;font color=&#34;#606060&#34;&gt;&amp;lt;no description&amp;gt;&lt;/font&gt; |
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-5d63fa47ba28317dfe36c8eafc9c5db0>6.3.16 - readAgentData</h1><div class=lead>Reads data from agent-wide scope into session variable.</div><p>Reads data from agent-wide scope into session variable.<br>The data must be published in a phase that has terminated before this phase starts: usually this is achieved using the <code>startAfterStrict</code> property on the phase.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the identifier and destination session variable.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>Unique identifier for the data.</td></tr><tr><td>toVar</td><td>String</td><td>Destination session variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-0dacfdb49e9275c001a76822ff4cf326>6.3.17 - removeItem</h1><div class=lead>Removes element from an array of variables.</div><p>Removes element from an array of variables.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Variable containing an existing array of object variables.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Set index at which the item should be removed. Elements to the right of this are moved to the left.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-667cfcde3f17de06ea0619158cac8dd8>6.3.18 - restartSequence</h1><div class=lead>Schedules a restart of this sequence.</div><p>Schedules a restart of this sequence.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9e9ca1e14e699cccdab44e3b0c924c57>6.3.19 - set</h1><div class=lead>Set variable in session to certain value.</div><p>Set variable in session to certain value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>intArray</td><td><a href=#intarray>Builder</a></td><td>Set variable to an (unset) integer array.</td></tr><tr><td>objectArray</td><td><a href=#objectarray>Builder</a></td><td>Set variable to an (unset) object array.</td></tr><tr><td>value</td><td>String</td><td>String value.</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idintarrayaintarray><a id=intArray></a>intArray<a class=td-heading-self-link href=#a-idintarrayaintarray aria-label="Heading self-link"></a></h3><p>Creates integer arrays to be stored in the session.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Contents of the new array. If the variable contains an array or a list, items will be copied to the elements with the same index up to the size of this array. If the variable contains a different value all elements will be initialized to this value.</td></tr><tr><td>size</td><td>int</td><td>Size of the array.</td></tr></tbody></table><h3 id=a-idobjectarrayaobjectarray><a id=objectArray></a>objectArray<a class=td-heading-self-link href=#a-idobjectarrayaobjectarray aria-label="Heading self-link"></a></h3><p>Creates object arrays to be stored in the session.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Contents of the new array. If the variable contains an array or a list, items will be copied to the elements with the same index up to the size of this array. If the variable contains a different value all elements will be initialized to this value.</td></tr><tr><td>size</td><td>int</td><td>Size of the array.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c67f263df2f9d86e80ef9e60b6334a7f>6.3.20 - setInt</h1><div class=lead>Set session variable to an integral value.</div><p>Set session variable to an integral value.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>var &lt;- value</code>.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>intCondition</td><td><a href=#intcondition>Builder</a></td><td>Set variable only if the current value satisfies certain condition.</td></tr><tr><td>max</td><td><a href=#max>Builder</a></td><td>Set to value that is the maximum of this list of values.</td></tr><tr><td>min</td><td><a href=#min>Builder</a></td><td>Set to value that is the minimum of this list of values.</td></tr><tr><td>onlyIfNotSet</td><td>boolean</td><td>Set variable to the value only if it is not already set.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr><tr><td>var</td><td>String</td><td>Variable name.</td></tr></tbody></table><h3 id=a-idintconditionaintcondition><a id=intCondition></a>intCondition<a class=td-heading-self-link href=#a-idintconditionaintcondition aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>equalTo</td><td><a href=#intconditionequalto>Builder</a></td><td>Compared variable must be equal to this value.</td></tr><tr><td>greaterOrEqualTo</td><td><a href=#intconditiongreaterorequalto>Builder</a></td><td>Compared variable must be greater or equal to this value.</td></tr><tr><td>greaterThan</td><td><a href=#intconditiongreaterthan>Builder</a></td><td>Compared variable must be greater than this value.</td></tr><tr><td>lessOrEqualTo</td><td><a href=#intconditionlessorequalto>Builder</a></td><td>Compared variable must be lower or equal to this value.</td></tr><tr><td>lessThan</td><td><a href=#intconditionlessthan>Builder</a></td><td>Compared variable must be lower than this value.</td></tr><tr><td>notEqualTo</td><td><a href=#intconditionnotequalto>Builder</a></td><td>Compared variable must not be equal to this value.</td></tr></tbody></table><h3 id=a-idintconditionequaltoaintconditionequalto><a id=intCondition.equalTo></a>intCondition.equalTo<a class=td-heading-self-link href=#a-idintconditionequaltoaintconditionequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterorequaltoaintconditiongreaterorequalto><a id=intCondition.greaterOrEqualTo></a>intCondition.greaterOrEqualTo<a class=td-heading-self-link href=#a-idintconditiongreaterorequaltoaintconditiongreaterorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditiongreaterthanaintconditiongreaterthan><a id=intCondition.greaterThan></a>intCondition.greaterThan<a class=td-heading-self-link href=#a-idintconditiongreaterthanaintconditiongreaterthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessorequaltoaintconditionlessorequalto><a id=intCondition.lessOrEqualTo></a>intCondition.lessOrEqualTo<a class=td-heading-self-link href=#a-idintconditionlessorequaltoaintconditionlessorequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionlessthanaintconditionlessthan><a id=intCondition.lessThan></a>intCondition.lessThan<a class=td-heading-self-link href=#a-idintconditionlessthanaintconditionlessthan aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idintconditionnotequaltoaintconditionnotequalto><a id=intCondition.notEqualTo></a>intCondition.notEqualTo<a class=td-heading-self-link href=#a-idintconditionnotequaltoaintconditionnotequalto aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idmaxamax><a id=max></a>max<a class=td-heading-self-link href=#a-idmaxamax aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#maxlist-of-mappings>&lt;list of builders></a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table><h3 id=a-idmaxltlist-of-mappingsgtamaxltlist-of-mappingsgt><a id="max.<list of mappings>"></a>max.&lt;list of mappings><a class=td-heading-self-link href=#a-idmaxltlist-of-mappingsgtamaxltlist-of-mappingsgt aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table><h3 id=a-idminamin><a id=min></a>min<a class=td-heading-self-link href=#a-idminamin aria-label="Heading self-link"></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>&lt;list of mappings></td><td><a href=#maxlist-of-mappings>&lt;list of builders></a></td><td><font color=#606060>&lt;no description></font></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e01a28fff1f433fd583f7c59618429b4>6.3.21 - setItem</h1><div class=lead>Set element in a collection on given position.</div><p>Set element in a collection on given position.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Fetch value from session variable.</td></tr><tr><td>index</td><td><a href=#index>Builder</a></td><td>Integer session variable with an index into the collection.</td></tr><tr><td>toVar</td><td>String</td><td>Session variable with the collection.</td></tr><tr><td>value</td><td>String</td><td>Verbatim value.</td></tr></tbody></table><h3 id=a-idindexaindex><a id=index></a>index<a class=td-heading-self-link href=#a-idindexaindex aria-label="Heading self-link"></a></h3><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Uses the argument as a constant value.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b6d683c2e9f3f4cf02ed9b943d1ca9da>6.3.22 - setSharedCounter</h1><div class=lead>Sets value in a counter shared by all sessions in the same executor.</div><p>Sets value in a counter shared by all sessions in the same executor.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Both the name of the counter and variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Input variable name.</td></tr><tr><td>key</td><td>String</td><td>Identifier for the counter.</td></tr><tr><td>value</td><td>int</td><td>Value (integer).</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-098f01a4c905aac3a8459883f76ace8c>6.3.23 - stringToInt</h1><div class=lead>Parse string into integer and store it in a variable.</div><p>Parse string into integer and store it in a variable.</p><p>If the parsing fails the target variable is not modified.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Use <code>fromVar -&amp;gt; toVar</code></td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>fromVar</td><td>String</td><td>Source variable name.</td></tr><tr><td>toVar</td><td>String</td><td>Target variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ecb62f2ab4c49c19c53f5a8657f599ce>6.3.24 - unset</h1><div class=lead>Undefine variable name.</div><p>Undefine variable name.</p><table><thead><tr><th>Inline definition</th></tr></thead><tbody><tr><td>Variable name.</td></tr></tbody></table><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>var</td><td>Object</td><td>Variable name.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4d7cdf0fc878af052e8b73d41dd8c7dd>7 - Extensions</h1><div class=lead>How to develop your own extensions</div><p>You have probably already read the <a href=/docs/getting-started/quickstart8/>Custom steps and handlers quickstart</a> which shows how to create a simple component. It can get more tricky when the component embeds other components, though.</p><p>The build of scenario happens in two phases. In first phase the sequences, steps and components call method <code>prepareBuild()</code>. Most often that method uses the default (empty) implementation, but if your component (e.g. custom step) embeds another one (e.g. instance of a <code>Processor</code>) it should call its <code>prepareBuild()</code> method, too. The purpose of this method is mutatation of builders, for example adding extra steps to the scenario or registering handlers elsewhere. We&rsquo;ll see how to do that later on.</p><p>In the second phase <code>build(...)</code> is called. At this point the builders tree must not be mutated further as some components might be already built and the change could not be reflected; this method should validate the builder and return the component.</p><p>Mutations of the scenario can be position dependent (e.g. adding one step before or after current step). Each builder that needs to know its position therefore must override two methods, <code>setLocator(Locator)</code> and <code>copy(Locator)</code>. The former usually just sets a field storing the <code>Locator</code> and delegates the call to embedded components, the latter performs a deep copy of this builder, storing the provided <code>Locator</code> in the copy.</p><p>If you want to add some extra steps elsewhere in the scenario, you can implement the <code>prepareBuild()</code> method this way:</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>Locator</span> <span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>/* ... */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>prepareBuild</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// insert custom step before this step in this sequence
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>sequence</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>insertBefore</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>step</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CustomStep</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// insert custom step after this step in this sequence, using a builder
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>sequence</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>insertAfter</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>stepBuilder</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CustomStep</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Builder</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>foo</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// insert a new sequence &#39;foo&#39; with single custom step to the scenario
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>scenario</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>sequence</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>step</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CustomStep</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div></div></div><p>Note that when you insert any builders in the <code>prepareBuild()</code> methods it is possible that its prepare phase won&rsquo;t be executed (if inserting to already prepared sequence), though it <em>might be</em> (if inserting to sequence that is yet to be prepared). It&rsquo;s up to the calling code to make sure that the inserted component will be prepared.</p><p>As mentioned above, components often embed other components. To service-load a component, e.g. an <code>Action</code> you define these methods in the builder:</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// This method is not different from regular fluent setter
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// and it&#39;s useful for programmatic configuration.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Builder</span> <span style=color:#000>onEvent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Action</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Builder</span> <span style=color:#000>onEvent</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// you can ensure here that this is called only once
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>onEvent</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>onEvent</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// This is the service-loading method.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>ServiceLoadedBuilderProvider</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Action</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Builder</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>onEvent</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ServiceLoadedBuilderProvider</span><span style=color:#ce5c00;font-weight:700>&lt;&gt;(</span><span style=color:#000>Action</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Builder</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>onEvent</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div></div></div><p>The parser instantiates concrete implementation of the <code>Action.Builder</code>, calls its setters and then passes the builder to the consumer method referenced as <code>this::onEvent</code>. Note that the call to <code>ServiceLoadedBuilderProvider</code> constructor requires a <code>Locator</code> parameter, as the embedded Action can mutate the scenario later on.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-20dabbfe348078f71286a134b47230cf>8 - Controller API</h1><div class=lead>OpenAPI 3 specification of the Hyperfoil controller</div><p>As a user you&rsquo;ll probably interact with the Controller through CLI. However when you set up e.g. regression runs in CI you&rsquo;ll need to control the test programmatically. Some limited capabilities are already exposed through <a href=/docs/user-guide/installation/ansible/>Ansible Galaxy scripts</a> but to get full control you can use the REST API - the same as the CLI or Ansible scripts connect to.</p><p>Hyperfoil Controller API is defined through <a href=https://swagger.io/docs/specification/about/>OpenAPI 3 Specification</a>. Our <a href=https://github.com/Hyperfoil/Hyperfoil/blob/master/controller-api/src/main/resources/openapi.yaml>OpenAPI reference</a> defines some types as free-form objects (e.g. the benchmark definition); refer to source code in these cases.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-7453ce567cf7617cc9fadff12e3c4baf>8.1 - Swagger UI</h1><div class=lead>Hyperfoil controller OpenAPI swagger UI</div><div id=docsy_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"https://raw.githubusercontent.com/Hyperfoil/Hyperfoil/master/controller-api/src/main/resources/openapi.yaml",dom_id:"#docsy_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-934e0568852666ce9d12820b78b67fe9>9 - Architecture</h1><div class=lead>Deep dive into the Hyperfoil architecture</div><p>While we have already explained <a href=/docs/overview/concepts/>basic concepts</a> in the benchmark and <a href=/docs/getting-started/quickstart1/>last quickstart</a> shows how to create a custom steps or handlers here we will show how Hyperfoil internally works and give you better idea how to create non-trivial extensions.</p><h2 id=building-the-scenario>Building the scenario<a class=td-heading-self-link href=#building-the-scenario aria-label="Heading self-link"></a></h2><p>The road from a YAML file to executing the benchmark starts with creating the <em>builder tree</em>. Either the CLI or controller presents this file to the parser (mostly classes from the <code>io.hyperfoil.core.parser</code> package) which reads it token-by-token and invoke methods on the <code>io.hyperfoil.api.config.BenchmarkBuilder</code> instance. Some parts of the parser are hard-coded, but most of them use reflection - that&rsquo;s why you don&rsquo;t need to write the parser yourselves.</p><p>Generally speaking each mapping (<code>foo: bar</code>) results in invoking method <code>foo()</code> on the builder; if this method accepts an argument (<code>bar</code>) the return value could be ignored - the method mutates the builder and that is all. Other methods do not accept any arguments and return another builder instance - the YAML subtree is then applies to this builder. The builder tree then roughly maps to the YAML tree in the original file.</p><p>When the YAML is fully read we execute the first phase of building the benchmark itself. We recursively (depth-first) call <code>prepareBuild()</code> methods on the tree; these methods are allowed to invoke further mutations on the builder tree, such as adding other <a href=/docs/overview/concepts/#scenario>steps and sequences</a>. An empty (default) implementation of this method is perfectly fine if you don&rsquo;t need anything complex, but if your extension delegates to children extensions it should recursively call the method on children builders. Make sure to iterate through a shallow copy of any collection of children as the children can mutate its parent, failing the iteration.</p><blockquote><p>Hyperfoil does not track new components created in <code>prepareBuild()</code> and therefore it won&rsquo;t call <code>prepareBuild()</code> on these if the part of builder tree was already processed - the code creating new components must call the method.</p></blockquote><p>When the first phase completes we invoke the <code>build()</code> method on the builder tree. As the build method is invoked recursively again we end up with the <em>benchmark tree</em> that again mirrors the builder tree. The mapping between builders and benchmark components doesn&rsquo;t need to be 1:1, e.g. <code>StepBuilder</code> can return several steps, builder can return wrapped components etc. However no mutations are allowed in this phase.</p><p>So we end up with the <code>io.hyperfoil.api.config.Benchmark</code> instance that holds this tree. It is important to make sure that this is <strong>immutable</strong> and <strong>serializable</strong> as it will be sent over the wire from controller to agents. This means that the components must not reference the builders. A common oversight is using a lambda that uses one of builder&rsquo;s fields - while you only need the actual value of the field the lambda would capture a reference to the builder; this is quite easy to fix by assigning the field value to a local var, though.</p><h2 id=creating-the-sessions>Creating the sessions<a class=td-heading-self-link href=#creating-the-sessions aria-label="Heading self-link"></a></h2><p>Hyperfoil tries to minimize allocations during the benchmark as while Java garbage collector is a good friend of every developer it has a negative effect on the real-time properties of the program. You should use collectors that minimize pause times (such as Shenandoah or ZGC) rather than those that maximize throughput. This is why we allocate all what we could need ahead.</p><p>Before the benchmark starts each agent creates all the sessions (based on the <code>maxSessions</code> property in case of open-model phases). When <code>Session.reserve()</code> is called it calls <code>reserve()</code> method on all steps that implement <code>ResourceUtilizer</code> interface. In this method the step must call <code>Session.declareResource()</code> on all the resources it uses.</p><p>Note: in previous versions of Hyperfoil it was necessary to also explicitly declare that the step can write into a session variable, and recursively call the <code>ResourceUtilizer.reserve()</code> method on all children components. Since version 0.16 Hyperfoil discovers all <code>ResourceUtilizer</code> implementors in the scenario tree; the recursive invocation is no longer necessary.</p><h2 id=scenario-execution>Scenario execution<a class=td-heading-self-link href=#scenario-execution aria-label="Heading self-link"></a></h2><p>Session execution starts with:</p><ul><li><p>one instance of each sequence declared in the <code>initialSequences</code> list</p></li><li><p>one instance of the first sequence in <code>orderedSequences</code> list</p></li><li><p>one instance of the first sequence in the implicit list of sequences (right under the <code>scenario:</code> declaration - this is mutually exclusive to the options above)</p></li></ul><p>The session keeps a list of active sequence instances, each with an index of the step that should execute next. There can be several instances of the same sequence, up to its concurrency (the number in brackets next to sequence name). Whenever the session is notified (using <code>Session.proceed()</code> which schedules <code>Session.call()</code> invocation in its executor) it goes through all active instances and calls <code>Step.invoke()</code> on the current step.</p><p>There are two possible results from the <code>invoke()</code> method that returns a boolean:</p><ul><li><code>true</code>: This means that step has been successfuly executed, it&rsquo;s complete and the sequence can continue with the next step (which it will, immediately) or complete if this was the last step.</li><li><code>false</code>: We say that the step was <em>blocked</em> - it cannot execute immediately. It could be either because the step is short of resources (e.g. <code>httpRequest</code> cannot get any available connection from the pool) but most often this is because the purpose of this step is to wait for certain condition: variable being set/reaching certain value, request being completed etc. The sequence will <strong>not</strong> progress towards next step and this step&rsquo;s <code>invoke()</code> method will be called again (when the <code>Session.proceed()</code> is called). An important property is that if the step returns <code>false</code> the step must not have any side-effects - it must not fire a request, set a session variable, simply it was a no-op. If the step acquired a resource from a pool it should return it prior to returning <code>false</code>.</li></ul><h2 id=session-variables>Session variables<a class=td-heading-self-link href=#session-variables aria-label="Heading self-link"></a></h2><p>The session contains a map of variables the scenario uses. The keys are usually strings but this is not mandated; some steps may e.g. choose to use an unique object as the key. The values in the map are wrapper objects that hold a boolean flag whether this variable is set and the value itself. To avoid boxing and unboxing there&rsquo;s a different wrapper for integers and other objects - it&rsquo;s up to step to check the wrapper type and convert the value if necessary.</p><p>The map is not manipulated directly - a builder for a step that should work with variable <code>foo</code> should call <code>SessionFactory.readAccess("foo")</code>, <code>SessionFactory.intAccess("foo")</code> or <code>SessionFactory.objectAccess("foo")</code> in its <code>build()</code> method and pass the received <code>Access</code> to the step it creates. The step then operates exclusively using <code>Access</code> methods. And example of this can be found in the <a href=/docs/getting-started/quickstart8/>getting started: custom steps</a> guide.</p><h3 id=sequence-scoped-access>Sequence-scoped access<a class=td-heading-self-link href=#sequence-scoped-access aria-label="Heading self-link"></a></h3><p>In quickstarts there are examples of <em>sequence-scoped access</em> - variables with <code>[.]</code> suffix, e.g. <code>unset: myVar[.]</code>. This is used when the variable holds an array of variables (wrappers) created using <code>ObjectVar.newArray()</code> or <code>IntVar.newArray()</code> in the <code>ResourcesUtilizer.reserve()</code> method - a common pattern would be</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>reserve</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Session</span> <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(!</span><span style=color:#000>var</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isSet</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>))</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>var</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setObject</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObjectVar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>newArray</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>concurrency</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div></div></div><p>The array is often created in a non-conurrent sequence that starts several concurrent instances of another sequence - the <code>var</code> would be used with the simple access (without the <code>[.]</code> suffix) in the original sequence, and with <code>[.]</code> in the concurrent sequences. Each of the concurrent sequences would get a different <code>SequenceInstance.index()</code> and with sequence-scoped access these would work on the variable on this position in the array. The step does not need to be tailored specifically to work on sequence-scoped variables; when creating the <code>Access</code> instance using <code>SessionFactory.objectAccess()</code> the presence of the suffix is automatically checked and the returned <code>Access</code> will relay the operations to the slot in the array.</p><h2 id=session-resources>Session resources<a class=td-heading-self-link href=#session-resources aria-label="Heading self-link"></a></h2><p>If a step (or a set of cooperating steps) needs to keep some internal state that is not available to users through arbitrary identifiers as session variables these can use concept called <em>session resources</em>. It is again an immutable map of objects in the session (while the map itself is immutable the values are meant to be mutated).</p><p>To make the code type-safe you start with the <code>Resource</code> implementation and matching <code>ResourceKey</code>:</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>FooResource</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Session</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Resource</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>/* ... */</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>FooResourceKey</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Session</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>ResourceKey</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>FooResource</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>{}</span>
</span></span></code></pre></div></div></div><p>The resource key does not need any methods - it is just an unique marker object that will serve as the key in a map. If the resource will be used exclusively in this very step (action, processor&mldr;) you can implement the <code>ResourceKey</code> in there and use <code>this</code> when calling <code>session.getResource()</code>:</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>FooStep</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Step</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ResourceUtilizer</span><span style=color:#ce5c00;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>SessionResourceKey</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>FooStep</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>FooResource</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>/* ... */</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div></div></div><p>Both session variables and session resources are declared in the <code>reserve()</code> method and retrieved (and mutated) in the business method (<code>invoke()</code> in the case of a step):</p><div class="td-card card border me-4"><div class="card-header code"><strong>Java</strong></div><div class="card-body code p-0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>FooStep</span> <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>Step</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ResourceUtilizer</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>FooResourceKey</span> <span style=color:#000>resourceKey</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// set in constructor
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>reserve</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Session</span> <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// we are using supplier rather than creating instance directly because
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#8f5902;font-style:italic>// if this sequence is concurrent we will create N resources, the state
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#8f5902;font-style:italic>// of concurrent sequences will be isolated by default.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>declareResource</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>resourceKey</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>FooResource</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>invoke</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Session</span> <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>FooResource</span> <span style=color:#000>resource</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>session</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getResource</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>resourceKey</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>/* work on the resource */</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div></div></div><h2 id=component-adapters>Component adapters<a class=td-heading-self-link href=#component-adapters aria-label="Heading self-link"></a></h2><p>There are several types of extension components: steps, actions and processors get extra attention but it is possible to use other interfaces as well. Actions are the simplest of these: these do not require any input (but the session) and do always execute without blocking. Therefore it is possible to use an action on any place where a step or processor would fit. When loading the component by name Hyperfoil automatically wraps the action into an adapter to the target component type.</p><h2 id=thread-local-agent-local-and-global-data>Thread-local, agent-local and global data<a class=td-heading-self-link href=#thread-local-agent-local-and-global-data aria-label="Heading self-link"></a></h2><p>Besides session variables Hyperfoil offers 3 more levels of memory. Neither of those is limited to the currently executing phase: this data is not reset until the run completes.</p><p>First level is the thread-local memory: since each session runs using single executor it is possible to share some data between sessions using the same executor without any need for synchronization. Currently this model supports shared counters (see <a href=/docs/reference/steps/step_addToSharedCounter>addToSharedCounter</a> and <a href=docs/steps/step_getSharedCounter>getSharedCounter</a>) and shared map-like objects (see <a href=/docs/reference/steps/step_pushSharedMap>pushSharedMap</a> and <a href=/docs/reference/steps/step_pushSharedMap>pullSharedMap</a>). The latter keeps a pool of maps for each executor; when the map is pulled to a session it is removed from the pool, and it&rsquo;s up to the user to return it back. This is useful e.g. for simulating stateful virtual users when we don&rsquo;t want to modify one user concurrently in multiple sessions.</p><p>Second level is the agent-local memory. This is intended for caching data that needs to be initialized once and then used throughout the test; the initializing phase should invoke <a href=/docs/reference/steps/step_publishAgentData>publishAgentData</a>. It&rsquo;s up to you to make sure that when this is read using <a href=/docs/reference/steps/step_readAgentData>readAgentData</a> the data is already available - usually the reading phase should be ordered after the publishing phase using <a href=/userguide/benchmark/phases.html>startAfterStrict</a> property. Agent data are identified using keys (names); the data for each key can be published only once and cannot be updated afterwards. This limitation is imposed to minimize synchronization of executors.</p><p>Third level is the global mem ory. Again this could be used for distributing initialization data but also for gathering data from other agents and threads. The idea is that each thread or agent produces a reduce-able object; Hyperfoil then combines these objects on the agent level (in arbitrary order), sends it to the controller where data from all agents are combined again and the result is distributed back to all agents. As with the agent data you should strictly order the producing and consuming phases, otherwise the data might not be available yet and the run would fail.
Currently Hyperfoil does not provide any general-use steps/actions to work with global data; you should implement <a href=https://github.com/Hyperfoil/Hyperfoil/blob/master/api/src/main/java/io/hyperfoil/api/session/GlobalData.java#L29-L36>GlobalData.Element</a> in an extension and provide steps to create & publish instances of these.</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub Discussions" aria-label="GitHub Discussions"><a target=_blank rel=noopener href=https://github.com/Hyperfoil/Hyperofil/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://x.com/Hyperfoil aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/Hyperfoil/Hyperofil aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Zulip aria-label=Zulip><a target=_blank rel=noopener href=https://hyperfoil.zulipchat.com/ aria-label=Zulip><i class="fab fa-z"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub Issues" aria-label="GitHub Issues"><a target=_blank rel=noopener href=https://github.com/Hyperfoil/Hyperofil/issues aria-label="GitHub Issues"><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2017&ndash;2024
<span class=td-footer__authors>Hyperfoil | <a href=https://www.apache.org/licenses/LICENSE-2.0>Apache License 2.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/hyperfoil-website-demo/js/main.min.53f3e04e8d693751b0d08317a1dfec9508d2a99f2a3d232d929e075cd6f20865.js integrity="sha256-U/PgTo1pN1Gw0IMXod/slQjSqZ8qPSMtkp4HXNbyCGU=" crossorigin=anonymous></script>
<script defer src=/hyperfoil-website-demo/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script>
<script src=/hyperfoil-website-demo/js/tabpane-persist.js></script></body></html>